{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>Don't enumerate tools. Execute code.</p> <p>MCP doesn't scale. Connect 5 servers: 55K tokens burned. Connect 10+: 100K+ tokens gone before you say hello. OneTool fixes this.</p> <p>98.7% fewer tokens. Same accuracy. 10x lower cost.</p>"},{"location":"#get-started","title":"Get Started","text":"<ul> <li>Quickstart - Running in 2 minutes</li> <li>Installation - All platforms</li> <li>Configuration - YAML schema</li> <li>Security - Security model and policies</li> </ul>"},{"location":"#learn","title":"Learn","text":"<ul> <li>Why OneTool - The problem and solution</li> <li>Guides - How-to guides</li> <li>Examples - Demo project</li> </ul>"},{"location":"#reference","title":"Reference","text":"<ul> <li>Tools - 10 built-in packs</li> <li>CLIs - ot-serve, ot-bench</li> </ul>"},{"location":"#extend","title":"Extend","text":"<ul> <li>Creating Tools - Drop a file, get a pack</li> <li>Creating CLIs - Build command-line tools</li> </ul>"},{"location":"#built-in-packs","title":"Built-in Packs","text":"<p>Search &amp; Web: <code>brave</code> (web, news, local, image, video), <code>ground</code> (Google grounded), <code>web</code> (fetch, extract)</p> <p>Documentation: <code>context7</code> (library docs), <code>code</code> (semantic search), <code>ripgrep</code> (fast grep)</p> <p>Data: <code>db</code> (SQL queries), <code>excel</code> (spreadsheets), <code>llm</code> (transform)</p> <p>Utilities: <code>package</code> (npm, PyPI versions), <code>ot</code> (meta tools)</p>"},{"location":"#how-it-works","title":"How It Works","text":"<pre><code>__ot brave.search(query=\"AI trends 2026\")\n</code></pre> <p>One prefix. Direct execution. No JSON schemas. No tool selection loops.</p>"},{"location":"examples/","title":"Examples","text":"<p>Copy. Paste. Run.</p> <p>Working examples for every use case. The <code>demo/</code> folder is your playground.</p>"},{"location":"examples/#use-cases","title":"Use Cases","text":"Category Tools Example Web Research <code>brave.search</code>, <code>web.fetch</code> <code>brave.search(query=\"AI trends 2026\")</code> Documentation <code>context7.search</code>, <code>context7.doc</code> <code>context7.doc(library=\"/vercel/next.js\")</code> Code Analysis <code>code.search</code>, <code>ripgrep.search</code> <code>ripgrep.search(pattern=\"def.*async\")</code> Data Processing <code>llm.transform</code>, <code>db.query</code> <code>llm.transform(input=data, prompt=\"extract emails\")</code> Package Management <code>package.npm</code>, <code>package.pypi</code> <code>package.npm([\"react\", \"vue\"])</code>"},{"location":"examples/#demo-project","title":"Demo Project","text":"<p>The <code>demo/</code> folder provides sample configurations and data for testing OneTool CLIs.</p>"},{"location":"examples/#using-the-demo-project","title":"Using the Demo Project","text":"<p>Set <code>OT_CWD=demo</code> to use the demo project's configurations:</p> <pre><code># Run benchmarks with demo config\nOT_CWD=demo uv run ot-bench run demo/bench/features.yaml\n\n# Start server with demo config\nOT_CWD=demo uv run ot-serve\n</code></pre> <p>Or use the justfile shortcuts:</p> <pre><code>just eg-bench          # TUI picker for demo benchmarks\njust eg-serve          # Start server with demo config\n</code></pre>"},{"location":"examples/#folder-structure","title":"Folder Structure","text":"<pre><code>demo/\n  .onetool/           # OneTool configuration\n    ot-serve.yaml     # MCP server config\n    ot-bench.yaml     # Benchmark harness config\n    prompts.yaml      # Prompt templates\n  bench/              # Benchmark YAML files\n  db/                 # Sample databases\n</code></pre>"},{"location":"examples/#demobench","title":"demo/bench","text":"<p>Benchmark harness configurations for testing LLM + MCP server combinations.</p>"},{"location":"examples/#files","title":"Files","text":"File Description <code>features.yaml</code> Feature showcase (search, docs, transform) <code>compare.yaml</code> Compare base vs OneTool responses <code>python_exec.yaml</code> Python code execution tests <code>tool_*.yaml</code> Per-tool benchmarks"},{"location":"examples/#running","title":"Running","text":"<pre><code># With TUI picker\njust eg-bench\n\n# Specific file\njust eg-bench-run features.yaml\n\n# Direct command\nOT_CWD=demo uv run ot-bench run demo/bench/tool_brave_search.yaml\n</code></pre>"},{"location":"examples/#demodb","title":"demo/db","text":"<p>Sample SQLite database for testing db tools.</p> File Description <code>northwind.db</code> Classic Northwind sample database <pre><code># Run db tool benchmark\njust eg-bench-run tool_db.yaml\n</code></pre>"},{"location":"extending/","title":"Extending OneTool","text":"<p>Drop a file. Get a pack. No registration.</p> <p>Adding tools to OneTool is trivial - create a Python file, declare a pack, and you're done.</p>"},{"location":"extending/#developer-guides","title":"Developer Guides","text":"Guide Description Creating Tools Add custom tool functions Creating Plugins Build tools in separate repositories Creating CLIs Build command-line interfaces Testing Test markers and organization Logging Structured logging with LogSpan"},{"location":"extending/#quick-start-adding-a-tool","title":"Quick Start: Adding a Tool","text":"<ol> <li>Create a file in <code>src/ot_tools/</code>:</li> </ol> <pre><code># src/ot_tools/mytool.py\npack = \"mytool\"\n\n__all__ = [\"search\"]\n\ndef search(*, query: str) -&gt; str:\n    \"\"\"Search for items.\n\n    Args:\n        query: Search query\n\n    Returns:\n        Search results\n    \"\"\"\n    return f\"Results for: {query}\"\n</code></pre> <ol> <li> <p>Restart <code>ot-serve</code> - the tool is auto-discovered.</p> </li> <li> <p>Use it:</p> </li> </ol> <pre><code>__ot mytool.search(query=\"test\")\n</code></pre>"},{"location":"extending/#architecture","title":"Architecture","text":"<pre><code>src/\n\u251c\u2500\u2500 ot/           # Core library\n\u251c\u2500\u2500 ot_sdk/       # SDK for worker tools\n\u251c\u2500\u2500 ot_tools/     # Built-in tools (auto-discovered)\n\u251c\u2500\u2500 ot_serve/     # CLI: ot-serve\n\u2514\u2500\u2500 ot_bench/     # CLI: ot-bench\n</code></pre>"},{"location":"extending/#contributing","title":"Contributing","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch</li> <li>Install dev dependencies: <code>uv sync --group dev</code></li> <li>Make changes</li> <li>Run tests: <code>uv run pytest</code></li> <li>Submit a pull request</li> </ol>"},{"location":"extending/#code-style","title":"Code Style","text":"<ul> <li>Format with <code>ruff format</code></li> <li>Lint with <code>ruff check</code></li> <li>Type check with <code>mypy</code></li> </ul>"},{"location":"extending/creating-clis/","title":"Creating CLIs","text":"<p>Consistent. Beautiful. Five patterns.</p> <p>OneTool CLIs share utilities for configuration, output, and logging. Follow these patterns for a unified experience.</p>"},{"location":"extending/creating-clis/#cli-naming","title":"CLI Naming","text":"<p>All CLIs follow the <code>ot-&lt;purpose&gt;</code> pattern:</p> CLI Purpose <code>onetool</code> Setup, configuration, upgrade <code>ot-serve</code> MCP server <code>ot-bench</code> Benchmark harness"},{"location":"extending/creating-clis/#required-patterns","title":"Required Patterns","text":""},{"location":"extending/creating-clis/#1-use-shared-cli-utilities","title":"1. Use Shared CLI Utilities","text":"<pre><code>from ot._cli import console, create_cli, version_callback\n\napp = create_cli(\n    \"ot-example\",\n    \"Example CLI description.\",\n    no_args_is_help=True,\n)\n</code></pre>"},{"location":"extending/creating-clis/#2-load-environment-variables","title":"2. Load Environment Variables","text":"<pre><code>from onetool.paths import load_env\n\nload_env()  # Must be before app creation\n\napp = create_cli(...)\n</code></pre>"},{"location":"extending/creating-clis/#3-version-flag","title":"3. Version Flag","text":"<pre><code>@app.callback()\ndef main(\n    version: Annotated[\n        bool | None,\n        typer.Option(\n            \"--version\", \"-v\",\n            callback=version_callback(\"ot-example\", __version__),\n            is_eager=True,\n        ),\n    ] = None,\n) -&gt; None:\n    \"\"\"CLI description.\"\"\"\n</code></pre>"},{"location":"extending/creating-clis/#4-json-output","title":"4. JSON Output","text":"<pre><code>@app.command()\ndef list_items(\n    output_json: Annotated[\n        bool,\n        typer.Option(\"--json\", help=\"Output as JSON\"),\n    ] = False,\n) -&gt; None:\n    if output_json:\n        console.print(json.dumps({\"items\": items}))\n    else:\n        # Rich table output\n</code></pre>"},{"location":"extending/creating-clis/#5-config-flag","title":"5. Config Flag","text":"<pre><code>config: Path | None = typer.Option(\n    None,\n    \"--config\", \"-c\",\n    help=\"Path to configuration file.\",\n    exists=True,\n)\n</code></pre>"},{"location":"extending/creating-clis/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Invalid arguments"},{"location":"extending/creating-clis/#package-structure","title":"Package Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 ot/              # Shared library\n\u2502   \u251c\u2500\u2500 _cli.py      # CLI utilities\n\u2502   \u2514\u2500\u2500 config/      # Configuration\n\u251c\u2500\u2500 ot_serve/        # ot-serve CLI\n\u2502   \u251c\u2500\u2500 __init__.py  # __version__ = \"...\"\n\u2502   \u2514\u2500\u2500 cli.py       # Entry point\n\u2514\u2500\u2500 ot_example/      # Your CLI\n</code></pre>"},{"location":"extending/creating-clis/#pyprojecttoml-entry-points","title":"pyproject.toml Entry Points","text":"<pre><code>[project.scripts]\not-example = \"ot_example.cli:cli\"\n</code></pre>"},{"location":"extending/creating-clis/#output-formatting","title":"Output Formatting","text":""},{"location":"extending/creating-clis/#rich-console","title":"Rich Console","text":"<pre><code>from ot._cli import console\n\nconsole.print(\"[green]\u2713[/green] Success\")\nconsole.print(\"[red]Error:[/red] Failed\")\nconsole.print(\"[yellow]Warning:[/yellow] Check this\")\n</code></pre>"},{"location":"extending/creating-clis/#progress-indicators","title":"Progress Indicators","text":"Symbol Meaning \u2713 Success/complete \u2717 Failure/error \u25cf Active/in-progress \u25cb Pending/inactive"},{"location":"extending/creating-clis/#tables","title":"Tables","text":"<pre><code>from rich.table import Table\n\ntable = Table(title=\"Items\")\ntable.add_column(\"Name\", style=\"bold\")\ntable.add_column(\"Status\")\ntable.add_row(\"item-1\", \"[green]active[/green]\")\nconsole.print(table)\n</code></pre>"},{"location":"extending/creating-clis/#common-patterns","title":"Common Patterns","text":""},{"location":"extending/creating-clis/#confirmation-prompts","title":"Confirmation Prompts","text":"<pre><code>yes: Annotated[\n    bool,\n    typer.Option(\"--yes\", \"-y\", help=\"Skip confirmation\"),\n] = False\n\nif not yes:\n    if not typer.confirm(f\"Delete '{name}'?\"):\n        raise typer.Exit(0)\n</code></pre>"},{"location":"extending/creating-clis/#dry-run","title":"Dry Run","text":"<pre><code>dry_run: Annotated[\n    bool,\n    typer.Option(\"--dry-run\", help=\"Preview changes\"),\n] = False\n</code></pre>"},{"location":"extending/creating-clis/#subcommand-groups","title":"Subcommand Groups","text":"<pre><code>config_app = typer.Typer(help=\"Configuration commands\")\napp.add_typer(config_app, name=\"config\")\n\n@config_app.command()\ndef show():\n    \"\"\"Show current configuration.\"\"\"\n</code></pre>"},{"location":"extending/creating-clis/#multi-command-clis","title":"Multi-Command CLIs","text":"<p>For CLIs with multiple subcommands (like <code>ot-bench</code>):</p>"},{"location":"extending/creating-clis/#structure","title":"Structure","text":"<pre><code>src/ot_example/\n\u251c\u2500\u2500 __init__.py          # Package with __version__\n\u251c\u2500\u2500 cli.py               # Main entry point\n\u251c\u2500\u2500 commands/            # Subcommand implementations\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 run.py           # @app.command() for 'run'\n\u2502   \u2514\u2500\u2500 report.py        # @app.command() for 'report'\n\u2514\u2500\u2500 core.py              # Shared business logic\n</code></pre>"},{"location":"extending/creating-clis/#main-entry-point","title":"Main Entry Point","text":"<pre><code># src/ot_example/cli.py\nfrom __future__ import annotations\n\nimport typer\nimport ot\nfrom ot._cli import create_cli, version_callback\n\napp = create_cli(\n    \"ot-example\",\n    \"Multi-command CLI description.\",\n    no_args_is_help=True,  # Show help when no command provided\n)\n\n@app.callback()\ndef main(\n    version: bool | None = typer.Option(\n        None,\n        \"--version\", \"-v\",\n        callback=version_callback(\"ot-example\", ot.__version__),\n        is_eager=True,\n    ),\n) -&gt; None:\n    \"\"\"CLI main help text.\"\"\"\n    pass\n\n# Import subcommands to auto-register them\nfrom ot_example.commands import run, report  # noqa: E402, F401\n\ndef cli() -&gt; None:\n    app()\n\nif __name__ == \"__main__\":\n    cli()\n</code></pre>"},{"location":"extending/creating-clis/#subcommand-module","title":"Subcommand Module","text":"<pre><code># src/ot_example/commands/run.py\nfrom __future__ import annotations\n\nimport typer\nfrom typing import Annotated\n\nfrom ot_example.cli import app\nfrom ot.logging import LogSpan\n\n@app.command()\ndef run(\n    target: Annotated[str, typer.Argument(help=\"Target to run\")],\n    verbose: Annotated[bool, typer.Option(\"--verbose\", \"-v\")] = False,\n) -&gt; None:\n    \"\"\"Run the specified target.\"\"\"\n    with LogSpan(span=\"cli.run\", target=target) as s:\n        # Implementation\n        s.add(\"result\", \"success\")\n</code></pre>"},{"location":"extending/creating-clis/#interactive-tui-clis","title":"Interactive TUI CLIs","text":"<p>For interactive menu-driven CLIs (like <code>ot-browse</code>), use argparse with a controller class:</p> <pre><code># src/ot_example/app.py\nfrom __future__ import annotations\n\nimport argparse\nimport asyncio\n\nfrom ot._cli import console\nfrom ot.logging import configure_logging\nfrom ot._tui import ask_select\n\nclass AppController:\n    \"\"\"Interactive CLI controller.\"\"\"\n\n    def __init__(self, config) -&gt; None:\n        self.config = config\n\n    async def run(self) -&gt; None:\n        \"\"\"Main event loop.\"\"\"\n        try:\n            while True:\n                choice = await ask_select(\n                    \"Action:\",\n                    [\"process\", \"view\", \"quit\"],\n                )\n                if choice == \"quit\":\n                    break\n                await self._handle_action(choice)\n        except KeyboardInterrupt:\n            pass\n        finally:\n            console.print(\"[dim]Goodbye[/dim]\")\n\n    async def _handle_action(self, action: str) -&gt; None:\n        handlers = {\n            \"process\": self._process,\n            \"view\": self._view,\n        }\n        if handler := handlers.get(action):\n            await handler()\n\n    async def _process(self) -&gt; None:\n        console.print(\"Processing...\")\n\n    async def _view(self) -&gt; None:\n        console.print(\"Viewing...\")\n\ndef main() -&gt; None:\n    configure_logging(log_name=\"example\")\n\n    parser = argparse.ArgumentParser(description=\"Interactive example CLI\")\n    parser.add_argument(\"--config\", \"-c\", help=\"Config file path\")\n    args = parser.parse_args()\n\n    controller = AppController(args.config)\n    asyncio.run(controller.run())\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"extending/creating-clis/#logging","title":"Logging","text":"<pre><code>from ot.logging import configure_logging, LogSpan\n\ndef cli() -&gt; None:\n    configure_logging(log_name=\"example\")\n    app()\n\n@app.command()\ndef process(name: str) -&gt; None:\n    with LogSpan(span=\"cli.process\", item=name) as s:\n        # ... do work ...\n        s.add(\"result\", \"success\")\n</code></pre>"},{"location":"extending/creating-clis/#testing","title":"Testing","text":"<pre><code>from typer.testing import CliRunner\n\nrunner = CliRunner()\n\ndef test_version():\n    result = runner.invoke(app, [\"--version\"])\n    assert result.exit_code == 0\n\ndef test_json_output():\n    result = runner.invoke(app, [\"list\", \"--json\"])\n    data = json.loads(result.stdout)\n    assert \"items\" in data\n</code></pre>"},{"location":"extending/creating-clis/#checklist","title":"Checklist","text":"<ul> <li> Use <code>create_cli()</code> from <code>ot._cli</code></li> <li> Call <code>load_env()</code> at module level</li> <li> Add <code>--version</code> / <code>-v</code> flag</li> <li> Add <code>--config</code> / <code>-c</code> if configurable</li> <li> Add <code>--json</code> for data commands</li> <li> Add <code>--yes</code> / <code>-y</code> for destructive commands</li> <li> Use Rich console for output</li> <li> Use LogSpan for operations</li> <li> Add entry point to pyproject.toml</li> <li> Write tests using CliRunner</li> </ul>"},{"location":"extending/creating-tools/","title":"Creating Tools","text":"<p>One file. One pack. Instant availability.</p> <p>No registration. No configuration. Drop a Python file, restart the server, call your functions.</p>"},{"location":"extending/creating-tools/#file-structure","title":"File Structure","text":"<p>Each tool file follows this structure:</p> <pre><code>\"\"\"Tool module docstring.\n\nBrief description of what the tool does.\nRequirements (e.g., \"Requires MY_API_KEY in secrets.yaml\").\n\"\"\"\n\nfrom __future__ import annotations\n\n# Pack declaration MUST be before other imports\npack = \"mytools\"\n\n# Export only these functions as tools\n__all__ = [\"search\", \"fetch\", \"batch\"]\n\nfrom typing import Any, Literal\n\nfrom ot.config.secrets import get_secret\nfrom ot.logging import LogSpan\n</code></pre>"},{"location":"extending/creating-tools/#pack-declaration","title":"Pack Declaration","text":"<p>The <code>pack</code> variable enables dot notation:</p> <pre><code>pack = \"brave\"  # Exposes brave.search(), brave.news()\npack = \"web\"    # Exposes web.fetch(), web.fetch_batch()\n</code></pre> <p>Important: The pack declaration must appear before other imports (except <code>from __future__</code>).</p>"},{"location":"extending/creating-tools/#export-control","title":"Export Control","text":"<p>Use <code>__all__</code> to declare which functions are exposed as tools:</p> <pre><code>__all__ = [\"search\", \"fetch\", \"batch\"]  # Only these become tools\n</code></pre> <p>Without <code>__all__</code>, imported functions would be incorrectly exposed as tools.</p>"},{"location":"extending/creating-tools/#function-signatures","title":"Function Signatures","text":"<p>All tool functions MUST use keyword-only arguments:</p> <pre><code># CORRECT\ndef search(\n    *,\n    query: str,\n    count: int = 10,\n) -&gt; str:\n    \"\"\"Search for items.\"\"\"\n    ...\n\n# WRONG - will cause runtime errors\ndef search(query: str, count: int = 10) -&gt; str:\n    ...\n</code></pre>"},{"location":"extending/creating-tools/#docstring-format","title":"Docstring Format","text":"<p>All public tool functions MUST include complete docstrings:</p> <pre><code>def search(\n    *,\n    query: str,\n    count: int = 10,\n) -&gt; str:\n    \"\"\"Search for items.\n\n    Args:\n        query: The search query string\n        count: Number of results (1-20, default: 10)\n\n    Returns:\n        Formatted search results\n\n    Example:\n        mytools.search(query=\"python async\", count=5)\n    \"\"\"\n</code></pre>"},{"location":"extending/creating-tools/#logging-with-logspan","title":"Logging with LogSpan","text":"<p>All public tool functions must use LogSpan:</p> <pre><code>from ot.logging import LogSpan\n\ndef search(*, query: str) -&gt; str:\n    \"\"\"Search for items.\"\"\"\n    with LogSpan(span=\"mytools.search\", query=query) as s:\n        results = do_search(query)\n        s.add(\"resultCount\", len(results))\n        return format_results(results)\n</code></pre>"},{"location":"extending/creating-tools/#error-handling","title":"Error Handling","text":"<p>Return error messages as strings, don't raise exceptions:</p> <pre><code>def search(*, query: str) -&gt; str:\n    with LogSpan(span=\"mytools.search\", query=query) as s:\n        api_key = get_secret(\"MY_API_KEY\")\n        if not api_key:\n            s.add(\"error\", \"no_api_key\")\n            return \"Error: MY_API_KEY not configured\"\n\n        try:\n            result = call_api(query)\n            return format_result(result)\n        except APIError as e:\n            s.add(\"error\", str(e))\n            return f\"API error: {e}\"\n</code></pre>"},{"location":"extending/creating-tools/#worker-tools","title":"Worker Tools","text":"<p>Tools with external dependencies run as isolated subprocesses using PEP 723:</p> <pre><code># /// script\n# requires-python = \"&gt;=3.11\"\n# dependencies = [\"some-library&gt;=1.0.0\", \"httpx&gt;=0.27.0\", \"pyyaml&gt;=6.0.0\"]\n# ///\n\"\"\"Tool module docstring.\"\"\"\n\nfrom ot_sdk import get_config, get_secret, http, log, cache, worker_main\n\npack = \"mytool\"\n__all__ = [\"search\"]\n\n@cache(ttl=300)  # Cache results for 5 minutes\ndef search(*, query: str) -&gt; str:\n    \"\"\"Search for items.\"\"\"\n    with log(\"mytool.search\", query=query) as s:\n        api_key = get_secret(\"MY_API_KEY\")\n        response = http.get(f\"https://api.example.com/search?q={query}\")\n        s.add(\"resultCount\", len(response.json()))\n        return format_results(response.json())\n\nif __name__ == \"__main__\":\n    worker_main()\n</code></pre> <p>\u26a0\ufe0f Critical: The <code>if __name__ == \"__main__\": worker_main()</code> block is required for any file with a PEP 723 header. Without it, the tool will fail with \"Worker for X.py closed unexpectedly\" because: 1. PEP 723 headers mark a tool as a worker (runs in subprocess) 2. Workers communicate via stdin/stdout JSON-RPC 3. <code>worker_main()</code> provides the stdin loop that handles requests 4. Without it, the subprocess starts, executes module-level code, and exits immediately</p> <p>If you have a PEP 723 header but don't need isolated dependencies, remove the header instead of adding <code>worker_main()</code>. This lets the tool run in-process.</p>"},{"location":"extending/creating-tools/#sdk-exports","title":"SDK Exports","text":"<p>The <code>ot_sdk</code> package provides these utilities for worker tools:</p> Module Purpose <code>worker_main</code> Main loop - dispatches JSON-RPC requests to functions <code>get_config(key)</code> Access configuration from <code>ot-serve.yaml</code> <code>get_secret(key)</code> Access secrets from <code>secrets.yaml</code> <code>http</code> Pre-configured httpx client with connection pooling <code>log(span, **kwargs)</code> Structured logging context manager <code>cache(ttl=seconds)</code> In-memory caching decorator with TTL <code>get_project_path(path)</code> Resolve paths relative to project directory <code>get_config_path(path)</code> Resolve paths relative to config directory"},{"location":"extending/creating-tools/#http-client","title":"HTTP Client","text":"<p>The SDK provides a pre-configured httpx client:</p> <pre><code>from ot_sdk import http\n\n# Simple requests\nresponse = http.get(url, params={}, headers={}, timeout=30)\nresponse = http.post(url, json={}, headers={})\n\n# Custom client for different settings\nclient = http.client(base_url=\"https://api.example.com\", timeout=60)\nresponse = client.get(\"/endpoint\")\n</code></pre>"},{"location":"extending/creating-tools/#caching","title":"Caching","text":"<p>Use the <code>@cache</code> decorator for expensive operations:</p> <pre><code>from ot_sdk import cache\n\n@cache(ttl=300)  # Cache for 5 minutes\ndef fetch_data(*, url: str) -&gt; str:\n    \"\"\"Fetch and cache data.\"\"\"\n    return http.get(url).text\n\n@cache(ttl=3600)  # Cache for 1 hour\ndef expensive_computation(*, input: str) -&gt; str:\n    \"\"\"Cache expensive results.\"\"\"\n    return process(input)\n</code></pre>"},{"location":"extending/creating-tools/#worker-communication-protocol","title":"Worker Communication Protocol","text":"<p>Workers communicate via JSON-RPC over stdin/stdout:</p> <pre><code>Request:  {\"function\": \"name\", \"kwargs\": {...}, \"config\": {...}, \"secrets\": {...}}\nResponse: {\"result\": ..., \"error\": null} or {\"result\": null, \"error\": \"message\"}\n</code></pre>"},{"location":"extending/creating-tools/#configuration-access","title":"Configuration Access","text":"<p>Tools can access centralized configuration:</p> <pre><code>from ot.config import get_config\n\ndef search(*, query: str, timeout: float | None = None) -&gt; str:\n    if timeout is None:\n        timeout = get_config().tools.mytool.timeout\n    # ...\n</code></pre> <p>Add config to <code>src/ot/config/loader.py</code>:</p> <pre><code>class MyToolConfig(BaseModel):\n    timeout: float = Field(default=30.0, ge=1.0, le=120.0)\n</code></pre>"},{"location":"extending/creating-tools/#path-resolution","title":"Path Resolution","text":"<p>Tools work with two path contexts:</p> Context Use For Relative To Project paths Reading/writing project files <code>OT_CWD</code> (working directory) Config paths Loading config assets (templates, etc.) Config directory (<code>.onetool/</code>)"},{"location":"extending/creating-tools/#project-paths-readingwriting-files","title":"Project Paths (Reading/Writing Files)","text":"<p>When reading or writing files in the user's project, resolve paths relative to the project working directory:</p> <pre><code>from ot_sdk import get_project_path\n\ndef save_output(*, content: str, output_file: str = \"output.txt\") -&gt; str:\n    \"\"\"Save content to a file in the project.\"\"\"\n    # Resolves relative to OT_CWD (project directory)\n    path = get_project_path(output_file)\n    path.parent.mkdir(parents=True, exist_ok=True)\n    path.write_text(content)\n    return f\"Saved to {path}\"\n</code></pre> <p>Behaviour:</p> <ul> <li>Relative paths \u2192 resolved relative to <code>OT_CWD</code> (or <code>cwd</code> if not set)</li> <li>Absolute paths \u2192 used unchanged</li> <li><code>~</code> \u2192 expanded to home directory</li> </ul>"},{"location":"extending/creating-tools/#config-paths-loading-assets","title":"Config Paths (Loading Assets)","text":"<p>When loading configuration assets like templates, schemas, or reference files defined in config, resolve paths relative to the config directory:</p> <pre><code>from ot_sdk import get_config, get_config_path\n\ndef get_template(*, name: str) -&gt; str:\n    \"\"\"Load a template from config.\"\"\"\n    templates = get_config(\"tools.mytool.templates\") or {}\n    if name not in templates:\n        return f\"Template not found: {name}\"\n\n    # Resolves relative to config directory (.onetool/)\n    template_file = templates[name].get(\"file\", \"\")\n    path = get_config_path(template_file)\n\n    if path.exists():\n        return path.read_text()\n    return f\"Template file not found: {template_file}\"\n</code></pre> <p>Behaviour:</p> <ul> <li>Relative paths \u2192 resolved relative to config directory</li> <li>Absolute paths \u2192 used unchanged</li> <li><code>~</code> \u2192 expanded to home directory</li> </ul>"},{"location":"extending/creating-tools/#main-process-tools","title":"Main Process Tools","text":"<p>For tools running in the main process (not workers), use <code>onetool.paths</code>:</p> <pre><code>from onetool.paths import get_effective_cwd, expand_path\n\ndef list_files(*, directory: str = \".\") -&gt; str:\n    \"\"\"List files in a directory.\"\"\"\n    # get_effective_cwd() returns OT_CWD or Path.cwd()\n    base = get_effective_cwd()\n    target = base / directory\n    # ...\n</code></pre>"},{"location":"extending/creating-tools/#summary","title":"Summary","text":"Function Import From Resolves Relative To <code>get_project_path()</code> <code>ot_sdk</code> Project directory (<code>OT_CWD</code>) <code>get_config_path()</code> <code>ot_sdk</code> Config directory (<code>.onetool/</code>) <code>get_effective_cwd()</code> <code>onetool.paths</code> Returns project directory <code>expand_path()</code> <code>ot_sdk</code> Only expands <code>~</code>"},{"location":"extending/creating-tools/#attribution-licensing","title":"Attribution &amp; Licensing","text":"<p>When creating tools based on or inspired by external projects, follow this three-tier attribution model:</p> Level When to Use Source Header License File Tool Doc Based on Code derived or ported from upstream Required Required in <code>licenses/</code> Include \"Based on\" section Inspired by Similar functionality, independent code Required Not required Include \"Inspired by\" section Original Clean room implementation, API wrappers Optional <code>API docs:</code> Not required No attribution section"},{"location":"extending/creating-tools/#source-header-format","title":"Source Header Format","text":"<p>Add attribution to the module docstring:</p> <pre><code># Based on (code derived from upstream)\n\"\"\"Database operations via SQLAlchemy.\n\nBased on mcp-alchemy by Rui Machado (MPL-2.0).\nhttps://github.com/runekaagaard/mcp-alchemy\n\"\"\"\n\n# Inspired by (independent implementation)\n\"\"\"Secure file operations with configurable boundaries.\n\nInspired by fast-filesystem-mcp by efforthye (Apache 2.0).\nhttps://github.com/efforthye/fast-filesystem-mcp\n\"\"\"\n\n# Original (API wrapper or clean room)\n\"\"\"Web search via Brave Search API.\n\nAPI docs: https://api.search.brave.com/app/documentation\n\"\"\"\n</code></pre>"},{"location":"extending/creating-tools/#license-file-requirements","title":"License File Requirements","text":"<p>For \"Based on\" tools, include the upstream license:</p> <ol> <li>Copy the upstream LICENSE file to <code>licenses/{project-name}-LICENSE</code></li> <li>Use the exact project name from the source header</li> <li>Example: <code>licenses/mcp-alchemy-LICENSE</code> for database tool</li> </ol>"},{"location":"extending/creating-tools/#documentation-requirements","title":"Documentation Requirements","text":"Level Tool Doc Attribution Based on Add \"## Based on\" section at end with project link, author, license Inspired by Add \"## Inspired by\" section at end with project link, author, license Original No attribution section; include \"## Source\" linking to API docs"},{"location":"extending/creating-tools/#checklist","title":"Checklist","text":"<ul> <li> Module docstring with description</li> <li> <code>pack = \"...\"</code> before imports</li> <li> <code>__all__ = [...]</code> listing exports</li> <li> All functions use keyword-only arguments (<code>*,</code>)</li> <li> Complete docstrings with Args, Returns, Example</li> <li> LogSpan logging for all operations</li> <li> Error handling returning strings</li> <li> Secrets in <code>secrets.yaml</code></li> <li> Dependencies in <code>pyproject.toml</code> or PEP 723</li> <li> Attribution level determined (Based on / Inspired by / Original)</li> <li> Source header matches attribution level</li> <li> License file in <code>licenses/</code> (if \"Based on\")</li> <li> Tool doc attribution section matches source header</li> </ul>"},{"location":"extending/logging/","title":"Logging Guide","text":"<p>This guide covers OneTool's structured logging infrastructure built on Loguru.</p>"},{"location":"extending/logging/#quick-start","title":"Quick Start","text":"<pre><code>from ot.logging import configure_logging, LogSpan\n\n# Initialize logging for your CLI\nconfigure_logging(log_name=\"my-cli\")\n\n# Use LogSpan for structured operation logging\nwith LogSpan(span=\"operation.name\", key=\"value\") as s:\n    result = do_something()\n    s.add(\"resultCount\", len(result))\n# Logs automatically on exit with duration and status\n</code></pre>"},{"location":"extending/logging/#core-components","title":"Core Components","text":""},{"location":"extending/logging/#configure_logginglog_name","title":"configure_logging(log_name)","text":"<p>Initializes Loguru for file-only output with dev-friendly formatting.</p> <pre><code>from ot.logging import configure_logging\n\n# In your CLI entry point\nconfigure_logging(log_name=\"serve\")  # Creates logs/serve.log\n</code></pre> <p>Environment variables: - <code>OT_LOG_LEVEL</code>: Log level (default: INFO) - <code>OT_LOG_DIR</code>: Directory for log files (default: ../logs, relative to config dir) - <code>OT_LOG_VERBOSE</code>: Disable truncation, show full values (default: false)</p>"},{"location":"extending/logging/#logspan","title":"LogSpan","text":"<p>Context manager that wraps LogEntry and auto-logs on exit with duration and status.</p> <pre><code>from ot.logging import LogSpan\n\n# Sync usage\nwith LogSpan(span=\"tool.execute\", tool=\"search\") as s:\n    result = execute_tool()\n    s.add(\"resultCount\", len(result))\n# Logs at INFO level with status=SUCCESS and duration\n\n# With exception handling\nwith LogSpan(span=\"api.request\", url=url):\n    response = make_request()\n# On exception: logs at ERROR level with status=FAILED, errorType, errorMessage\n</code></pre> <p>Async usage with FastMCP Context:</p> <pre><code>async with LogSpan.async_span(ctx, span=\"tool.execute\", tool=\"search\") as s:\n    result = await execute_tool()\n    await s.log_info(\"Tool completed\", resultCount=len(result))\n</code></pre>"},{"location":"extending/logging/#logentry","title":"LogEntry","text":"<p>Low-level structured log entry with fluent API.</p> <pre><code>from ot.logging import LogEntry\n\nentry = LogEntry(span=\"operation\", key=\"value\")\nentry.add(\"extra\", data)\nentry.success()  # or entry.failure(error=exc)\nlogger.info(str(entry))\n</code></pre>"},{"location":"extending/logging/#span-naming-conventions","title":"Span Naming Conventions","text":"<p>Span names use dot-notation: <code>{component}.{operation}[.{detail}]</code></p>"},{"location":"extending/logging/#server-operations-serve-observability","title":"Server Operations (serve-observability)","text":"<ul> <li><code>mcp.server.start</code> - Server startup</li> <li><code>mcp.server.stop</code> - Server shutdown</li> <li><code>tool.lookup</code> - Tool resolution</li> </ul>"},{"location":"extending/logging/#cli-operations","title":"CLI Operations","text":"<ul> <li><code>browse.session.start</code> - Browser session start</li> <li><code>browse.navigate</code> - Navigation</li> <li><code>browse.screenshot</code> - Screenshot capture</li> </ul>"},{"location":"extending/logging/#tool-operations","title":"Tool Operations","text":"<p>See Creating Tools for tool span naming conventions.</p>"},{"location":"extending/logging/#examples","title":"Examples","text":""},{"location":"extending/logging/#cli-initialisation","title":"CLI Initialisation","text":"<pre><code># In src/ot_browse/app.py\nfrom ot.logging import configure_logging\n\ndef main() -&gt; None:\n    configure_logging(log_name=\"browse\")\n    # ... rest of CLI\n</code></pre>"},{"location":"extending/logging/#tool-functions","title":"Tool Functions","text":"<p>See Creating Tools for comprehensive tool logging examples.</p>"},{"location":"extending/logging/#async-mcp-tool","title":"Async MCP Tool","text":"<pre><code>from ot.logging import LogSpan\n\nasync def execute_tool(ctx, tool_name: str, args: dict) -&gt; str:\n    async with LogSpan.async_span(ctx, span=\"tool.execute\", tool=tool_name) as s:\n        tool = registry.get(tool_name)\n        if not tool:\n            s.add(\"error\", \"not_found\")\n            return f\"Tool {tool_name} not found\"\n\n        result = await tool.call(**args)\n        s.add(\"resultLen\", len(result))\n        return result\n</code></pre>"},{"location":"extending/logging/#nested-spans","title":"Nested Spans","text":"<pre><code>with LogSpan(span=\"browse.session\", source=source) as outer:\n    # Navigate\n    with LogSpan(span=\"browse.navigate\", url=url) as nav:\n        page = navigate_to(url)\n        nav.add(\"status\", page.status)\n\n    # Capture\n    with LogSpan(span=\"browse.capture\", page=page.url) as cap:\n        files = capture_page(page)\n        cap.add(\"fileCount\", len(files))\n\n    outer.add(\"success\", True)\n</code></pre>"},{"location":"extending/logging/#log-output","title":"Log Output","text":"<p>Logs are written in dev-friendly format to <code>logs/{log_name}.log</code> (relative to config directory):</p> <pre><code>12:34:56.789 | INFO   | server:54  | mcp.server.start | status=SUCCESS | duration=0.042\n12:34:57.123 | INFO   | brave:78   | brave.search.web | query=test | resultCount=10 | duration=1.234\n12:34:58.456 | ERROR  | web:92     | web.fetch | url=http://... | status=FAILED | errorType=HTTPError\n</code></pre>"},{"location":"extending/logging/#configuration","title":"Configuration","text":""},{"location":"extending/logging/#log-levels","title":"Log Levels","text":"<p>Set via <code>log_level</code> in <code>ot-serve.yaml</code> or <code>OT_LOG_LEVEL</code> environment variable:</p> Level Use Case <code>DEBUG</code> Verbose debugging (development only) <code>INFO</code> Normal operation (default) <code>WARNING</code> Potential issues <code>ERROR</code> Failures requiring attention"},{"location":"extending/logging/#log-directory","title":"Log Directory","text":"<p>Set via <code>log_dir</code> in <code>ot-serve.yaml</code> or <code>OT_LOG_DIR</code> environment variable:</p> <ul> <li>Default: <code>../logs</code> (relative to config directory)</li> <li>Automatically created if it doesn't exist</li> <li>Supports <code>~</code> expansion for home directory</li> </ul>"},{"location":"extending/logging/#file-rotation","title":"File Rotation","text":"<p>Production logs use automatic rotation:</p> <pre><code>rotation=\"10 MB\"      # Rotate when file reaches 10 MB\nretention=\"5 days\"    # Keep logs for 5 days\n</code></pre>"},{"location":"extending/logging/#test-logging","title":"Test Logging","text":"<p>For tests, use <code>configure_test_logging()</code> instead:</p> <pre><code>from ot.logging import configure_test_logging\n\n# In conftest.py or test setup\nconfigure_test_logging(\n    module_name=\"test_tools\",\n    dev_output=True,   # Dev-friendly format to stderr\n    dev_file=False,    # No separate dev log file\n)\n</code></pre> <p>This creates: - <code>logs/{module_name}.log</code> - JSON structured logs - Optional <code>logs/{module_name}.dev.log</code> - Dev-friendly format (if <code>dev_file=True</code>)</p>"},{"location":"extending/logging/#logger-interception","title":"Logger Interception","text":"<p>The logging system intercepts standard Python logging and redirects to Loguru:</p> <p>Intercepted loggers (redirected to Loguru): - <code>fastmcp</code>, <code>mcp</code>, <code>uvicorn</code></p> <p>Silenced loggers (set to WARNING level): - <code>httpcore</code>, <code>httpx</code>, <code>hpack</code> - HTTP transport noise - <code>openai</code>, <code>openai._base_client</code> - API client noise - <code>anyio</code>, <code>mcp</code> - Async framework noise</p>"},{"location":"extending/logging/#output-formatting","title":"Output Formatting","text":"<p>Log output is automatically formatted with truncation and credential sanitization at output time. Full values are preserved in <code>LogEntry</code> for programmatic access.</p>"},{"location":"extending/logging/#truncation-limits","title":"Truncation Limits","text":"<p>Field-based truncation limits (applied unless <code>OT_LOG_VERBOSE=true</code>):</p> Field Pattern Limit path, filepath, source, dest, directory 200 url 120 query, topic, pattern 100 error 300 default 120"},{"location":"extending/logging/#credential-sanitization","title":"Credential Sanitization","text":"<p>URLs with embedded credentials are automatically masked:</p> <pre><code>postgres://user:password@host/db \u2192 postgres://***:***@host/db\n</code></pre> <p>Applied to: - Fields containing \"url\" in the name - String values starting with <code>http://</code> or <code>https://</code></p>"},{"location":"extending/logging/#verbose-mode","title":"Verbose Mode","text":"<p>Disable truncation with <code>OT_LOG_VERBOSE=true</code> or <code>log_verbose: true</code> in config:</p> <pre><code>OT_LOG_VERBOSE=true ot-serve\n</code></pre> <p>Credentials are always sanitized, even in verbose mode.</p>"},{"location":"extending/logging/#formatting-functions","title":"Formatting Functions","text":"<pre><code>from ot.logging import format_log_entry, sanitize_url, format_value\n\n# Format entire log entry\nformatted = format_log_entry(entry.to_dict(), verbose=False)\n\n# Sanitize a single URL\nsafe_url = sanitize_url(\"postgres://user:pass@host/db\")\n\n# Truncate a value with field-based limit\ntruncated = format_value(long_string, field_name=\"query\")\n</code></pre>"},{"location":"extending/plugins/","title":"Creating Plugins","text":"<p>Build tools in your own repository. No onetool source required.</p> <p>Plugins let you develop OneTool tools in separate repositories while using local configuration for development and testing.</p>"},{"location":"extending/plugins/#minimal-structure","title":"Minimal Structure","text":"<p>A plugin needs just one file:</p> <pre><code>ot-mytool/\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 mytool.py    # One file. That's it.\n</code></pre>"},{"location":"extending/plugins/#the-tool-file","title":"The tool file","text":"<pre><code># src/mytool.py\npack = \"mytool\"\n__all__ = [\"search\"]\n\ndef search(*, query: str) -&gt; str:\n    \"\"\"Search for items.\n\n    Args:\n        query: The search query\n\n    Returns:\n        Search results\n    \"\"\"\n    return f\"Found: {query}\"\n</code></pre> <p>That's the minimum. One file with a <code>pack</code> declaration and exported functions.</p>"},{"location":"extending/plugins/#local-development-setup","title":"Local Development Setup","text":"<p>For development, create a <code>.onetool/</code> directory in your plugin repository:</p> <pre><code>ot-mytool/\n\u251c\u2500\u2500 .onetool/\n\u2502   \u251c\u2500\u2500 ot-serve.yaml     # Server config (tools_dir, etc.)\n\u2502   \u251c\u2500\u2500 secrets.yaml      # API keys for testing\n\u2502   \u2514\u2500\u2500 ot-bench.yaml     # Benchmark harness config (optional)\n\u251c\u2500\u2500 demo.yaml             # Test scenarios (ot-bench run demo.yaml)\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 mytool.py\n</code></pre>"},{"location":"extending/plugins/#onetoolot-serveyaml","title":"<code>.onetool/ot-serve.yaml</code>","text":"<p>Point <code>tools_dir</code> at your plugin source:</p> <pre><code># .onetool/ot-serve.yaml\ntools_dir:\n  - ./src/*.py\n</code></pre> <p>Run <code>ot-serve</code> from your plugin directory. It finds <code>.onetool/ot-serve.yaml</code> automatically.</p>"},{"location":"extending/plugins/#onetoolsecretsyaml","title":"<code>.onetool/secrets.yaml</code>","text":"<p>Add API keys your tool needs during development:</p> <pre><code># .onetool/secrets.yaml\nMY_API_KEY: \"dev-key-for-testing\"\n</code></pre>"},{"location":"extending/plugins/#onetoolot-benchyaml","title":"<code>.onetool/ot-bench.yaml</code>","text":"<p>Configure the benchmark harness (model, evaluators, server definitions):</p> <pre><code># .onetool/ot-bench.yaml\ndefaults:\n  timeout: 60\n  model: anthropic/claude-sonnet-4\n\nservers:\n  mytool:\n    type: stdio\n    command: ot-serve\n</code></pre>"},{"location":"extending/plugins/#test-scenario-files","title":"Test Scenario Files","text":"<p>Define test scenarios in a separate YAML file:</p> <pre><code># demo.yaml\nscenarios:\n  - name: \"Basic search test\"\n    tasks:\n      - name: \"search:basic\"\n        server: mytool\n        prompt: \"Search for python tutorials using mytool.search\"\n</code></pre> <p>Run tests with: <code>ot-bench run demo.yaml</code></p>"},{"location":"extending/plugins/#running-locally","title":"Running Locally","text":"<p>From your plugin directory:</p> <pre><code># Start the server with your local config\not-serve\n\n# In another terminal, run benchmarks\not-bench\n</code></pre> <p>The server discovers your tool from the local <code>tools_dir</code> configuration.</p>"},{"location":"extending/plugins/#worker-tools-with-dependencies","title":"Worker Tools (with dependencies)","text":"<p>If your tool needs external packages, use PEP 723 headers and run as an isolated subprocess:</p> <pre><code># /// script\n# requires-python = \"&gt;=3.11\"\n# dependencies = [\"ot-sdk&gt;=0.1.0\", \"httpx&gt;=0.28.0\", \"pyyaml&gt;=6.0.0\"]\n# ///\n\"\"\"Tool with external dependencies.\"\"\"\n\nfrom __future__ import annotations\n\npack = \"mytool\"\n__all__ = [\"fetch\"]\n\nfrom ot_sdk import http, log, worker_main\n\ndef fetch(*, url: str) -&gt; str:\n    \"\"\"Fetch a URL.\n\n    Args:\n        url: URL to fetch\n\n    Returns:\n        Page content\n    \"\"\"\n    with log(\"mytool.fetch\", url=url) as s:\n        response = http.get(url)\n        s.add(status=response.status_code)\n        return response.text\n\nif __name__ == \"__main__\":\n    worker_main()\n</code></pre> <p>Critical: The <code>if __name__ == \"__main__\": worker_main()</code> block is required for any file with a PEP 723 header. Without it, the tool fails with \"Worker closed unexpectedly\".</p>"},{"location":"extending/plugins/#sdk-exports","title":"SDK Exports","text":"<p>The <code>ot_sdk</code> package provides utilities for worker tools:</p> Export Purpose <code>worker_main</code> Main loop - handles JSON-RPC requests <code>get_config(key)</code> Access configuration from <code>ot-serve.yaml</code> <code>get_secret(key)</code> Access secrets from <code>secrets.yaml</code> <code>http</code> Pre-configured httpx client <code>log(span, **kwargs)</code> Structured logging context manager <code>cache(ttl=seconds)</code> In-memory caching decorator <code>get_project_path(path)</code> Resolve paths relative to project directory <code>get_config_path(path)</code> Resolve paths relative to config directory"},{"location":"extending/plugins/#consumer-installation","title":"Consumer Installation","text":"<p>When users want to use your plugin, they add it to their <code>tools_dir</code>:</p>"},{"location":"extending/plugins/#global-installation","title":"Global installation","text":"<pre><code># ~/.onetool/ot-serve.yaml\ntools_dir:\n  - ~/plugins/ot-mytool/src/*.py\n</code></pre>"},{"location":"extending/plugins/#project-specific","title":"Project-specific","text":"<pre><code># project/.onetool/ot-serve.yaml\ntools_dir:\n  - ~/plugins/ot-mytool/src/*.py\n  - ./local-tools/*.py\n</code></pre> <p>Glob patterns work for selecting tool files.</p>"},{"location":"extending/plugins/#testing-without-full-installation","title":"Testing Without Full Installation","text":"<p>Test your plugin functions directly without running <code>ot-serve</code>:</p> <pre><code># test_mytool.py\nfrom mytool import search\n\ndef test_search():\n    result = search(query=\"python\")\n    assert \"python\" in result.lower()\n</code></pre> <p>Run with pytest:</p> <pre><code>cd src\npython -m pytest ../test_mytool.py\n</code></pre> <p>For worker tools, test the functions before adding <code>worker_main()</code>:</p> <pre><code># Test individual functions\nfrom mytool import fetch\n\ndef test_fetch():\n    # Mock http if needed\n    result = fetch(url=\"https://example.com\")\n    assert result\n</code></pre>"},{"location":"extending/plugins/#example-plugin-with-implementation-modules","title":"Example: Plugin with Implementation Modules","text":"<p>For larger plugins, organize implementation in a subpackage:</p> <pre><code>ot-convert/\n\u251c\u2500\u2500 .onetool/\n\u2502   \u251c\u2500\u2500 ot-serve.yaml\n\u2502   \u2514\u2500\u2500 secrets.yaml\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 convert.py           # Main tool file (worker)\n\u2502   \u2514\u2500\u2500 _convert/            # Implementation modules\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 pdf.py\n\u2502       \u2514\u2500\u2500 word.py\n\u2514\u2500\u2500 README.md\n</code></pre> <p>The main tool file imports from the implementation package:</p> <pre><code># /// script\n# requires-python = \"&gt;=3.11\"\n# dependencies = [\"ot-sdk&gt;=0.1.0\", \"pymupdf&gt;=1.24.0\", \"python-docx&gt;=1.1.0\"]\n# ///\n\"\"\"Document conversion tools.\"\"\"\n\nfrom __future__ import annotations\n\npack = \"convert\"\n__all__ = [\"pdf\", \"word\"]\n\nfrom ot_sdk import get_project_path, log, worker_main\n\nfrom _convert import convert_pdf, convert_word\n\ndef pdf(*, pattern: str, output_dir: str = \"output\") -&gt; str:\n    \"\"\"Convert PDF files to markdown.\"\"\"\n    with log(\"convert.pdf\", pattern=pattern) as s:\n        return convert_pdf(pattern, output_dir)\n\ndef word(*, pattern: str, output_dir: str = \"output\") -&gt; str:\n    \"\"\"Convert Word documents to markdown.\"\"\"\n    with log(\"convert.word\", pattern=pattern) as s:\n        return convert_word(pattern, output_dir)\n\nif __name__ == \"__main__\":\n    worker_main()\n</code></pre>"},{"location":"extending/testing/","title":"Testing Strategy","text":"<p>Fast feedback. Lean tests. Two markers per test.</p> <p>Every test gets a speed tier and a component tag. CI runs smoke tests in 30 seconds.</p>"},{"location":"extending/testing/#principles","title":"Principles","text":"<ol> <li>Lean tests - Write the minimum tests to verify behaviour works. Don't test implementation details.</li> <li>DRY fixtures - Share setup code via <code>conftest.py</code>. Don't duplicate.</li> <li>Test behaviour - Focus on inputs/outputs, not internal code paths.</li> <li>Fast feedback - Smoke tests run in CI on every push. Slow tests run on merge.</li> <li>Isolation - Mock HTTP/subprocess calls to avoid network I/O in unit tests.</li> </ol>"},{"location":"extending/testing/#test-markers","title":"Test Markers","text":"<p>Every test requires two markers: a speed tier and a component tag.</p>"},{"location":"extending/testing/#speed-tiers-pick-one","title":"Speed Tiers (pick one)","text":"Marker Criteria When to use <code>smoke</code> &lt;1s, no I/O Quick sanity checks that verify basic functionality <code>unit</code> &lt;1s, no I/O Fast isolated tests for pure logic <code>integration</code> May be slow End-to-end tests with real dependencies <code>slow</code> &gt;10s Long-running tests (benchmarks, large data)"},{"location":"extending/testing/#component-tags-pick-one","title":"Component Tags (pick one)","text":"Marker Component <code>tools</code> Tool implementations (<code>ot_tools</code>) <code>core</code> Core library (<code>ot</code>) <code>serve</code> MCP server (<code>ot_serve</code>) <code>bench</code> Benchmark harness (<code>ot_bench</code>) <code>browse</code> Browser inspector (<code>ot_browse</code>) <code>pkg</code> Package management <code>spec</code> OpenSpec tooling"},{"location":"extending/testing/#dependency-tags-add-as-needed","title":"Dependency Tags (add as needed)","text":"Marker Requires <code>network</code> Network access <code>api</code> API keys (OT_BRAVE_API_KEY, etc.) <code>playwright</code> Playwright browsers installed <code>docker</code> Docker daemon running"},{"location":"extending/testing/#example-test","title":"Example Test","text":"<pre><code>import pytest\n\n@pytest.mark.smoke\n@pytest.mark.serve\ndef test_server_starts():\n    \"\"\"Verify server can start without errors.\"\"\"\n    from ot_serve.server import create_server\n    server = create_server()\n    assert server is not None\n</code></pre>"},{"location":"extending/testing/#running-tests","title":"Running Tests","text":"<pre><code># All tests\nuv run pytest\n\n# Smoke tests only (fast CI)\nuv run pytest -m smoke\n\n# Specific component\nuv run pytest -m serve\n\n# Combine markers\nuv run pytest -m \"smoke and serve\"\n\n# Skip slow tests\nuv run pytest -m \"not slow\"\n\n# Skip tests requiring network\nuv run pytest -m \"not network\"\n</code></pre>"},{"location":"extending/testing/#test-organization","title":"Test Organization","text":"<pre><code>tests/\n\u251c\u2500\u2500 conftest.py              # Shared fixtures (mock_http_get, mock_secrets, etc.)\n\u251c\u2500\u2500 smoke/                   # Quick sanity checks\n\u251c\u2500\u2500 unit/                    # Fast isolated tests (mocked dependencies)\n\u2502   \u251c\u2500\u2500 core/                # Core library tests\n\u2502   \u251c\u2500\u2500 bench/               # Benchmark harness tests\n\u2502   \u251c\u2500\u2500 serve/               # MCP server tests\n\u2502   \u251c\u2500\u2500 sdk/                 # SDK tests\n\u2502   \u2514\u2500\u2500 tools/               # Tool unit tests\n\u2502       \u251c\u2500\u2500 test_brave_search.py\n\u2502       \u251c\u2500\u2500 test_package.py\n\u2502       \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 integration/             # End-to-end tests (real dependencies)\n    \u2514\u2500\u2500 tools/               # Tool integration tests\n        \u251c\u2500\u2500 conftest.py      # Secrets loading for API tests\n        \u251c\u2500\u2500 test_brave_search.py\n        \u2514\u2500\u2500 ...\n</code></pre> <p>Unit and integration tests mirror each other - same filenames, different directories. This requires <code>__init__.py</code> files in test directories to avoid module name collisions.</p>"},{"location":"extending/testing/#fixture-guidelines","title":"Fixture Guidelines","text":""},{"location":"extending/testing/#good-shared-fixture-in-conftestpy","title":"Good: Shared fixture in conftest.py","text":"<pre><code># tests/conftest.py\n@pytest.fixture\ndef temp_config(tmp_path):\n    config_file = tmp_path / \"config.yaml\"\n    config_file.write_text(\"tools: [demo]\")\n    return config_file\n</code></pre>"},{"location":"extending/testing/#bad-duplicated-setup-in-each-test","title":"Bad: Duplicated setup in each test","text":"<pre><code># Don't do this\ndef test_one():\n    config_file = Path(\"/tmp/config.yaml\")\n    config_file.write_text(\"tools: [demo]\")\n    ...\n\ndef test_two():\n    config_file = Path(\"/tmp/config.yaml\")  # Duplicated!\n    config_file.write_text(\"tools: [demo]\")\n    ...\n</code></pre>"},{"location":"extending/testing/#global-fixtures","title":"Global Fixtures","text":"<p>These fixtures are defined in <code>tests/conftest.py</code> and available to all tests:</p> Fixture Purpose Example Usage <code>executor</code> Direct Python code execution <code>executor(\"1 + 1\")</code> returns <code>\"2\"</code> <code>mock_http_get</code> Mock <code>ot.http_client.http_get</code> <code>mock_http_get.return_value = (True, {...})</code> <code>mock_secrets</code> Mock <code>ot_sdk.get_secret</code> <code>mock_secrets.return_value = \"test-key\"</code> <code>mock_subprocess</code> Mock <code>subprocess.run</code> <code>mock_subprocess.return_value = MagicMock(returncode=0)</code> <code>mock_config</code> Mock <code>ot.config.get_config</code> <code>mock_config.return_value.tools.ripgrep.timeout = 30</code> <code>mock_ot_sdk_config</code> Mock <code>ot_sdk.get_config</code> <code>mock_ot_sdk_config.return_value = \"value\"</code>"},{"location":"extending/testing/#integration-fixtures","title":"Integration Fixtures","text":"<p>The <code>tests/integration/tools/conftest.py</code> provides fixtures for live API tests:</p> <ul> <li>Forces reload of secrets from <code>secrets.yaml</code> for API key access</li> <li>Sets <code>OT_SECRETS_FILE</code> environment variable</li> <li>Loads secrets into <code>ot_sdk.config._current_secrets</code></li> </ul>"},{"location":"extending/testing/#testing-patterns","title":"Testing Patterns","text":""},{"location":"extending/testing/#pattern-1-pure-function-tests-no-mocking","title":"Pattern 1: Pure Function Tests (No Mocking)","text":"<pre><code>@pytest.mark.unit\n@pytest.mark.tools\nclass TestCleanVersion:\n    \"\"\"Test _clean_version semver prefix stripping.\"\"\"\n\n    def test_strips_caret(self):\n        assert _clean_version(\"^1.0.0\") == \"1.0.0\"\n\n    def test_strips_tilde(self):\n        assert _clean_version(\"~1.0.0\") == \"1.0.0\"\n</code></pre>"},{"location":"extending/testing/#pattern-2-http-tests-with-mocking","title":"Pattern 2: HTTP Tests with Mocking","text":"<pre><code>@pytest.mark.unit\n@pytest.mark.tools\nclass TestNpm:\n    \"\"\"Test npm function with mocked HTTP.\"\"\"\n\n    @patch(\"ot_tools.package._fetch\")\n    def test_fetches_single_package(self, mock_fetch):\n        mock_fetch.return_value = (True, {\"dist-tags\": {\"latest\": \"18.2.0\"}})\n        result = npm(packages=[\"react\"])\n        assert \"18.2.0\" in result\n\n    @patch(\"ot_tools.package._fetch\")\n    def test_handles_unknown_package(self, mock_fetch):\n        mock_fetch.return_value = (False, \"Not found\")\n        result = npm(packages=[\"nonexistent-package-xyz\"])\n        assert \"unknown\" in result\n</code></pre>"},{"location":"extending/testing/#pattern-3-smoke-tests-import-verification","title":"Pattern 3: Smoke Tests (Import Verification)","text":"<pre><code>@pytest.mark.smoke\n@pytest.mark.core\ndef test_config_imports() -&gt; None:\n    \"\"\"Verify config module imports successfully.\"\"\"\n    from ot.config import OneToolConfig, get_config\n    assert OneToolConfig is not None\n    assert get_config is not None\n</code></pre>"},{"location":"extending/testing/#pattern-4-integration-tests-with-live-apis","title":"Pattern 4: Integration Tests with Live APIs","text":"<pre><code>@pytest.mark.integration\n@pytest.mark.network\n@pytest.mark.tools\nclass TestPackageLive:\n    \"\"\"Live integration tests for package version tool.\"\"\"\n\n    def test_npm_live(self):\n        from ot_tools.package import npm\n        result = npm(packages=[\"lodash\"])\n        assert \"lodash\" in result\n        assert \"unknown\" not in result.lower()\n</code></pre>"},{"location":"extending/testing/#writing-new-tests","title":"Writing New Tests","text":""},{"location":"extending/testing/#checklist","title":"Checklist","text":"<ul> <li> Add speed marker (<code>smoke</code>, <code>unit</code>, <code>integration</code>, or <code>slow</code>)</li> <li> Add component marker (<code>tools</code>, <code>core</code>, <code>serve</code>, <code>bench</code>, <code>browse</code>, <code>pkg</code>, <code>spec</code>)</li> <li> Add dependency markers if needed (<code>network</code>, <code>api</code>, <code>playwright</code>, <code>docker</code>)</li> <li> Write descriptive docstring explaining what is tested</li> <li> Use class grouping for related tests</li> <li> Mock external dependencies in unit tests</li> <li> Use clear assertions with descriptive messages</li> </ul>"},{"location":"extending/testing/#test-file-location","title":"Test File Location","text":"Test Type Directory Example Smoke tests <code>tests/smoke/</code> <code>test_imports.py</code> Unit tests <code>tests/unit/{component}/</code> <code>tests/unit/tools/test_package.py</code> Integration tests <code>tests/integration/{component}/</code> <code>tests/integration/tools/test_package.py</code> <p>Unit and integration tests mirror each other - same filenames, different directories.</p>"},{"location":"extending/testing/#ci-integration","title":"CI Integration","text":"<ul> <li>On push: Run <code>pytest -m smoke</code> (~30s)</li> <li>On PR: Run <code>pytest -m \"not slow\"</code> (~2min)</li> <li>Nightly: Run full suite including slow tests</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration Reference","text":"<p>Complete reference for OneTool configuration.</p>"},{"location":"getting-started/configuration/#configuration-files","title":"Configuration Files","text":"<p>OneTool uses a three-tier configuration system:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Bundled       \u2502 --&gt; \u2502     Global       \u2502 --&gt; \u2502    Project       \u2502\n\u2502 (package data)   \u2502     \u2502  (~/.onetool/)   \u2502     \u2502 (cwd/.onetool/)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n   Read-only              User preferences        Project overrides\n   Ships with pkg         API keys, prefs         tools_dir, etc.\n</code></pre> Location Purpose Scope Bundled defaults Read-only package defaults All installs <code>~/.onetool/ot-serve.yaml</code> Global config User <code>.onetool/ot-serve.yaml</code> Project config Project <p>Windows paths: Replace <code>~/.onetool/</code> with <code>%USERPROFILE%\\.onetool\\</code></p>"},{"location":"getting-started/configuration/#first-run-bootstrap","title":"First Run Bootstrap","text":"<p>On first <code>ot-serve</code> invocation, OneTool creates <code>~/.onetool/</code> with bundled default configs:</p> <pre><code>$ ot-serve --help\nCreating ~/.onetool/\n  \u2713 ot-serve.yaml\n  \u2713 prompts.yaml\n  \u2713 snippets.yaml\n  \u2713 servers.yaml\n  \u2713 diagram.yaml\n  \u2713 secrets.yaml\n</code></pre> <p>You can also manage the global config directory manually:</p> <pre><code>ot-serve init           # Create ~/.onetool/ (if missing)\not-serve init reset     # Reset to defaults (overwrites existing)\not-serve init validate  # Check for errors\n</code></pre> <p>Note: Only <code>ot-serve</code> bootstraps the global config directory. Other tools (<code>ot-bench</code>, <code>ot-browse</code>) require <code>~/.onetool/</code> to exist and will prompt you to run <code>ot-serve init</code> first if it's missing.</p>"},{"location":"getting-started/configuration/#configuration-inheritance","title":"Configuration Inheritance","text":"<p>Project configs can inherit from global or bundled defaults using the <code>inherit</code> directive:</p> <pre><code>version: 1\ninherit: global  # global (default), bundled, or none\n\ntools_dir:\n  - ./tools/*.py\n</code></pre> Value Behaviour <code>global</code> (default) Merge global config first, project overrides <code>bundled</code> Merge bundled defaults only (skip global) <code>none</code> No inheritance, use project config as-is"},{"location":"getting-started/configuration/#merge-semantics","title":"Merge Semantics","text":"<ul> <li>Nested dicts are deep-merged (partial overrides work)</li> <li>Lists and scalars are replaced entirely</li> </ul>"},{"location":"getting-started/configuration/#minimal-project-config-with-global-inheritance","title":"Minimal Project Config with Global Inheritance","text":"<pre><code># my-project/.onetool/ot-serve.yaml\nversion: 1\n# inherit: global  (implicit default)\n\ntools_dir:\n  - ./tools/*.py\n</code></pre> <p>This loads project <code>tools_dir</code> while inheriting prompts, snippets, and servers from global.</p>"},{"location":"getting-started/configuration/#standalone-config-no-inheritance","title":"Standalone Config (No Inheritance)","text":"<pre><code># isolated/.onetool/ot-serve.yaml\nversion: 1\ninherit: none  # Explicit: don't merge anything\n\ntransform:\n  model: local/llama3\n\nprompts:\n  instructions: |\n    Custom standalone instructions.\n\ntools_dir:\n  - ./tools/*.py\n</code></pre>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>OneTool uses environment variables for runtime settings (with <code>OT_</code> prefix):</p> Variable Description Required <code>OT_LOG_LEVEL</code> Log level (DEBUG/INFO/WARNING/ERROR) No <code>OT_LOG_DIR</code> Log directory path No <code>OT_COMPACT_MAX_LENGTH</code> Max value length in compact output No <code>OT_SERVE_CONFIG</code> Config file path override No <code>OT_SECRETS_FILE</code> Secrets file path override No <p>Note: API keys are no longer set via environment variables. They are loaded from YAML files: - Tool API keys (<code>BRAVE_API_KEY</code>, <code>GEMINI_API_KEY</code>, etc.) \u2192 <code>secrets.yaml</code> - Benchmark API keys (<code>OPENAI_API_KEY</code>, etc.) \u2192 <code>bench-secrets.yaml</code></p>"},{"location":"getting-started/configuration/#secrets-configuration","title":"Secrets Configuration","text":"<p>API keys and sensitive credentials are stored separately in <code>secrets.yaml</code> (gitignored):</p> Location Purpose Scope <code>.onetool/secrets.yaml</code> Project secrets Project <code>~/.onetool/secrets.yaml</code> Global secrets User <p>Resolution order: <code>OT_SECRETS_FILE</code> env var \u2192 project secrets \u2192 global secrets</p>"},{"location":"getting-started/configuration/#secrets-file-format","title":"Secrets File Format","text":"<pre><code># API keys for tools\nBRAVE_API_KEY: \"your-brave-api-key\"\nOPENAI_API_KEY: \"sk-...\"\nCONTEXT7_API_KEY: \"your-context7-key\"\nGEMINI_API_KEY: \"your-gemini-key\"\n\n# Environment variable references\nDATABASE_URL: \"${PROD_DATABASE_URL}\"\n</code></pre>"},{"location":"getting-started/configuration/#environment-variable-references","title":"Environment Variable References","text":"<p>Secrets can reference environment variables with <code>${VAR_NAME}</code> syntax:</p> <pre><code># Reference an environment variable\nAPI_KEY: \"${MY_ENV_VAR}\"\n</code></pre>"},{"location":"getting-started/configuration/#accessing-secrets-in-tools","title":"Accessing Secrets in Tools","text":"<p>Worker tools access secrets via the SDK:</p> <pre><code>from ot_sdk import get_secret\n\napi_key = get_secret(\"BRAVE_API_KEY\")\nif not api_key:\n    return \"Error: BRAVE_API_KEY not configured in secrets.yaml\"\n</code></pre> <p>In-process tools can also use <code>get_secret</code>:</p> <pre><code>from ot.config.secrets import get_secret\n\napi_key = get_secret(\"BRAVE_API_KEY\")\n</code></pre>"},{"location":"getting-started/configuration/#yaml-configuration-schema","title":"YAML Configuration Schema","text":""},{"location":"getting-started/configuration/#basic-structure","title":"Basic Structure","text":"<pre><code>version: 1                    # Config schema version (required)\n\ninclude:                      # External config files to merge\n  - prompts.yaml              # prompts: section\n  - snippets.yaml             # snippets: section\n  - servers.yaml              # servers: section\n\ntools_dir:                    # Tool discovery patterns\n  - src/ot_tools/*.py\n\nlog_level: INFO               # DEBUG, INFO, WARNING, ERROR\n\nsecurity:                     # Code validation settings\n  validate_code: true         # Validate generated code before execution\n  enabled: true               # Enable security pattern checks\n\nprojects: {}                  # Named project paths\nservers: {}                   # External MCP servers\ntools: {}                     # Tool-specific configuration\nalias: {}                     # Function aliases\nsnippets: {}                  # Reusable code templates\nprompts: {}                   # Inline prompts (overrides included)\n</code></pre>"},{"location":"getting-started/configuration/#config-includes","title":"Config Includes","text":"<p>The <code>include:</code> key allows composing configuration from multiple files:</p> <pre><code>version: 1\n\ninclude:\n  - prompts.yaml       # Falls back to global or bundled if not in project\n  - snippets.yaml      # Same three-tier resolution\n  - local-snippets.yaml  # Project-only additions\n\n# Inline content overrides included content\nservers:\n  local_dev:\n    type: stdio\n    command: python\n</code></pre> <p>Include resolution (three-tier fallback):</p> <ol> <li>Project config directory (where the including file is)</li> <li>Global (<code>~/.onetool/</code>)</li> <li>Bundled (package defaults)</li> </ol> <p>This allows minimal project configs that reference shared files without specifying paths.</p> <p>Merge behaviour:</p> <ul> <li>Files are merged left-to-right (later files override earlier)</li> <li>Inline content in the main file overrides everything</li> <li>Nested dicts are deep-merged</li> <li>Non-dict values (lists, scalars) are replaced entirely</li> </ul> <p>Included file format:</p> <p>Each included file contains complete config sections with their own keys:</p> <pre><code># prompts.yaml\nprompts:\n  instructions: |\n    OneTool executes Python code...\n\n# snippets.yaml\nsnippets:\n  brv_research:\n    body: brave.search(query=\"{{ topic }}\")\n\n# servers.yaml\nservers:\n  github:\n    type: http\n    url: https://api.githubcopilot.com/mcp/\n</code></pre>"},{"location":"getting-started/configuration/#projects-configuration","title":"Projects Configuration","text":"<p>Named projects for path resolution:</p> <pre><code>projects:\n  myapp:\n    path: /path/to/myapp\n    attrs:\n      db_url: postgresql://localhost/myapp\n      api_key: ${MY_API_KEY}\n\n  onetool:\n    path: .\n    attrs:\n      db_url: sqlite:///demo/db/northwind.db\n</code></pre>"},{"location":"getting-started/configuration/#tools-configuration","title":"Tools Configuration","text":"<p>Customise tool behaviour with the <code>tools:</code> section:</p> <pre><code>tools:\n  brave:\n    timeout: 60.0              # 1.0 - 300.0 seconds\n\n  ground:\n    model: gemini-2.5-flash    # Gemini model name\n\n  context7:\n    timeout: 30.0              # 1.0 - 120.0 seconds\n    docs_limit: 10             # 1 - 20 results\n\n  web_fetch:\n    timeout: 30.0              # 1.0 - 120.0 seconds\n    max_length: 50000          # 1000 - 500000 characters\n\n  ripgrep:\n    timeout: 60.0              # 1.0 - 300.0 seconds\n\n  code_search:\n    limit: 10                  # 1 - 100 results\n\n  db:\n    max_chars: 4000            # 100 - 100000 characters\n\n  # page_view: (beta - see docs/beta/)\n\n  package:\n    timeout: 30.0              # 1.0 - 120.0 seconds\n</code></pre> <p>All tools section fields are optional. Omitted fields use defaults shown above.</p>"},{"location":"getting-started/configuration/#tools-configuration-reference","title":"Tools Configuration Reference","text":"Tool Field Type Default Range Description brave timeout float 60.0 1-300 API request timeout (seconds) ground model string gemini-2.5-flash - Gemini model for grounding context7 timeout float 30.0 1-120 API request timeout (seconds) context7 docs_limit int 10 1-20 Max documentation results web_fetch timeout float 30.0 1-120 Page fetch timeout (seconds) web_fetch max_length int 50000 1K-500K Max content characters ripgrep timeout float 60.0 1-300 Search timeout (seconds) code_search limit int 10 1-100 Max search results db max_chars int 4000 100-100K Query output truncation package timeout float 30.0 1-120 Registry request timeout stats enabled bool true - Enable statistics collection stats persist_path string stats.jsonl - JSONL file for stats (relative to config) stats flush_interval_seconds int 30 1-300 Interval between disk flushes stats context_per_call int 30000 \u22650 Context tokens saved per call estimate stats time_overhead_per_call_ms int 4000 \u22650 Time overhead saved per call (ms) stats model string anthropic/claude-opus-4.5 - Model name for cost estimation stats cost_per_million_input_tokens float 15.0 \u22650 Input token cost (USD per million) stats cost_per_million_output_tokens float 75.0 \u22650 Output token cost (USD per million) stats chars_per_token float 4.0 \u22651.0 Characters per token estimate"},{"location":"getting-started/configuration/#statistics-configuration","title":"Statistics Configuration","text":"<p>Track runtime statistics to measure OneTool's efficiency:</p> <pre><code>tools:\n  stats:\n    enabled: true                    # Enable/disable statistics collection\n    persist_path: stats.jsonl        # JSONL file path (relative to config dir)\n    flush_interval_seconds: 30       # How often to write to disk\n    context_per_call: 30000          # Estimated context tokens saved per call\n    time_overhead_per_call_ms: 4000  # Estimated time overhead saved per call\n    model: anthropic/claude-opus-4.5 # Model name for cost display\n    cost_per_million_input_tokens: 15.0   # Input cost (USD)\n    cost_per_million_output_tokens: 75.0  # Output cost (USD)\n    chars_per_token: 4.0             # Characters per token estimate\n</code></pre> <p>What's tracked: - Tool name, characters in/out, duration - Success/error status with error type - Timestamp for period filtering</p> <p>Viewing statistics:</p> <p>Use <code>ot.stats()</code> to view aggregated statistics:</p> <pre><code># View all-time statistics\not.stats()\n\n# View last 24 hours\not.stats(period=\"day\")\n\n# Filter by tool\not.stats(period=\"week\", tool=\"brave.search\")\n\n# Generate HTML report\not.stats(output=\"stats_report.html\")\n</code></pre> <p>Savings estimates:</p> <p>The <code>context_per_call</code> and <code>time_overhead_per_call_ms</code> settings control how savings are calculated. These represent the overhead that would be incurred by traditional MCP tool calls (tool description in context, round-trip latency) that OneTool eliminates through consolidation.</p> <p>Cost estimation:</p> <p>Statistics include an estimated cost based on the configured model pricing. Cost is calculated from characters in/out converted to tokens:</p> <pre><code>tokens = chars / chars_per_token\ncost = (input_tokens / 1M \u00d7 input_cost) + (output_tokens / 1M \u00d7 output_cost)\n</code></pre> <p>The HTML report shows the estimated cost with the model name for reference.</p>"},{"location":"getting-started/configuration/#security-configuration","title":"Security Configuration","text":"<p>Control code validation and security pattern detection:</p> <pre><code>security:\n  validate_code: true          # Enable AST validation before execution\n  enabled: true                # Enable security pattern checks\n  blocked:                     # Additional patterns to block (extends defaults)\n    - my_dangerous.*\n  warned:                      # Additional patterns to warn on\n    - custom_risky.*\n  allow:                       # Patterns to exempt from defaults\n    - open                     # Allow open() without warning\n</code></pre> <p>Pattern matching:</p> <ul> <li>Patterns without dots (e.g., <code>exec</code>, <code>subprocess</code>) match builtin calls AND import statements</li> <li>Patterns with dots (e.g., <code>subprocess.*</code>, <code>os.system</code>) match qualified function calls only</li> <li>Supports fnmatch wildcards: <code>*</code> (any chars), <code>?</code> (single char), <code>[seq]</code> (char set)</li> </ul> <p>Default blocked patterns:</p> <ul> <li><code>exec</code>, <code>eval</code>, <code>compile</code>, <code>__import__</code> (arbitrary code execution)</li> <li><code>subprocess.*</code>, <code>os.system</code>, <code>os.popen</code>, <code>os.spawn*</code>, <code>os.exec*</code> (command injection)</li> </ul> <p>Default warned patterns:</p> <ul> <li><code>subprocess</code>, <code>os</code> (imports that enable dangerous operations)</li> <li><code>open</code> (file access)</li> <li><code>pickle.*</code>, <code>yaml.load</code>, <code>marshal.*</code> (deserialisation attacks)</li> </ul> <p>Configuration behaviour:</p> <ul> <li><code>blocked</code> and <code>warned</code> lists extend defaults (additive, not replacement)</li> <li>Adding a pattern to <code>warned</code> downgrades it from blocked if in defaults</li> <li>Use <code>allow</code> to exempt specific patterns entirely (no warning)</li> </ul>"},{"location":"getting-started/configuration/#external-mcp-servers","title":"External MCP Servers","text":"<p>Proxy external MCP servers through OneTool:</p> <pre><code>servers:\n  package_version:\n    type: stdio\n    command: npx\n    args: [\"-y\", \"mcp-package-version@0.1.17\"]\n    timeout: 30\n</code></pre>"},{"location":"getting-started/configuration/#aliases","title":"Aliases","text":"<p>Short names for common tool functions:</p> <pre><code>alias:\n  ws: brave.web_search\n  ns: brave.news\n  wf: web.fetch\n</code></pre>"},{"location":"getting-started/configuration/#snippets","title":"Snippets","text":"<p>Reusable code templates with Jinja2 substitution:</p> <pre><code>snippets:\n  multi_search:\n    description: Search multiple queries\n    params:\n      queries: { required: true, description: \"List of queries\" }\n    body: |\n      results = []\n      for q in {{ queries }}:\n          results.append(brave.web_search(query=q))\n      \"\\n---\\n\".join(results)\n</code></pre>"},{"location":"getting-started/configuration/#external-snippet-files","title":"External Snippet Files","text":"<p>Load snippets from external YAML files using <code>include:</code>:</p> <pre><code>include:\n  - snippets.yaml              # Falls back to global or bundled\n  - local-snippets.yaml        # Project-specific additions\n\nsnippets:\n  # Inline snippets override included ones with same name\n  custom:\n    body: \"demo.foo()\"\n</code></pre> <p>External snippet files must have a <code>snippets:</code> key:</p> <pre><code># my-snippets.yaml\nsnippets:\n  brv_research:\n    description: Research a topic with web search\n    params:\n      topic: { required: true, description: \"Topic to research\" }\n    body: |\n      brave.search(query=\"{{ topic }}\")\n</code></pre> <p>Resolution order: Files are loaded in order, then inline snippets override any conflicts.</p>"},{"location":"getting-started/configuration/#environment-variable-expansion","title":"Environment Variable Expansion","text":"<p>Config values support <code>${VAR}</code> and <code>${VAR:-default}</code> syntax:</p> <pre><code>projects:\n  myapp:\n    path: ${HOME}/projects/myapp\n    attrs:\n      db_url: ${DATABASE_URL:-sqlite:///local.db}\n</code></pre>"},{"location":"getting-started/configuration/#validation","title":"Validation","text":"<p>Invalid configuration values are rejected at load time with helpful error messages:</p> <pre><code>ValueError: Invalid configuration in config/ot-serve.yaml:\n  tools.brave.timeout: Input should be greater than or equal to 1\n</code></pre>"},{"location":"getting-started/configuration/#example-configurations","title":"Example Configurations","text":""},{"location":"getting-started/configuration/#minimal-configuration","title":"Minimal Configuration","text":"<pre><code>version: 1\ntools_dir:\n  - src/ot_tools/*.py\n</code></pre>"},{"location":"getting-started/configuration/#production-configuration","title":"Production Configuration","text":"<pre><code>version: 1\n\ntools_dir:\n  - src/ot_tools/*.py\n\nlog_level: WARNING\n\nsecurity:\n  validate_code: true\n\ntools:\n  brave:\n    timeout: 120.0\n  context7:\n    timeout: 60.0\n    docs_limit: 20\n  db:\n    max_chars: 8000\n  ripgrep:\n    timeout: 120.0\n\nprojects:\n  app:\n    path: /srv/myapp\n    attrs:\n      db_url: ${DATABASE_URL}\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Python 3.11+ required. Install with uv or pip.</p> <p>For the quickest path, see Quickstart. This page covers all platforms and optional features.</p>"},{"location":"getting-started/installation/#system-requirements","title":"System Requirements","text":"Requirement Version Purpose Python &gt;= 3.11 Runtime environment uv Latest Package management (recommended)"},{"location":"getting-started/installation/#installing-system-requirements","title":"Installing System Requirements","text":"<p>macOS:</p> <pre><code>brew install python@3.11\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <p>Linux (Debian/Ubuntu):</p> <pre><code>apt install python3.11\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <p>Windows:</p> <pre><code>winget install Python.Python.3.11\nirm https://astral.sh/uv/install.ps1 | iex\n</code></pre>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"getting-started/installation/#using-uv-tool-recommended","title":"Using uv tool (Recommended)","text":"<pre><code>uv tool install onetool-mcp\n</code></pre> <p>This installs <code>ot-serve</code> and <code>ot-bench</code> commands globally.</p>"},{"location":"getting-started/installation/#using-pip","title":"Using pip","text":"<pre><code>pip install onetool-mcp\n</code></pre>"},{"location":"getting-started/installation/#from-source-development","title":"From Source (Development)","text":"<pre><code>git clone https://github.com/beycom/onetool.git\ncd onetool\nuv sync --group dev\n</code></pre>"},{"location":"getting-started/installation/#local-development-install","title":"Local Development Install","text":"<pre><code>uv tool install -e .\n</code></pre> <p>Code changes are picked up immediately. Reinstall only for new entry points, dependencies, or top-level packages.</p>"},{"location":"getting-started/installation/#api-keys","title":"API Keys","text":"<p>API keys are stored in <code>secrets.yaml</code> (gitignored):</p> Key Service Used By <code>OPENAI_API_KEY</code> OpenRouter <code>transform</code>, <code>code_search</code> <code>BRAVE_API_KEY</code> Brave Search <code>brave.*</code> tools <code>CONTEXT7_API_KEY</code> Context7 <code>context7.*</code> tools"},{"location":"getting-started/installation/#example-secretsyaml","title":"Example secrets.yaml","text":"<pre><code># .onetool/secrets.yaml\nBRAVE_API_KEY: \"BSA...\"\nOPENAI_API_KEY: \"sk-...\"\nCONTEXT7_API_KEY: \"c7-...\"\n</code></pre> <p>Resolution order: <code>OT_SECRETS_FILE</code> &gt; <code>.onetool/secrets.yaml</code> &gt; <code>~/.onetool/secrets.yaml</code></p>"},{"location":"getting-started/installation/#configuration-variables","title":"Configuration Variables","text":"Variable Default Purpose <code>OT_LOG_LEVEL</code> <code>INFO</code> Logging verbosity <code>OT_LOG_DIR</code> <code>../logs</code> Log file directory (relative to config)"},{"location":"getting-started/installation/#transform-tool-configuration","title":"Transform Tool Configuration","text":"<p>The transform tool requires explicit configuration in <code>ot-serve.yaml</code>:</p> <pre><code>tools:\n  transform:\n    base_url: \"https://openrouter.ai/api/v1\"  # Required\n    model: \"openai/gpt-5-mini\"                 # Required\n</code></pre> <p>The tool is not available until both <code>base_url</code> and <code>model</code> are configured, plus <code>OPENAI_API_KEY</code> in secrets.</p>"},{"location":"getting-started/installation/#mcp-configuration","title":"MCP Configuration","text":""},{"location":"getting-started/installation/#claude-code","title":"Claude Code","text":"<p>Add to <code>~/.claude/settings.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"onetool\": {\n      \"command\": \"ot-serve\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/installation/#with-environment-variables","title":"With Environment Variables","text":"<pre><code>{\n  \"mcpServers\": {\n    \"onetool\": {\n      \"command\": \"ot-serve\",\n      \"env\": {\n        \"OT_BRAVE_API_KEY\": \"your-brave-api-key\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/installation/#project-setup","title":"Project Setup","text":"<p>Create a <code>.onetool/</code> directory in your project:</p> Platform Global Config Project Config macOS/Linux <code>~/.onetool/</code> <code>.onetool/</code> Windows <code>%USERPROFILE%\\.onetool\\</code> <code>.onetool\\</code>"},{"location":"getting-started/installation/#feature-specific-requirements","title":"Feature-Specific Requirements","text":""},{"location":"getting-started/installation/#semantic-code-search-code_search","title":"Semantic Code Search (<code>code_search</code>)","text":"<p>Requires pre-indexed codebase:</p> <pre><code>chunkhound index /path/to/project\n</code></pre>"},{"location":"getting-started/installation/#ripgrep-search","title":"Ripgrep Search","text":"<pre><code># macOS\nbrew install ripgrep\n\n# Linux\napt install ripgrep\n\n# Windows\nwinget install BurntSushi.ripgrep.MSVC\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code># Check version\not-serve --version\n\n# Start MCP server\not-serve\n\n# Run benchmarks (from source)\nOT_CWD=demo ot-bench run demo/bench/features.yaml\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration - YAML schema and options</li> <li>CLI Reference - Command-line tools</li> <li>Examples - Demo project usage</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quickstart","text":"<p>30 seconds to install. 2 minutes to first tool call.</p>"},{"location":"getting-started/quickstart/#1-install","title":"1. Install","text":"<pre><code>uv tool install onetool-mcp\n</code></pre> <p>Or with pip:</p> <pre><code>pip install onetool-mcp\n</code></pre>"},{"location":"getting-started/quickstart/#2-connect-to-claude-code","title":"2. Connect to Claude Code","text":"<p>Add to <code>~/.claude/settings.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"onetool\": {\n      \"command\": \"ot-serve\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/quickstart/#3-use-it","title":"3. Use It","text":"<pre><code>__ot brave.search(query=\"AI news\")\n</code></pre> <p>That's it. One tool, unlimited capabilities.</p> <p>Next: Installation (all platforms) | Configuration | Tools Reference</p>"},{"location":"getting-started/security/","title":"Security Model","text":"<p>No hidden calls. No magic. You read the code before you run it.</p>"},{"location":"getting-started/security/#philosophy","title":"Philosophy","text":"<p>OneTool takes a different approach to AI tool security:</p> <ol> <li>Transparency over obscurity - You see the exact code before it runs</li> <li>Developer control - Configurable policies, not black boxes</li> <li>Defense in depth - Multiple layers, each independently useful</li> <li>Fail-safe defaults - Secure out of the box, customisable when needed</li> </ol>"},{"location":"getting-started/security/#security-layers","title":"Security Layers","text":""},{"location":"getting-started/security/#1-explicit-execution","title":"1. Explicit Execution","text":"<p>The fundamental security mechanism: you see what runs.</p> <pre><code># The LLM generates this code - you see it before execution\n__ot brave.web_search(query=\"AI security best practices\")\n</code></pre> <p>Unlike hidden tool calls, OneTool's explicit execution means:</p> <ul> <li>No surprise API calls</li> <li>No hidden file modifications</li> <li>No covert network requests</li> <li>Full audit trail in conversation</li> </ul> <p>Code review catches what automation misses.</p>"},{"location":"getting-started/security/#2-ast-code-validation","title":"2. AST Code Validation","text":"<p>Before any code executes, OneTool validates it using Python's Abstract Syntax Tree:</p> <pre><code>Code \u2192 ast.parse() \u2192 Pattern Detection \u2192 Execute or Reject\n</code></pre> <p>What it catches:</p> Pattern Risk Action <code>exec()</code>, <code>eval()</code> Arbitrary code execution Block <code>subprocess.*</code> Command injection Block <code>os.system</code>, <code>os.popen</code> Shell execution Block <code>pickle.load()</code> Deserialisation attacks Warn <code>open()</code> File access Warn <p>Performance: ~0.1-1ms overhead. Negligible compared to actual tool execution.</p>"},{"location":"getting-started/security/#3-configurable-security-policies","title":"3. Configurable Security Policies","text":"<p>Four-tier pattern system for fine-grained control:</p> <pre><code>security:\n  allow: [...]     # Execute silently\n  ask: [...]       # Prompt user, show full command\n  warn: [...]      # Log warning, execute\n  block: [...]     # Reject with error\n</code></pre> <p>Priority: allow &gt; ask &gt; warn &gt; block</p> <p>Example configurations:</p> <pre><code># Paranoid mode - confirm everything\nsecurity:\n  ask:\n    - \"*\"\n\n# Air-gapped - block all network tools\nsecurity:\n  block:\n    - brave.*\n    - web_fetch.*\n    - context7.*\n    - ground.*\n\n# Trust file ops, ask for network\nsecurity:\n  allow:\n    - file.*\n  ask:\n    - brave.*\n    - web_fetch.*\n</code></pre> <p>Patterns use fnmatch wildcards (<code>*</code>, <code>?</code>, <code>[seq]</code>) and work for both code patterns and tool names.</p>"},{"location":"getting-started/security/#4-path-boundary-enforcement","title":"4. Path Boundary Enforcement","text":"<p>File operations are constrained to allowed directories:</p> <pre><code>tools:\n  file:\n    allowed_dirs: [\".\"]           # Only current directory\n    exclude_patterns: [\".git\", \".env\", \"node_modules\"]\n    max_file_size: 10000000       # 10MB limit\n</code></pre> <p>What it prevents:</p> <ul> <li>Reading <code>/etc/passwd</code> or system files</li> <li>Writing outside project boundaries</li> <li>Accessing sensitive directories (<code>.git</code>, <code>.env</code>)</li> <li>Symlink escape attacks (resolved before validation)</li> </ul>"},{"location":"getting-started/security/#5-secrets-management","title":"5. Secrets Management","text":"<p>API keys and credentials are isolated from code:</p> <pre><code># secrets.yaml (gitignored)\nBRAVE_API_KEY: \"your-key\"\nDATABASE_URL: \"${PROD_DB_URL}\"\n</code></pre> <p>Security properties:</p> <ul> <li>Separate file, not in main config</li> <li>Environment variable expansion</li> <li>Never logged or exposed in errors</li> <li>Accessed via <code>get_secret()</code> API only</li> </ul>"},{"location":"getting-started/security/#6-worker-process-isolation","title":"6. Worker Process Isolation","text":"<p>Tools run in isolated worker processes:</p> <ul> <li>Separate memory space from main server</li> <li>Controlled execution environment (no arbitrary imports)</li> <li>Timeout enforcement per tool</li> <li>Clean process state between calls</li> </ul>"},{"location":"getting-started/security/#default-security-patterns","title":"Default Security Patterns","text":""},{"location":"getting-started/security/#blocked-prevent-execution","title":"Blocked (prevent execution)","text":"<pre><code>exec, eval, compile, __import__     # Arbitrary code execution\nsubprocess.*                         # Command injection\nos.system, os.popen                  # Shell execution\nos.spawn*, os.exec*                  # Process spawning\n</code></pre>"},{"location":"getting-started/security/#warned-log-and-execute","title":"Warned (log and execute)","text":"<pre><code>subprocess, os                       # Import warnings\nopen                                 # File access\npickle.*, yaml.load, marshal.*       # Deserialisation\n</code></pre>"},{"location":"getting-started/security/#customising-security","title":"Customising Security","text":""},{"location":"getting-started/security/#extend-defaults-additive","title":"Extend defaults (additive)","text":"<pre><code>security:\n  blocked:\n    - my_dangerous.*    # Added to defaults\n  warned:\n    - custom_risky.*    # Added to defaults\n</code></pre>"},{"location":"getting-started/security/#downgrade-blocked-to-warned","title":"Downgrade blocked to warned","text":"<pre><code>security:\n  warned:\n    - os.popen          # Moves from blocked to warned\n</code></pre>"},{"location":"getting-started/security/#exempt-from-defaults","title":"Exempt from defaults","text":"<pre><code>security:\n  allow:\n    - open              # Remove warning for file tools\n</code></pre>"},{"location":"getting-started/security/#attack-mitigation-summary","title":"Attack Mitigation Summary","text":"Attack Vector Mitigation Arbitrary code execution AST blocks <code>exec</code>, <code>eval</code> Command injection AST blocks <code>subprocess.*</code>, <code>os.system</code> Path traversal Boundary validation, symlink resolution Sensitive data exposure Secrets isolation, path exclusions Deserialisation attacks AST warns on <code>pickle</code>, <code>yaml.load</code> Prompt injection Explicit execution (developer review)"},{"location":"getting-started/security/#what-onetool-doesnt-do","title":"What OneTool Doesn't Do","text":"<p>OneTool is a developer tool, not a sandbox. It does not:</p> <ul> <li>Run untrusted code from unknown sources</li> <li>Provide container-level isolation</li> <li>Implement network firewalls</li> <li>Replace code review</li> </ul>"},{"location":"getting-started/security/#recommendations","title":"Recommendations","text":"<ol> <li>Review generated code - The explicit execution model only works if you look</li> <li>Use <code>ask</code> for destructive ops - <code>ask: [file.write, file.delete]</code></li> <li>Restrict paths to project scope - <code>allowed_dirs: [\".\"]</code></li> <li>Keep secrets separate - Never commit <code>secrets.yaml</code></li> <li>Use air-gapped mode for sensitive work - Block network tools when needed</li> </ol>"},{"location":"getting-started/security/#see-also","title":"See Also","text":"<ul> <li>Configuration Reference - Full YAML schema</li> </ul>"},{"location":"guides/database-queries/","title":"Database Queries","text":"<p>SQL from your AI. Three functions. Any database.</p> <p>The <code>db.*</code> pack gives LLMs direct database access - explore tables, inspect schemas, run queries.</p>"},{"location":"guides/database-queries/#available-functions","title":"Available Functions","text":"Function Purpose <code>db.tables(project)</code> List all tables in a database <code>db.schema(project, table)</code> Get table schema <code>db.query(project, sql)</code> Execute SQL query"},{"location":"guides/database-queries/#setup","title":"Setup","text":"<p>Configure database connections in <code>ot-serve.yaml</code>:</p> <pre><code>projects:\n  myapp:\n    path: /path/to/project\n    attrs:\n      db_url: postgresql://localhost/myapp\n\n  demo:\n    path: .\n    attrs:\n      db_url: sqlite:///demo/db/northwind.db\n</code></pre>"},{"location":"guides/database-queries/#basic-usage","title":"Basic Usage","text":""},{"location":"guides/database-queries/#list-tables","title":"List Tables","text":"<pre><code>db.tables(project=\"demo\")\n</code></pre>"},{"location":"guides/database-queries/#get-schema","title":"Get Schema","text":"<pre><code>db.schema(project=\"demo\", table=\"customers\")\n</code></pre>"},{"location":"guides/database-queries/#run-query","title":"Run Query","text":"<pre><code>db.query(project=\"demo\", sql=\"SELECT * FROM customers LIMIT 10\")\n</code></pre>"},{"location":"guides/database-queries/#configuration","title":"Configuration","text":"Setting Default Description <code>db.max_chars</code> 4000 Maximum output characters <p>Override in config:</p> <pre><code>tools:\n  db:\n    max_chars: 8000  # Larger output\n</code></pre>"},{"location":"guides/database-queries/#supported-databases","title":"Supported Databases","text":"<p>Any SQLAlchemy-compatible database:</p> <ul> <li>SQLite: <code>sqlite:///path/to/db.db</code></li> <li>PostgreSQL: <code>postgresql://user:pass@host/db</code></li> <li>MySQL: <code>mysql://user:pass@host/db</code></li> </ul>"},{"location":"guides/database-queries/#security-notes","title":"Security Notes","text":"<ul> <li>Queries are read-only by default</li> <li>Use parameterized queries for user input</li> <li>Configure <code>max_chars</code> to prevent excessive output</li> </ul>"},{"location":"guides/database-queries/#example-workflow","title":"Example Workflow","text":"<pre><code># 1. Explore available tables\ntables = db.tables(project=\"demo\")\n\n# 2. Check schema\nschema = db.schema(project=\"demo\", table=\"orders\")\n\n# 3. Query data\nresults = db.query(\n    project=\"demo\",\n    sql=\"SELECT customer_id, COUNT(*) as order_count FROM orders GROUP BY customer_id\"\n)\n</code></pre>"},{"location":"guides/explicit-calls/","title":"Explicit Tool Calls","text":"<p>Write code. Call APIs. No guessing.</p> <p>OneTool's <code>__ot</code> prefix gives you explicit control over tool invocation. You write the code - the LLM doesn't have to guess which tool or which parameters.</p>"},{"location":"guides/explicit-calls/#trigger-prefixes","title":"Trigger Prefixes","text":"<p>OneTool supports five trigger prefixes. All prefixes support the same three invocation styles.</p> Prefix Description Recommended <code>__onetool__run</code> Full name, explicit tool call Yes <code>__ot</code> Short form Yes <code>__onetool</code> Full name, default tool <code>__ot__run</code> Short name, explicit tool call <code>mcp__onetool__run</code> Explicit MCP call <p>Recommended: Use <code>__onetool__run</code> for clarity or <code>__ot</code> for brevity.</p> <p>Note: <code>mcp__ot__run</code> is NOT a valid prefix.</p>"},{"location":"guides/explicit-calls/#invocation-styles","title":"Invocation Styles","text":"<p>Each prefix supports three ways to pass code:</p>"},{"location":"guides/explicit-calls/#1-simple-call","title":"1. Simple Call","text":"<p>Direct function call after the prefix:</p> <pre><code>__ot sha256(text=\"hello\")\n__onetool__run multiply(a=8472, b=9384)\n</code></pre>"},{"location":"guides/explicit-calls/#2-inline-backticks","title":"2. Inline Backticks","text":"<p>Code wrapped in backticks:</p> <pre><code>__ot `sha256(text=\"hello\")`\n__onetool__run `multiply(a=8472, b=9384)`\n</code></pre>"},{"location":"guides/explicit-calls/#3-code-fence","title":"3. Code Fence","text":"<p>Multi-line code in a fenced block:</p> <pre><code>__onetool__run\n```python\nmetals = [\"Gold\", \"Silver\"]\nresults = {}\nfor metal in metals:\n    results[metal] = brave.web_search(query=f\"{metal} price\")\nresults\n</code></pre> <pre><code>## Direct MCP Call\n\nFor programmatic or explicit MCP invocation:\n</code></pre> <p>mcp__onetool__run(command='sha256(text=\"hello\")')</p> <pre><code>## Complete Examples\n\n### Simple Hash Computation\n</code></pre> <p>__ot sha256(text=\"hello world\")</p> <pre><code>### Multi-step Computation with Variables\n</code></pre> <p>__onetool__run</p> <pre><code>msg = \"Hello World\"\nsha256(text=msg)\n</code></pre> <pre><code>### Loop with Multiple Tool Calls\n</code></pre> <p>__ot</p> <pre><code>primes = [is_prime(n=i) for i in range(11, 21)]\nprimes\n</code></pre> <pre><code>### Chained Operations\n</code></pre> <p>__ot__run <code>upper(text=reverse(text=\"hello\"))</code></p> <p><pre><code>---\n\n## Prompt Engineering for Tool Calls\n\n### Pre-Call Instructions\n\nAdd context before the tool call to guide the LLM:\n</code></pre> Calculate the SHA-256 hash of the following text: __onetool__run sha256(text=\"hello world\") <pre><code>### Post-Call Processing\n\nRequest specific formatting or analysis after the tool result:\n</code></pre> __onetool__run brave.web_search(query=\"latest AI news\", count=5)</p> <p>Summarise the top 3 results in bullet points. <pre><code>### Structured Output Requests\n\nCombine tool execution with output formatting:\n\n    __onetool__run\n    ```python\n    results = {\n        \"hash\": sha256(text=\"hello\"),\n        \"reversed\": reverse(text=\"hello\"),\n        \"length\": count_chars(text=\"hello\")\n    }\n    results\n    ```\n\n    Return the results as a markdown table.\n\n---\n\n## Best Practices\n\nYour system prompt should include instructions for reliable tool execution:\n\n```yaml\nsystem_prompt: |\n  Never retry successful tool calls to get \"better\" results.\n  If a tool call fails, report the error - do not compute the result yourself.\n</code></pre></p> <p>Why these matter:</p> <ul> <li>No retries on success: LLMs sometimes want to \"improve\" results by calling the same tool again. This wastes tokens and can cause loops.</li> <li>No manual computation on failure: When a tool fails, LLMs often try to compute the answer themselves (e.g., calculating a hash or Fibonacci number). This defeats the purpose of using tools and may produce incorrect results.</li> </ul>"},{"location":"guides/explicit-calls/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/explicit-calls/#syntax-error-at-line-1-invalid-syntax","title":"\"Syntax error at line 1: invalid syntax\"","text":"<p>The prefix wasn't stripped properly. Ensure:</p> <ol> <li>There's whitespace or a newline after the prefix</li> <li>The code itself is valid Python</li> </ol>"},{"location":"guides/explicit-calls/#tool-call-returns-unexpected-result","title":"Tool call returns unexpected result","text":"<p>Check that:</p> <ol> <li>Function arguments match the expected signature</li> <li>String arguments are properly quoted</li> <li>For multi-line code, the last expression is what you want returned</li> </ol>"},{"location":"guides/explicit-calls/#code-fence-not-recognized","title":"Code fence not recognized","text":"<p>Ensure:</p> <ol> <li>Opening <code>```</code> is on its own line after the prefix</li> <li>Closing <code>```</code> is on its own line</li> <li>Language hint (e.g., <code>python</code>) is optional but recommended</li> </ol>"},{"location":"guides/prompting-best-practices/","title":"Prompting Best Practices","text":"<p>Make your LLM reliable. Stop the retry loops.</p> <p>Two rules prevent 90% of tool-calling problems. Add them to your system prompt.</p>"},{"location":"guides/prompting-best-practices/#system-prompt-guidelines","title":"System Prompt Guidelines","text":"<p>Include these instructions in your system prompt:</p> <pre><code>system_prompt: |\n  Never retry successful tool calls to get \"better\" results.\n  If a tool call fails, report the error - do not compute the result yourself.\n</code></pre> <p>Why these matter:</p> <ul> <li>No retries on success: LLMs sometimes want to \"improve\" results by calling the same tool again. This wastes tokens and can cause loops.</li> <li>No manual computation on failure: When a tool fails, LLMs often try to compute the answer themselves (e.g., calculating a hash). This defeats the purpose of using tools and may produce incorrect results.</li> </ul>"},{"location":"guides/prompting-best-practices/#pre-call-instructions","title":"Pre-Call Instructions","text":"<p>Add context before tool calls to guide the LLM:</p> <pre><code>Calculate the SHA-256 hash of the following text:\n__onetool__run sha256(text=\"hello world\")\n</code></pre>"},{"location":"guides/prompting-best-practices/#post-call-processing","title":"Post-Call Processing","text":"<p>Request specific formatting after tool results:</p> <pre><code>__onetool__run brave.search(query=\"latest AI news\", count=5)\n\nSummarise the top 3 results in bullet points.\n</code></pre>"},{"location":"guides/prompting-best-practices/#structured-output","title":"Structured Output","text":"<p>Combine tool execution with output formatting:</p> <pre><code>__onetool__run\n```python\nresults = {\n    \"hash\": sha256(text=\"hello\"),\n    \"reversed\": reverse(text=\"hello\"),\n    \"length\": count_chars(text=\"hello\")\n}\nresults\n</code></pre> <p>Return the results as a markdown table. <pre><code>## Batch Operations\n\nFor multiple related queries, use batch functions:\n\n```python\n# Instead of multiple calls\nbrave.search(query=\"topic 1\")\nbrave.search(query=\"topic 2\")\n\n# Use batch\nbrave.search_batch(queries=[\"topic 1\", \"topic 2\"])\n</code></pre></p>"},{"location":"guides/prompting-best-practices/#error-handling","title":"Error Handling","text":"<p>When tools return errors:</p> <ol> <li>Report the error - Don't try to work around it</li> <li>Check prerequisites - API keys, dependencies</li> <li>Validate inputs - Query length, parameter types</li> </ol>"},{"location":"guides/prompting-best-practices/#token-efficiency","title":"Token Efficiency","text":"<ul> <li>Use short prefixes (<code>__ot</code>) for simple calls</li> <li>Use code fences for multi-step operations</li> <li>Prefer batch operations over multiple calls</li> </ul>"},{"location":"intro/","title":"Why OneTool Exists","text":"<p>MCP doesn't scale.</p> <p>Here's the problem: every MCP server you add makes your AI dumber. Not in theory - in practice.</p>"},{"location":"intro/#whats-actually-happening","title":"What's actually happening","text":""},{"location":"intro/#context-rot-is-real","title":"Context rot is real","text":"<p>LLM performance degrades as input tokens pile up. Chroma's research measured this: the 10,000th token is handled less reliably than the 100th.</p> <p>\"Context must be treated as a finite resource with diminishing marginal returns.\" - Anthropic Engineering</p>"},{"location":"intro/#mcp-eats-your-context-for-breakfast","title":"MCP eats your context for breakfast","text":"<p>Every MCP server you connect adds thousands of tokens before you've said anything.</p> Setup Token Cost What that means 5 servers ~55K Gone before you type 10+ servers 100K+ Context nearly full Tool calls N loops LLM deliberation tax <p>Each server makes context rot worse, not just bigger.</p>"},{"location":"intro/#vibe-coding-catches-up-with-you","title":"Vibe coding catches up with you","text":"<p>Collins Dictionary's 2025 Word of the Year: Andrej Karpathy's term for accepting code \"that looks roughly right.\"</p> <p>A UK study of 120 firms found 41% more debugging time at scale. Day 2 maintenance of AI-generated code is still an unsolved problem.</p>"},{"location":"intro/#what-onetool-does-differently","title":"What OneTool does differently","text":"<p>One tool. Code execution. That's basically it.</p>"},{"location":"intro/#the-numbers","title":"The numbers","text":"Metric Traditional MCP OneTool Token usage 150,000 2,000 Cost per query $0.025 $0.002 Tool calls 5+ 1 <p>98.7% fewer tokens. 10x cheaper. One call instead of five.</p>"},{"location":"intro/#how-it-works","title":"How it works","text":"<pre><code>Traditional MCP:\n  Load tools (55K) \u2192 Reason \u2192 Call tool \u2192 Reason \u2192 Return\n  Total: ~150K tokens, 5+ reasoning loops\n\nOneTool:\n  run request \u2192 Execute Python \u2192 Return\n  Total: ~2K tokens, 1 call\n</code></pre> <p>Instead of loading 50 tool schemas, LLMs write Python:</p> <pre><code>__ot brave.search(query=\"AI trends 2026\")\n</code></pre>"},{"location":"intro/#the-approach","title":"The approach","text":"<p>LLMs write Python to call functions. No JSON schema parsing. No tool selection loops. You see exactly what's being called because you wrote it.</p> <p>15 packs built-in. Adding your own is dropping a Python file in a folder.</p> <p>MIT Technology Review calls this shift \"from vibe coding to agentic engineering.\" Whatever you call it, the token math works out.</p>"},{"location":"intro/#what-you-get","title":"What you get","text":"<ul> <li>24x fewer tokens, same accuracy</li> <li>Drop a Python file, get a new pack</li> <li>AST validation before execution</li> <li><code>ot-bench</code> for testing LLM + MCP combinations</li> <li>Proxy mode wraps existing MCP servers</li> </ul>"},{"location":"other/brand/brand/","title":"OneTool Release Snippets","text":"<p>Reusable text for GitHub, PyPI, and marketing.</p>"},{"location":"other/brand/brand/#colors","title":"Colors","text":""},{"location":"other/brand/brand/#onetoolcolorprimary","title":"onetool.color.primary","text":"<pre><code>#0A497C\n</code></pre> <p>Used for: header, logo</p>"},{"location":"other/brand/brand/#brand-internal","title":"Brand (Internal)","text":"<p>Project identity \u2014 used in README header, logo, internal docs.</p>"},{"location":"other/brand/brand/#onetoolbrand","title":"onetool.brand","text":"<pre><code>One tool to rule them all\n</code></pre>"},{"location":"other/brand/brand/#onetoolbrandlotr","title":"onetool.brand.lotr","text":"<pre><code>One tool to rule them all, one tool to find them, one tool to bring them all, and in the development bind them.\n</code></pre>"},{"location":"other/brand/brand/#pitch-external","title":"Pitch (External)","text":"<p>Value proposition \u2014 used for GitHub about, PyPI, release notes.</p>"},{"location":"other/brand/brand/#onetoolpitch","title":"onetool.pitch","text":"<pre><code>One MCP, unlimited tools.\n</code></pre>"},{"location":"other/brand/brand/#onetoolpitchemoji","title":"onetool.pitch.emoji","text":"<pre><code>\ud83e\uddff One MCP, unlimited tools\n</code></pre>"},{"location":"other/brand/brand/#short-descriptions","title":"Short Descriptions","text":""},{"location":"other/brand/brand/#githubabout","title":"github.about","text":"<pre><code>\ud83e\uddff One MCP, unlimited tools\n</code></pre>"},{"location":"other/brand/brand/#pypidescription","title":"pypi.description","text":"<pre><code>One MCP, unlimited tools.\n</code></pre>"},{"location":"other/brand/brand/#taglines","title":"Taglines","text":""},{"location":"other/brand/brand/#onetooltaglineshort","title":"onetool.tagline.short","text":"<pre><code>Don't enumerate tools. Execute code.\n</code></pre>"},{"location":"other/brand/brand/#onetooltaglinevalue","title":"onetool.tagline.value","text":"<pre><code>98.7% fewer tokens. Same accuracy. 10x lower cost.\n</code></pre>"},{"location":"other/brand/brand/#repository","title":"Repository","text":""},{"location":"other/brand/brand/#githubtags","title":"github.tags","text":"<pre><code>python, mcp, model-context-protocol, mcp-server, llm, code-execution, mcp-tools, agents, token-efficiency, fastmcp, context-rot\n</code></pre>"},{"location":"other/brand/brand/#stats","title":"Stats","text":""},{"location":"other/brand/brand/#onetoolstats","title":"onetool.stats","text":"<pre><code>- 15 packs\n- 97 tools\n- 3 CLIs (ot-serve, ot-bench, ot-browse)\n- 98.7% token reduction\n- 10x cost reduction\n</code></pre>"},{"location":"other/brand/feature-summary/","title":"Feature Summary","text":""},{"location":"other/brand/feature-summary/#onetoolfeature-summary","title":"onetool.feature-summary","text":"<pre><code>## Why OneTool?\n\n**Stop Context Rot** \u2014 MCP tool enumeration burns 55K-150K tokens before you start. OneTool reduces this to ~2K tokens (98.7% reduction).\n\n**Explicit Calls** \u2014 No tool-selection guessing games. You write `__ot brave.search(query=\"AI\")` and that's exactly what runs. Five trigger prefixes, three invocation styles.\n\n**Configurable Everything**\n- **Tools**: Per-tool timeouts, limits, and behavior\n- **Secrets**: Isolated `secrets.yaml` (gitignored), environment variable expansion\n- **Prompts**: Customizable system prompts and instructions\n- **Servers**: Proxy external MCP servers through OneTool\n\n**Code-Centric**\n- **Easy to extend**: Drop a Python file, get a tool pack. No registration.\n- **Batteries included**: 15 packs, 97 tools ready to use\n- **Worker isolation**: External dependencies run in isolated subprocesses (PEP 723)\n- **AST security**: All code validated before execution\n\n**Built-in CLIs**\n- `ot-serve` \u2014 The MCP server\n- `ot-bench` \u2014 Benchmark harness (tokens, cost, accuracy)\n- `ot-browse` \u2014 Browser TUI with capture tools\n</code></pre>"},{"location":"other/brand/release-v1.0.0b1/","title":"GitHub Release Template","text":""},{"location":"other/brand/release-v1.0.0b1/#githubreleasev100b1","title":"github.release.v1.0.0b1","text":"<pre><code>## OneTool v1.0.0b1\n\n\ud83e\uddff One MCP, unlimited tools\n\n### Highlights\n\n\ud83d\udee1\ufe0f **Stop Context Rot**\n- 98.7% token reduction (150K \u2192 2K)\n- 10x lower cost per query\n- Single MCP call vs 5+ tool-selection loops\n\n\u26a1 **Explicit Calls**\n- Five trigger prefixes (`__ot`, `__onetool__run`, etc.)\n- Three invocation styles (simple, inline backticks, code fence)\n- No guessing \u2014 you write the code, it runs exactly that\n\n\u2699\ufe0f **Configurable Everything**\n- Per-tool timeouts, limits, behavior\n- Isolated secrets management (`secrets.yaml`)\n- Customizable prompts and snippets\n- Proxy external MCP servers\n\n\ud83d\udd0b **Batteries Included**\n- 15 packs, 97 tools ready to use\n- Drop a file to add a pack\n- Worker isolation for external dependencies\n\n\ud83d\udd12 **Security First**\n- AST validation before execution\n- Configurable allow/ask/warn/block policies\n- Path boundary enforcement\n- Secrets isolation (never logged)\n\n### Installation\n\n\\`\\`\\`bash\nuv tool install onetool-mcp\n# or: pip install onetool-mcp\n\\`\\`\\`\n\n### Links\n- \ud83d\udcd6 [Documentation](https://onetool.beycom.online)\n- \ud83d\udc1b [Issues](https://github.com/beycom/onetool/issues)\n- \u2615 [Support](https://ko-fi.com/gavinlas)\n</code></pre>"},{"location":"other/brand/tool-packs/","title":"Tool Packs","text":""},{"location":"other/brand/tool-packs/#onetoolpacks","title":"onetool.packs","text":"<p>Total: 15 packs, 97 tools</p> Pack Tools Description brave search, news, local, image, video, search_batch, summarize (7) Brave Search API web fetch, fetch_batch (2) Content extraction ground search, dev, docs, reddit (4) Google grounded search context7 search, doc (2) Library documentation code search, status (2) Semantic code search ripgrep search, files, count, types (4) Fast regex search llm transform (1) LLM data transformation db query, schema, tables (3) SQL queries excel 25 tools Excel manipulation convert auto, pdf, word, powerpoint, excel (5) Doc to Markdown file read, write, edit, copy, move, delete, list, tree, search, info (10) Secure file ops package npm, pypi, version, models (4) Package versions diagram 11 tools Diagram generation (Kroki) page 8 tools Browser capture analysis ot tools, help, config, health, stats, push, alias, snippet, instructions (9) Meta tools"},{"location":"other/browse/browser-inspector/","title":"Browser Inspector Tool","text":"<p>Observe and debug frontend applications. User controls the browser, LLM observes.</p>"},{"location":"other/browse/browser-inspector/#setup","title":"Setup","text":"<pre><code># Install Playwright browser (one-time)\nplaywright install chromium\n</code></pre>"},{"location":"other/browse/browser-inspector/#quick-start","title":"Quick Start","text":"<pre><code># Start the client\njust client\n</code></pre> <p>Then ask the LLM to use the browser tools:</p> <pre><code>You: Open https://example.com in a browser\n\n__onetool__run browser_open(url=\"https://en.wikipedia.org/wiki/The_Age\")\n</code></pre>"},{"location":"other/browse/browser-inspector/#available-tools","title":"Available Tools","text":"Tool Purpose <code>browser_open(url)</code> Launch browser and navigate to URL <code>browser_close()</code> Close browser session <code>browser_capture()</code> Take screenshot, get HTML, accessibility <code>browser_selection()</code> Get element user selected <code>browser_inspect(selector)</code> Deep CSS/box model inspection <code>browser_console()</code> Get console errors <code>browser_network()</code> Get network requests <code>browser_api()</code> Get XHR/fetch API calls <code>browser_resources()</code> List page resources <code>browser_changes(action)</code> Track DOM mutations"},{"location":"other/browse/browser-inspector/#example-workflows","title":"Example Workflows","text":""},{"location":"other/browse/browser-inspector/#debug-a-page","title":"Debug a page","text":"<pre><code>You: Open my app at localhost:3000 and check for errors\n\n# LLM opens browser, captures console errors and network failures\n</code></pre>"},{"location":"other/browse/browser-inspector/#inspect-an-element","title":"Inspect an element","text":"<pre><code>You: Enable selection mode so I can pick an element\n\n# LLM enables selection, you click element in browser\n\nYou: What styles are applied to my selection?\n\n# LLM inspects element, shows computed CSS and matched rules\n</code></pre>"},{"location":"other/browse/browser-inspector/#track-api-calls","title":"Track API calls","text":"<pre><code>You: Open the app and show me all API requests\n\n# LLM opens browser, you interact with the app\n\nYou: What API calls were made?\n\n# LLM shows XHR/fetch requests with request/response bodies\n</code></pre>"},{"location":"other/browse/browser-inspector/#connect-to-existing-chrome","title":"Connect to existing Chrome","text":"<pre><code># Start Chrome with debugging enabled\ngoogle-chrome --remote-debugging-port=9222\n\n# Or on macOS\n/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --remote-debugging-port=9222\n</code></pre> <pre><code>You: Connect to my existing Chrome browser\n\nLLM: __onetool__run browser_open(connect=True)\n</code></pre>"},{"location":"other/browse/browser-inspector/#direct-python-usage","title":"Direct Python Usage","text":"<pre><code>from tools.browser_inspector import browser_open, browser_capture, browser_close\n\n# Open browser\nbrowser_open(url=\"https://en.wikipedia.org/wiki/The_Age\")\n\n# Take screenshot\nresult = browser_capture(screenshot=True, html=True)\n\n# Clean up\nbrowser_close()\n</code></pre>"},{"location":"other/browse/ot-browse/","title":"ot-browse","text":"<p>Interactive browser debugging TUI for page capture and inspection.</p> <p>Beta Feature: This CLI is experimental and may change.</p>"},{"location":"other/browse/ot-browse/#usage","title":"Usage","text":"<pre><code>ot-browse [URL] [OPTIONS]\n</code></pre>"},{"location":"other/browse/ot-browse/#examples","title":"Examples","text":"<pre><code># Open URL in browser TUI\not-browse https://example.com\n\n# Open without URL\not-browse\n</code></pre>"},{"location":"other/browse/ot-browse/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"Key Action <code>q</code> Quit <code>r</code> Reload page <code>s</code> Capture screenshot <code>i</code> Toggle inspect mode"},{"location":"other/browse/ot-browse/#output","title":"Output","text":"<p>Captures are saved to <code>.browse/{session}/{capture}/</code> with:</p> File Contents <code>page.html</code> Full page HTML <code>screenshot.webp</code> Page screenshot <code>accessibility.yaml</code> ARIA tree <code>annotations.yaml</code> Annotated elements"},{"location":"other/browse/ot-browse/#configuration","title":"Configuration","text":"Variable Description <code>OT_BROWSE_CONFIG</code> Config file path override <p>Default config: <code>config/ot-browse.yaml</code> or <code>.onetool/ot-browse.yaml</code></p>"},{"location":"other/browse/ot-browse/#requirements","title":"Requirements","text":"<pre><code># Install Playwright browser (one-time)\nplaywright install chromium\n</code></pre>"},{"location":"other/browse/page-view/","title":"Page View","text":"<p>Tools for analyzing browse session captures from <code>ot-browse</code>.</p> Function Description <code>page.list(...)</code> List available sessions <code>page.captures(session_id, ...)</code> List captures in a session <code>page.annotations(session_id, capture_id, ...)</code> Get annotations with selectors and HTML <code>page.context(session_id, capture_id, annotation_id, ...)</code> Get HTML/accessibility context for annotation <code>page.search(session_id, capture_id, pattern, ...)</code> Search HTML and accessibility tree <code>page.accessibility(session_id, capture_id, filter_type, ...)</code> Filter large accessibility tree <code>page.diff(session_id, capture_id_1, capture_id_2, ...)</code> Compare two captures <code>page.summary(session_id, capture_id, ...)</code> Quick overview of a capture <p>Key Parameters: - <code>session_id</code>: The session directory name (e.g., \"2025-12-31_22-46_session_001\") - <code>capture_id</code>: The capture directory name (e.g., \"capture_001\") - <code>sessions_dir</code>: Path to sessions directory (default: <code>.browse/</code>) - <code>filter_type</code>: For accessibility - \"interactive\", \"headings\", \"forms\", \"links\", \"landmarks\"</p> <p>Data Location: <code>.browse/{session}/{capture}/</code></p> <p>Implementation notes: - Streams large files (HTML, accessibility tree) instead of loading into memory - Batch line number lookups for performance on 8K+ line HTML files - Filters 258KB accessibility trees down to &lt;10KB</p> <p>Comparison: Original implementation; works with <code>ot-browse</code> captures.</p> <p>License: MIT</p>"},{"location":"other/ideas/linkedin-article/","title":"Why OneTool: Solving the MCP Scaling Crisis","text":"<p>LinkedIn article draft - based on technical analysis</p> <p>The AI coding landscape faces three converging crises that OneTool directly addresses.</p>"},{"location":"other/ideas/linkedin-article/#the-problem","title":"The Problem","text":"<p>Context Rot: LLM performance degrades as input tokens increase. Chroma's research shows the 10,000th token is handled less reliably than the 100th.</p> <p>MCP Token Bloat: Connecting 5 MCP servers consumes ~55K tokens before conversations begin. 10+ servers? Over 100K tokens - context nearly exhausted.</p> <p>Vibe Coding at Scale: 92% of US developers use AI daily, but 41% more debugging time is reported at scale. The \"Day 2\" problem - maintaining AI-generated systems - remains unsolved.</p>"},{"location":"other/ideas/linkedin-article/#the-solution","title":"The Solution","text":"<p>OneTool reduces token usage from 150,000 to 2,000 tokens - a 98.7% reduction - by presenting tools as code APIs instead of individual tool definitions.</p> <p>One tool, code execution. Instead of loading 50 separate tools with their schemas, OneTool exposes a single <code>run</code> tool. LLMs write Python to call any function:</p> <pre><code>__ot brave.search(query=\"AI trends 2026\")\n</code></pre>"},{"location":"other/ideas/linkedin-article/#benchmark-results","title":"Benchmark Results","text":"Approach Tokens Cost Accuracy Multiple MCP 46K $0.025 100% OneTool 1.9K $0.002 100% <p>24x fewer tokens. Same accuracy. 10x lower cost.</p>"},{"location":"other/ideas/linkedin-article/#why-this-matters","title":"Why This Matters","text":"<p>The industry is shifting from vibe coding to agentic engineering. OneTool is built for that future:</p> <ul> <li>Drop-in tool files (no registration, no config)</li> <li>AST-based security validation before execution</li> <li>Spec-driven development with OpenSpec integration</li> <li>Benchmark harness for rigorous LLM + MCP testing</li> </ul>"},{"location":"other/ideas/linkedin-article/#get-started","title":"Get Started","text":"<pre><code>uv tool install onetool-mcp\n</code></pre> <p>Add to Claude Code and start using tools through code.</p> <p>Based on Anthropic's research on code execution with MCP and advanced tool use patterns.</p>"},{"location":"other/ideas/linkedin-article/#ai-mcp-developertools-agenticengineering-llm","title":"AI #MCP #DeveloperTools #AgenticEngineering #LLM","text":""},{"location":"other/ideas/why-onetool-source/","title":"Why OneTool: Solving the MCP Scaling Crisis","text":"<p>Date: 2026-01-04</p> <p>Topic: Deep analysis of OneTool's value proposition against current AI coding challenges</p>"},{"location":"other/ideas/why-onetool-source/#executive-summary","title":"Executive Summary","text":"<p>The AI coding landscape faces three converging crises:</p> <ol> <li>Context Rot: LLM performance degrades as input tokens increase</li> <li>MCP Token Bloat: 55K-150K tokens consumed before conversations begin</li> <li>Vibe Coding Collapse: 41% more debugging time for AI-generated code at scale</li> </ol> <p>OneTool addresses all three with one tool, code execution, and spec-driven development.</p>"},{"location":"other/ideas/why-onetool-source/#the-three-crises","title":"The Three Crises","text":""},{"location":"other/ideas/why-onetool-source/#context-rot","title":"Context Rot","text":"<p>Chroma's research found models don't process context uniformly - the 10,000th token is handled less reliably than the 100th.</p> <p>\"Context Rot refers to the gradual performance deterioration of LLMs as they are given longer and more complex inputs.\"</p> <p>Anthropic confirms:</p> <p>\"Context must be treated as a finite resource with diminishing marginal returns.\"</p> <p>Impact on MCP: Each server adds thousands of tokens. The cumulative effect is degradative, not additive.</p>"},{"location":"other/ideas/why-onetool-source/#mcp-token-bloat","title":"MCP Token Bloat","text":"<p>From Anthropic's engineering research:</p> Setup Token Cost Impact 5 servers ~55K Before any conversation 10+ servers 100K+ Context nearly exhausted Tool calls N loops Expensive LLM deliberation <p>\"When agents connect to thousands of tools, they must process hundreds of thousands of tokens before even reading user requests.\"</p>"},{"location":"other/ideas/why-onetool-source/#vibe-coding","title":"Vibe Coding","text":"<p>Collins Dictionary's 2025 Word of the Year - Andrej Karpathy's term for accepting code \"that looks roughly right.\"</p> <p>Adoption: 92% of US developers use AI daily. 41% of code globally is AI-generated.</p> <p>Reality: UK study of 120 firms found 41% more debugging time at scale. The \"Day 2\" problem - maintaining AI-generated systems - remains unsolved. Inconsistent architecture, stale embeddings, and security vulnerabilities compound.</p> <p>MIT Technology Review: The industry is shifting from vibe coding to agentic engineering.</p>"},{"location":"other/ideas/why-onetool-source/#the-evidence","title":"The Evidence","text":""},{"location":"other/ideas/why-onetool-source/#benchmark-package-version-lookup","title":"Benchmark: Package Version Lookup","text":"<p>Comparison across approaches - baseline, single MCP, multiple MCP servers, and OneTool:</p> <pre><code>\u256d\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 Task                     \u2502    in \u2502 out \u2502 tools \u2502 time \u2502  cost \u2502 result \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 compare:base             \u2502    68 \u2502 573 \u2502     0 \u2502   6s \u2502 0.18\u00a2 \u2502      5 \u2502\n\u2502 compare:mcp              \u2502  4263 \u2502 608 \u2502     2 \u2502  10s \u2502 0.40\u00a2 \u2502    100 \u2502\n\u2502 compare:multiple-mcp:ask \u2502 24681 \u2502 421 \u2502     2 \u2502  13s \u2502 1.36\u00a2 \u2502    100 \u2502\n\u2502 compare:multiple-mcp     \u2502 46522 \u2502 509 \u2502     3 \u2502  13s \u2502 2.48\u00a2 \u2502    100 \u2502\n\u2502 compare:onetool          \u2502  1927 \u2502 436 \u2502     1 \u2502   9s \u2502 0.23\u00a2 \u2502    100 \u2502\n\u2502 compare:onetool-proxy    \u2502  2760 \u2502 516 \u2502     1 \u2502  11s \u2502 0.29\u00a2 \u2502    100 \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> <p>Key findings: - Multiple MCP servers: 46K tokens before conversation starts - OneTool: 1.9K tokens, 100% accuracy, lowest cost, fastest time - Token reduction: 24x fewer tokens than multiple-MCP approach</p>"},{"location":"other/ideas/why-onetool-source/#anthropics-research","title":"Anthropic's Research","text":"<p>From Code Execution with MCP:</p> <p>\"Token usage dropped from 150,000 to 2,000 tokens when presenting tools as code APIs.\"</p> <p>98.7% reduction-exactly what OneTool implements.</p> <p>From Advanced Tool Use:</p> Approach Token Cost All tools loaded ~77K Tool Search Tool ~8.7K OneTool (1 tool) ~2K"},{"location":"other/ideas/why-onetool-source/#how-onetool-works","title":"How OneTool Works","text":""},{"location":"other/ideas/why-onetool-source/#architecture","title":"Architecture","text":"<pre><code>Traditional MCP:\n  Load tools (55K) \u2192 Reason \u2192 Call tool \u2192 Reason \u2192 Return\n  Total: ~150K tokens, 5+ reasoning loops\n\nOneTool:\n  run request \u2192 Execute Python \u2192 Return\n  Total: ~2K tokens, 1 call\n</code></pre>"},{"location":"other/ideas/why-onetool-source/#code-execution-flow","title":"Code Execution Flow","text":"<pre><code>Input \u2192 Strip Fences \u2192 Expand Snippets \u2192 Resolve Aliases \u2192 AST Parse \u2192 Validate \u2192 Execute\n</code></pre> <p>Fence stripping: Handles <code>code</code>, backticks, and raw Python.</p> <p>Packs: Tools declare <code>pack = \"brave\"</code> for <code>brave.search()</code> access.</p> <p>Aliases: <code>ws(query=\"AI\")</code> \u2192 <code>brave.search(query=\"AI\")</code></p> <p>Snippets: Jinja2 templates for reusable patterns.</p>"},{"location":"other/ideas/why-onetool-source/#security","title":"Security","text":"<p>AST-based validation before execution:</p> Pattern Action <code>exec()</code>, <code>eval()</code>, <code>compile()</code> Blocked <code>subprocess.*</code>, <code>os.system</code> Blocked <code>open()</code>, <code>pickle.load()</code> Warning <p>Validation runs before any code executes - no sandbox escapes possible.</p>"},{"location":"other/ideas/why-onetool-source/#tool-discovery","title":"Tool Discovery","text":"<p>Static AST analysis of <code>src/ot_tools/*.py</code>:</p> <ol> <li>Parse with <code>ast.parse()</code>-no code runs</li> <li>Extract signatures, docstrings, type hints</li> <li>Cache by file mtime for fast restarts</li> </ol> <p>Benefits: No execution risk, instant startup, hot reload.</p>"},{"location":"other/ideas/why-onetool-source/#the-five-clis","title":"The Five CLIs","text":""},{"location":"other/ideas/why-onetool-source/#ot-mcp-server","title":"<code>ot</code> - MCP Server","text":"<p>The core: one <code>run</code> tool executes any Python code. Drop files in <code>tools/</code>, they're available immediately. Proxies other MCP servers through the efficient execution model.</p> <pre><code>ot                              # Start server\n</code></pre>"},{"location":"other/ideas/why-onetool-source/#ot-bench-benchmark-harness","title":"<code>ot-bench</code> - Benchmark Harness","text":"<p>Real LLM + MCP testing. Define tasks in YAML, get objective metrics: token counts, costs, accuracy, timing.</p> <ul> <li>Deterministic matching: exact strings, regex</li> <li>LLM-as-judge: semantic correctness</li> <li>Direct tasks: invoke tools without LLM</li> </ul> <pre><code>ot-bench run examples/bench/package_version.yaml\n</code></pre>"},{"location":"other/ideas/why-onetool-source/#ot-browse-browser-inspector","title":"<code>ot-browse</code> - Browser Inspector","text":"<p>Captures pages as structured data for LLM consumption: HTML, screenshots, accessibility trees, annotations.</p> <ul> <li>Task-based INDEX.md: tells LLMs which file to read</li> <li>Large file warnings: suggests filtering for 100KB+ files</li> <li>Line numbers: precise references into page.html</li> </ul> <pre><code>ot-browse https://example.com\n</code></pre>"},{"location":"other/ideas/why-onetool-source/#built-in-tools","title":"Built-in Tools","text":""},{"location":"other/ideas/why-onetool-source/#web-content-extraction","title":"<code>web</code> - Content Extraction","text":"<pre><code>web.fetch(url)                  # Markdown output\nweb.fetch_batch(urls)           # Concurrent fetching\n</code></pre> <p>Based on trafilatura. Output formats: markdown/text/json.</p>"},{"location":"other/ideas/why-onetool-source/#brave-web-search","title":"<code>brave</code> - Web Search","text":"<pre><code>brave.search(query)             # Web\nbrave.news(query)               # News\nbrave.local(query)              # Local businesses\nbrave.search_batch(queries)     # Concurrent\n</code></pre> <p>Query validation (400 char / 50 word limits). Based on brave-search-mcp-server.</p>"},{"location":"other/ideas/why-onetool-source/#context7-library-documentation","title":"<code>context7</code> - Library Documentation","text":"<pre><code>context7.search(query)          # Find libraries\ncontext7.doc(library_key)       # Get docs\n</code></pre> <p>Normalizes keys: <code>\"vercel/next.js\"</code>, <code>/vercel/next.js</code>, GitHub URLs, <code>next.js</code>. Based on context7.</p>"},{"location":"other/ideas/why-onetool-source/#code-semantic-search","title":"<code>code</code> - Semantic Search","text":"<pre><code>code.search(query)              # Natural language code search\ncode.status(project)            # Index info\n</code></pre> <p>Uses ChunkHound indexes + LanceDB. Requires <code>OT_OPENAI_API_KEY</code>.</p>"},{"location":"other/ideas/why-onetool-source/#package-version-management","title":"<code>package</code> - Version Management","text":"<pre><code>package.npm([\"react\", \"vue\"])   # npm versions\npackage.pypi([\"requests\"])      # PyPI versions\npackage.models(query=\"claude\")  # OpenRouter models\npackage.version(registry, pkgs) # Unified, parallel\n</code></pre> <p>No API key required. Based on mcp-package-version.</p>"},{"location":"other/ideas/why-onetool-source/#page-browser-captures","title":"<code>page</code> - Browser Captures","text":"<pre><code>page.annotations(session, capture)   # Get selectors\npage.accessibility(session, capture) # Filter tree\npage.diff(session, cap1, cap2)       # Compare captures\n</code></pre> <p>Streams large files, filters 258KB accessibility trees to &lt;10KB.</p>"},{"location":"other/ideas/why-onetool-source/#llm-data-transformation","title":"<code>llm</code> - Data Transformation","text":"<pre><code>llm.transform(input, prompt)    # LLM processing\n</code></pre> <p>Extract structured data, convert formats, parse natural language.</p>"},{"location":"other/ideas/why-onetool-source/#key-technical-features","title":"Key Technical Features","text":""},{"location":"other/ideas/why-onetool-source/#token-and-cost-tracking","title":"Token and Cost Tracking","text":"<p>Every operation logs: - <code>input_tokens</code>, <code>output_tokens</code>, <code>total_tokens</code> - <code>cost_usd</code> from dynamic OpenRouter pricing - LogSpan timing with duration</p>"},{"location":"other/ideas/why-onetool-source/#result-capture","title":"Result Capture","text":"<p>The <code>run()</code> tool captures results from any Python: - Single expressions: returned directly - Multi-statement blocks: last expression captured - Explicit <code>return</code>: works in code blocks</p>"},{"location":"other/ideas/why-onetool-source/#input-normalization","title":"Input Normalization","text":"<p>Tools handle messy LLM outputs: - context7: Multiple key formats normalized - brave: Query limits validated before API call - package: Parallel fetching for batches</p>"},{"location":"other/ideas/why-onetool-source/#extensibility","title":"Extensibility","text":"<pre><code># tools/mytool.py\npack = \"mytool\"\n\ndef myfunction(*, arg: str) -&gt; str:\n    \"\"\"Description shown to LLM.\"\"\"\n    return f\"Result: {arg}\"\n</code></pre> <p>Drop a file, tool is available. No registration, no config.</p>"},{"location":"other/ideas/why-onetool-source/#conclusion","title":"Conclusion","text":"<p>OneTool exists because MCP doesn't scale:</p> Problem OneTool Solution Tool enumeration One tool, code execution Context rot ~2K tokens vs 150K Vibe coding OpenSpec integration Tool sprawl Auto-discovery, drop-in files No package manager Drop-in tool files No rigorous testing <code>ot-bench</code> with LLM-as-judge <p>The industry is shifting from vibe coding to agentic engineering. OneTool is built for that future.</p>"},{"location":"other/ideas/why-onetool-source/#references","title":"References","text":""},{"location":"other/ideas/why-onetool-source/#anthropic-engineering","title":"Anthropic Engineering","text":"<ul> <li>Code Execution with MCP - 98.7% token reduction</li> <li>Advanced Tool Use - 85% reduction with tool search</li> <li>Effective Context Engineering - Context budget management</li> </ul>"},{"location":"other/ideas/why-onetool-source/#research","title":"Research","text":"<ul> <li>Context Rot - Chroma Research</li> <li>Vibe Coding Statistics 2026 - Second Talent</li> </ul>"},{"location":"other/ideas/why-onetool-source/#industry-analysis","title":"Industry Analysis","text":"<ul> <li>From Vibe Coding to Context Engineering - MIT Technology Review</li> <li>5 Key Trends Shaping Agentic Development in 2026 - The New Stack</li> <li>6 Challenges of Using MCP - Merge</li> </ul>"},{"location":"other/ideas/why-onetool-source/#appendix-ai-coding-in-2026","title":"Appendix: AI Coding in 2026","text":"<p>Supplementary context on industry trends. The main document is self-contained.</p>"},{"location":"other/ideas/why-onetool-source/#vibe-coding-evolution","title":"Vibe Coding Evolution","text":"<p>By 2026, vibe coding means continuous co-design: start with fuzzy intent, refine via dialogue. Agentic tools hook into monorepos, observability, and architecture docs to propose plans, edit code, and open PRs.</p> <p>The shift: from \"write a React component\" to \"reduce checkout friction on mobile under 3 taps.\"</p>"},{"location":"other/ideas/why-onetool-source/#llm-capabilities-in-production","title":"LLM Capabilities in Production","text":"<p>Normal now: High-quality code generation, autonomous refactoring, agents in IDEs and CI.</p> <p>Still challenging: Unusual stacks, bespoke domain logic, evaluation at scale.</p> <p>Organisations invest equally in guardrails and evaluation as in models.</p>"},{"location":"other/ideas/why-onetool-source/#engineering-roles","title":"Engineering Roles","text":"<p>Engineers are becoming orchestrators: specify outcomes, manage agents, perform high-signal review.</p> <p>New roles: AI software architect, agent ops engineer, domain-deep product engineers.</p>"},{"location":"other/ideas/why-onetool-source/#context-rot-in-practice","title":"Context Rot in Practice","text":"<ul> <li>Stale embeddings suggest deleted code</li> <li>Out-of-date specs lead agents astray</li> <li>Infrastructure drift from unsupervised changes</li> </ul> <p>Teams run \"context hygiene\" tasks to prune dead references.</p>"},{"location":"other/ideas/why-onetool-source/#practical-moves","title":"Practical Moves","text":"<ol> <li>Treat vibe coding as spec design, not magic</li> <li>Build guardrails before scaling agents</li> <li>Make docs and embeddings first-class with versioning</li> <li>Train engineers to interrogate AI outputs</li> <li>Plan for agent-native infrastructure</li> </ol> <p>Analysis completed: 2026-01-04</p>"},{"location":"other/ideas/write-ideas/","title":"Writing Ideas","text":""},{"location":"other/ideas/write-ideas/#mcp-is-dead-long-live-mcp","title":"MCP is Dead, Long live MCP","text":"<ul> <li> <p>Vibe Coding vs Agentic Engineering</p> </li> <li> <p>Agentic Engineering</p> </li> <li>Specification driven development</li> <li>Automatec tests</li> <li>Code review</li> <li>Plus engineering experience</li> </ul>"},{"location":"other/ideas/write-ideas/#a-brief-history-of-software-engineering","title":"A Brief History of Software Engineering","text":""},{"location":"other/ideas/write-ideas/#1940s-1950s-machine-code-assembly","title":"1940s-1950s: Machine Code &amp; Assembly","text":"<ul> <li>Programmers wrote raw binary or assembly instructions</li> <li>Programs were hardware-specific, tedious to write</li> <li>ENIAC (1945) required physical rewiring to \"program\"</li> </ul>"},{"location":"other/ideas/write-ideas/#1950s-1960s-high-level-languages","title":"1950s-1960s: High-Level Languages","text":"<ul> <li>FORTRAN (1957), COBOL, LISP emerged</li> <li>Abstracted away hardware details</li> <li>Compilers translated human-readable code to machine code</li> <li>Birth of \"software engineering\" as a term (1968 NATO conference)</li> </ul>"},{"location":"other/ideas/write-ideas/#1970s-structured-programming-unix","title":"1970s: Structured Programming &amp; Unix","text":"<ul> <li>C language (1972) enabled portable systems programming</li> <li>Unix philosophy: small tools, composability</li> <li>Waterfall methodology dominated</li> </ul>"},{"location":"other/ideas/write-ideas/#1980s-personal-computing-oop","title":"1980s: Personal Computing &amp; OOP","text":"<ul> <li>PCs brought programming to the masses</li> <li>Object-oriented programming (Smalltalk, C++) changed design thinking</li> <li>Version control emerged (RCS, CVS)</li> </ul>"},{"location":"other/ideas/write-ideas/#1990s-the-internet-era","title":"1990s: The Internet Era","text":"<ul> <li>World Wide Web (1991) transformed software distribution</li> <li>Java \"write once, run anywhere\" (1995)</li> <li>Open source movement accelerated (Linux, Apache)</li> <li>Dynamic languages (Python, PHP, JavaScript)</li> </ul>"},{"location":"other/ideas/write-ideas/#2000s-agile-web-20","title":"2000s: Agile &amp; Web 2.0","text":"<ul> <li>Agile Manifesto (2001) rejected waterfall rigidity</li> <li>Iterative development, continuous feedback</li> <li>Cloud computing began (AWS 2006)</li> <li>Git (2005) revolutionized collaboration</li> </ul>"},{"location":"other/ideas/write-ideas/#2007-2015-mobile-devops","title":"2007-2015: Mobile &amp; DevOps","text":"<ul> <li>iPhone (2007) created new platform paradigm</li> <li>App stores changed distribution</li> <li>DevOps merged development and operations</li> <li>Continuous integration/deployment became standard</li> </ul>"},{"location":"other/ideas/write-ideas/#2010s-cloud-native-microservices","title":"2010s: Cloud-Native &amp; Microservices","text":"<ul> <li>Containerization (Docker 2013)</li> <li>Infrastructure as code</li> <li>Serverless computing</li> </ul>"},{"location":"other/ideas/write-ideas/#2020s-ai-assisted-agentic-engineering","title":"2020s: AI-Assisted &amp; Agentic Engineering","text":"<ul> <li>GitHub Copilot (2021) brought AI to coding</li> <li>LLMs enabled natural language programming</li> <li>Agentic Engineering (2024+): AI agents autonomously execute multi-step tasks\u2014reading code, running tests, making commits</li> <li>Engineers shift from writing every line to directing, reviewing, and architecting</li> </ul>"},{"location":"other/ideas/write-ideas/#the-pattern","title":"The Pattern","text":"<p>Each era increased abstraction:</p> Transition Shift Machine code \u2192 Assembly symbolic names over binary Assembly \u2192 High-level languages algorithms over registers Procedural \u2192 OOP modeling over procedures Waterfall \u2192 Agile adaptive over predictive Writing code \u2192 Agentic intent over implementation <p>Agentic engineering is the next abstraction layer\u2014engineers express what they want, AI agents figure out how. The role evolves from typist to architect/reviewer, much like how compilers freed us from thinking in opcodes.</p>"},{"location":"other/ideas/write-ideas/#engineering-is-changing","title":"Engineering is changing","text":"<ul> <li>Engineers</li> <li>Capability - technical skills</li> <li>Clarity - ability to deliver value</li> </ul>"},{"location":"other/ideas/write-ideas/#onetool","title":"Onetool","text":"<ul> <li>Problems</li> <li>Context Rot</li> <li>Context Costs</li> <li> <p>Extra Calls</p> </li> <li> <p>Stop Context Rot, Costs and extra calls</p> </li> <li>Explicit Calls</li> <li>Config</li> <li>Tools</li> <li>Secrets management</li> <li>Prompts tweaks</li> <li>Code Centric</li> <li>Easy to extend</li> <li>Batteries included ... almost 100 tools</li> </ul> <p>Chart - Tools vs Context vs Max context</p> <p>References   - </p>"},{"location":"reference/cli/","title":"CLI Reference","text":"<p>Two CLIs. Serve and benchmark.</p> CLI Purpose <code>ot-serve</code> MCP server <code>ot-bench</code> Benchmark harness"},{"location":"reference/cli/#configuration","title":"Configuration","text":"<p>All CLIs follow a consistent configuration pattern:</p> CLI Env Var Default Path Fallback <code>ot-serve</code> <code>OT_SERVE_CONFIG</code> <code>.onetool/ot-serve.yaml</code> <code>~/.onetool/ot-serve.yaml</code>, then defaults <code>ot-bench</code> <code>OT_BENCH_CONFIG</code> <code>.onetool/ot-bench.yaml</code> Task file config <p>Resolution order:</p> <ol> <li>CLI flags (if provided)</li> <li>Environment variable (if set and file exists)</li> <li><code>.onetool/&lt;tool&gt;.yaml</code> (project config)</li> <li><code>~/.onetool/&lt;tool&gt;.yaml</code> (global config)</li> <li>Built-in defaults</li> </ol>"},{"location":"reference/cli/#common-options","title":"Common Options","text":"<p>All CLIs support:</p> <ul> <li><code>-v, --version</code> - Show version and exit</li> <li><code>--json</code> - Output as JSON (where applicable)</li> </ul>"},{"location":"reference/cli/ot-bench/","title":"ot-bench","text":"<p>Measure what matters. Tokens, cost, accuracy.</p> <p>Real LLM + MCP testing. Define tasks in YAML, get objective metrics: token counts, costs, accuracy scores, timing.</p>"},{"location":"reference/cli/ot-bench/#usage","title":"Usage","text":"<pre><code>ot-bench [COMMAND] [OPTIONS]\n</code></pre>"},{"location":"reference/cli/ot-bench/#commands","title":"Commands","text":""},{"location":"reference/cli/ot-bench/#run","title":"run","text":"<p>Run benchmark tasks from a YAML file.</p> <pre><code>ot-bench run FILE [OPTIONS]\n</code></pre>"},{"location":"reference/cli/ot-bench/#options","title":"Options","text":"Option Description <code>--tui</code> Interactive TUI for selecting benchmark files <code>--csv</code> Export results to CSV in <code>tmp/result-YYYYMMDD-HHMM.csv</code> <code>--scenario NAME</code> Run only scenarios matching NAME <code>--task NAME</code> Run only tasks matching NAME <code>--tag TAG</code> Run only tasks with matching tag <code>--verbose</code> Show detailed per-call metrics"},{"location":"reference/cli/ot-bench/#task-types","title":"Task Types","text":"Type Description <code>type: direct</code> Direct MCP tool invocation (no LLM) <code>type: harness</code> LLM benchmark with MCP servers (default)"},{"location":"reference/cli/ot-bench/#examples","title":"Examples","text":"<pre><code># Run feature benchmarks\nOT_CWD=demo ot-bench run demo/bench/features.yaml\n\n# Run specific tool benchmark\nOT_CWD=demo ot-bench run demo/bench/tool_brave_search.yaml\n</code></pre>"},{"location":"reference/cli/ot-bench/#benchmark-file-structure","title":"Benchmark File Structure","text":"<pre><code>defaults:\n  timeout: 60\n  model: openai/gpt-5-mini\n\nevaluators:\n  accuracy:\n    model: openai/gpt-5-mini\n    prompt: |\n      Evaluate this response.\n      Response: {response}\n      Return JSON: {\"score\": &lt;0-100&gt;, \"reason\": \"&lt;explanation&gt;\"}\n\nscenarios:\n  - name: Search Test\n    tasks:\n      - name: \"search:base\"\n        server:              # No server = baseline\n        evaluate: accuracy\n        prompt: \"Search for AI news\"\n\n      - name: \"search:onetool\"\n        server: onetool\n        evaluate: accuracy\n        prompt: |\n          __ot `brave.search(query=\"AI news\")`\n\nservers:\n  onetool:\n    type: stdio\n    command: uv\n    args: [\"run\", \"ot-serve\"]\n</code></pre>"},{"location":"reference/cli/ot-bench/#multi-prompt-tasks","title":"Multi-Prompt Tasks","text":"<p>Use <code>---PROMPT---</code> delimiter to split a task into sequential prompts. Each prompt completes its agentic loop before the next begins, with conversation history accumulating.</p> <pre><code>- name: multi-step-task\n  server: onetool\n  prompt: |\n    __ot\n    ```python\n    npm = package.version(registry=\"npm\", packages={\"express\": \"4.0.0\"})\n    ```\n    Return the latest version.\n    ---PROMPT---\n    __ot\n    ```python\n    pypi = package.version(registry=\"pypi\", packages={\"httpx\": \"0.20.0\"})\n    ```\n    Return the latest version.\n    ---PROMPT---\n    Summarize both versions as: \"express: [version], httpx: [version]\"\n</code></pre>"},{"location":"reference/cli/ot-bench/#configuration","title":"Configuration","text":"<p>Configuration file: <code>config/ot-bench.yaml</code> or <code>.onetool/ot-bench.yaml</code></p> Variable Description <code>OT_BENCH_CONFIG</code> Config file path override"},{"location":"reference/cli/ot-bench/#output","title":"Output","text":"<p>Benchmarks produce: - Token counts (input, output, total) - Cost estimates (USD) - Timing information - Evaluation scores</p>"},{"location":"reference/cli/ot-serve/","title":"ot-serve","text":"<p>The MCP server. One tool. Unlimited capabilities.</p> <p>Exposes a single <code>run</code> tool that executes Python code. Your LLM writes code; OneTool runs it.</p>"},{"location":"reference/cli/ot-serve/#usage","title":"Usage","text":"<pre><code>ot-serve [OPTIONS]\n</code></pre>"},{"location":"reference/cli/ot-serve/#options","title":"Options","text":"Option Description <code>-c, --config PATH</code> Path to ot-serve.yaml configuration file <code>-v, --version</code> Show version and exit"},{"location":"reference/cli/ot-serve/#commands","title":"Commands","text":""},{"location":"reference/cli/ot-serve/#init","title":"init","text":"<p>Initialize and manage global configuration in <code>~/.onetool/</code>.</p> <pre><code>ot-serve init [subcommand]\n</code></pre> <p>Running <code>ot-serve init</code> without a subcommand creates the global config directory.</p> Subcommand Description <code>reset</code> Reset global config to default templates (overwrites existing files) <code>validate</code> Validate all configuration files"},{"location":"reference/cli/ot-serve/#init-default","title":"init (default)","text":"<p>Creates the global config directory and copies template files if they don't already exist.</p> <pre><code>ot-serve init\n</code></pre>"},{"location":"reference/cli/ot-serve/#init-reset","title":"init reset","text":"<p>Overwrites existing config files in <code>~/.onetool/</code> with fresh templates. Use with caution.</p> <pre><code>ot-serve init reset        # Prompts for confirmation\not-serve init reset --force  # No confirmation\n</code></pre>"},{"location":"reference/cli/ot-serve/#init-validate","title":"init validate","text":"<p>Checks global and project config files for syntax and schema errors.</p> <pre><code>ot-serve init validate\n</code></pre>"},{"location":"reference/cli/ot-serve/#examples","title":"Examples","text":"<pre><code># Start MCP server (stdio)\not-serve\n\n# Use specific config\not-serve --config config/ot-serve.yaml\n</code></pre>"},{"location":"reference/cli/ot-serve/#configuration","title":"Configuration","text":"<p>Configuration file: <code>config/ot-serve.yaml</code> or <code>.onetool/ot-serve.yaml</code></p> <p>See Configuration Reference for full schema.</p>"},{"location":"reference/cli/ot-serve/#environment-variables","title":"Environment Variables","text":"Variable Description <code>OT_SERVE_CONFIG</code> Config file path override <code>OT_LOG_LEVEL</code> Log level (DEBUG/INFO/WARNING/ERROR) <code>OT_LOG_DIR</code> Log directory path"},{"location":"reference/cli/ot-serve/#how-it-works","title":"How It Works","text":"<ol> <li>Loads tools from <code>src/ot_tools/</code> via AST-based discovery</li> <li>Exposes a single <code>run</code> tool that executes Python code</li> <li>Communicates via stdio using the MCP protocol</li> </ol>"},{"location":"reference/cli/ot-serve/#tool-discovery","title":"Tool Discovery","text":"<p>Tools are discovered statically from <code>tools_dir</code> patterns in config:</p> <pre><code>tools_dir:\n  - src/ot_tools/*.py\n</code></pre> <p>Benefits: - No code execution during discovery - Instant startup - Hot reload support</p>"},{"location":"reference/tools/","title":"Tools Reference","text":"<p>12 packs. 55+ functions. Zero tool-selection overhead.</p> <p>Every function below is callable with a single <code>__ot</code> prefix. No JSON schemas, no tool discovery loops.</p>"},{"location":"reference/tools/#tool-index","title":"Tool Index","text":"Pack Description Documentation web Content extraction web-fetch.md brave Web, news, local search brave-search.md ground Google grounded search grounding-search.md context7 Library documentation context7.md code Semantic code search code-search.md ripgrep Fast text/regex search ripgrep.md llm Data transformation transform.md db Database queries database.md excel Excel manipulation excel.md convert Document to Markdown convert.md package Package versions package.md file File operations file.md diagram Diagram generation diagram.md ot Internal tools ot.md"},{"location":"reference/tools/#quick-reference","title":"Quick Reference","text":""},{"location":"reference/tools/#web-search","title":"Web &amp; Search","text":"<pre><code># Web content extraction\nweb.fetch(url=\"https://example.com\")\nweb.fetch_batch(urls=[\"url1\", \"url2\"])\n\n# Brave search\nbrave.search(query=\"AI news\", count=10)\nbrave.news(query=\"tech\", freshness=\"pd\")\nbrave.local(query=\"coffee near me\")\n\n# Google grounded search\nground.search(query=\"current weather\")\nground.dev(query=\"React hooks\")\n</code></pre>"},{"location":"reference/tools/#documentation-code","title":"Documentation &amp; Code","text":"<pre><code># Library docs\ncontext7.search(query=\"next.js routing\")\ncontext7.doc(library=\"/vercel/next.js\")\n\n# Code search\ncode.search(query=\"authentication handler\")\nripgrep.search(pattern=\"def.*async\", path=\"src/\")\n</code></pre>"},{"location":"reference/tools/#data-processing","title":"Data Processing","text":"<pre><code># LLM transformation\nllm.transform(input=data, prompt=\"extract emails\")\n\n# Database\ndb.tables(project=\"myapp\")\ndb.query(project=\"myapp\", sql=\"SELECT * FROM users\")\n\n# Excel\nexcel.read(path=\"data.xlsx\", sheet=\"Sheet1\")\nexcel.write(path=\"output.xlsx\", data=rows)\n</code></pre>"},{"location":"reference/tools/#document-conversion","title":"Document Conversion","text":"<pre><code># Convert documents to Markdown\nconvert.pdf(pattern=\"report.pdf\", output_dir=\"output\")\nconvert.word(pattern=\"doc.docx\", output_dir=\"output\")\nconvert.powerpoint(pattern=\"deck.pptx\", output_dir=\"output\")\nconvert.excel(pattern=\"data.xlsx\", output_dir=\"output\")\n\n# Auto-detect format\nconvert.auto(pattern=\"documents/*\", output_dir=\"converted\")\n</code></pre>"},{"location":"reference/tools/#package-management","title":"Package Management","text":"<pre><code>package.npm([\"react\", \"vue\"])\npackage.pypi([\"requests\", \"flask\"])\npackage.version(registry=\"npm\", packages={\"react\": \"^18.0.0\"})\n</code></pre>"},{"location":"reference/tools/#diagrams","title":"Diagrams","text":"<pre><code># Generate and render diagrams\ndiagram.generate_source(source=\"...\", provider=\"mermaid\", name=\"flow\")\ndiagram.render_diagram(source=\"...\", provider=\"mermaid\", name=\"flow\")\n\n# Get guidance\ndiagram.get_diagram_instructions(provider=\"mermaid\")\ndiagram.get_diagram_policy()\ndiagram.list_providers()\n\n# Batch rendering (self-hosted only)\ndiagram.batch_render(sources=[...])\ndiagram.render_directory(directory=\"./diagrams\")\n</code></pre>"},{"location":"reference/tools/#license-information","title":"License Information","text":"Tool License Web Fetch Apache 2.0 Brave Search MIT Grounding Search MIT Context7 MIT Code Search MIT Ripgrep MIT Transform MIT Database MPL 2.0 Excel MIT Convert MIT Package MIT Diagram MIT <p>Full license texts: licenses/</p>"},{"location":"reference/tools/brave-search/","title":"Brave Search","text":"<p>Five search types. Batch support. Query validation.</p> <p>Web, news, local, image, and video search via Brave Search API.</p>"},{"location":"reference/tools/brave-search/#highlights","title":"Highlights","text":"<ul> <li>Five search types: web, news, local, image, video</li> <li>Batch search with concurrent execution</li> <li>Query validation (400 char / 50 word limits)</li> <li>AI-generated summaries (Pro plan)</li> </ul>"},{"location":"reference/tools/brave-search/#functions","title":"Functions","text":"Function Description <code>brave.search(query, ...)</code> General web search <code>brave.news(query, ...)</code> News articles <code>brave.local(query, ...)</code> Local businesses/places <code>brave.image(query, ...)</code> Image search <code>brave.video(query, ...)</code> Video search <code>brave.search_batch(queries, ...)</code> Multiple searches concurrently <code>brave.summarize(query, ...)</code> AI-generated summary (Pro plan)"},{"location":"reference/tools/brave-search/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>query</code> str Search query (max 400 chars, 50 words) <code>count</code> int Results per query (1-20) <code>freshness</code> str \"pd\" (day), \"pw\" (week), \"pm\" (month), \"py\" (year) <code>safesearch</code> str \"off\", \"moderate\", \"strict\""},{"location":"reference/tools/brave-search/#requires","title":"Requires","text":"<ul> <li><code>OT_BRAVE_API_KEY</code> environment variable</li> </ul>"},{"location":"reference/tools/brave-search/#examples","title":"Examples","text":"<pre><code># Web search\nbrave.search(query=\"python async tutorial\", count=10)\n\n# News with freshness filter\nbrave.news(query=\"AI announcements\", freshness=\"pw\")\n\n# Local search\nbrave.local(query=\"coffee shops near Times Square\")\n\n# Batch search\nbrave.search_batch(queries=[\"react hooks\", \"vue composition api\"])\n\n# AI summary (Pro plan)\nbrave.summarize(query=\"latest developments in quantum computing\")\n</code></pre>"},{"location":"reference/tools/brave-search/#source","title":"Source","text":"<p>Brave Search API</p>"},{"location":"reference/tools/code-search/","title":"Code Search","text":"<p>Find code by meaning. Not just text.</p> <p>Semantic code search using ChunkHound indexes and DuckDB.</p>"},{"location":"reference/tools/code-search/#highlights","title":"Highlights","text":"<ul> <li>Natural language queries for code search</li> <li>Vector search via DuckDB vss extension</li> <li>Filter by language or project</li> <li>Provider/model filtering for embedding compatibility</li> </ul>"},{"location":"reference/tools/code-search/#functions","title":"Functions","text":"Function Description <code>code.search(query, ...)</code> Search code by meaning <code>code.status(project)</code> Check index status"},{"location":"reference/tools/code-search/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>query</code> str Natural language query (e.g., \"authentication logic\") <code>project</code> str Project name from config or path <code>language</code> str Filter by language (e.g., \"python\") <code>limit</code> int Max results (default: 10)"},{"location":"reference/tools/code-search/#requires","title":"Requires","text":"<ul> <li><code>OT_OPENAI_API_KEY</code> for embeddings</li> <li>Project indexed with <code>chunkhound index &lt;project&gt;</code></li> </ul>"},{"location":"reference/tools/code-search/#examples","title":"Examples","text":"<pre><code># Search by meaning\ncode.search(query=\"authentication logic\", project=\"myapp\")\n\n# Filter by language\ncode.search(query=\"database connection\", project=\"myapp\", language=\"python\")\n\n# Check index status\ncode.status(project=\"myapp\")\n</code></pre>"},{"location":"reference/tools/code-search/#source","title":"Source","text":"<p>ChunkHound | DuckDB</p>"},{"location":"reference/tools/context7/","title":"Context7","text":"<p>Up-to-date docs for any library. Flexible key formats.</p> <p>Library documentation search and retrieval with extensive key normalization.</p>"},{"location":"reference/tools/context7/#highlights","title":"Highlights","text":"<ul> <li>Flexible library key formats (org/repo, shorthand names, GitHub URLs)</li> <li>Topic normalization for path-like topics and kebab-case</li> <li>Auto-resolution of shorthand names via search</li> <li>Mode suggestions when no content found</li> </ul>"},{"location":"reference/tools/context7/#functions","title":"Functions","text":"Function Description <code>context7.search(query)</code> Search for libraries by name <code>context7.doc(library_key, ...)</code> Fetch documentation for a library"},{"location":"reference/tools/context7/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>library_key</code> str Library identifier - \"vercel/next.js\", \"next.js\", or GitHub URL <code>topic</code> str Focus area (optional, default: general docs) <code>mode</code> str \"info\" (default) for guides, \"code\" for API references <code>page</code> int Pagination (1-10)"},{"location":"reference/tools/context7/#requires","title":"Requires","text":"<ul> <li><code>OT_CONTEXT7_API_KEY</code> environment variable</li> </ul>"},{"location":"reference/tools/context7/#examples","title":"Examples","text":"<pre><code># Search for libraries\ncontext7.search(query=\"react state management\")\n\n# Fetch docs with flexible key format\ncontext7.doc(library_key=\"vercel/next.js\", topic=\"routing\")\ncontext7.doc(library_key=\"next.js\", mode=\"code\")\n\n# Use GitHub URL\ncontext7.doc(library_key=\"https://github.com/vercel/next.js\")\n</code></pre>"},{"location":"reference/tools/context7/#source","title":"Source","text":"<p>Context7 API</p>"},{"location":"reference/tools/context7/#based-on","title":"Based on","text":"<p>context7 by Upstash (MIT)</p>"},{"location":"reference/tools/convert/","title":"Convert","text":"<p>Transform documents to LLM-friendly Markdown.</p> <p>Convert PDF, Word, PowerPoint, and Excel documents to Markdown with LLM-optimised output. Each conversion produces two files: a pure content file with exact line numbers, and a separate TOC file with frontmatter and navigation.</p>"},{"location":"reference/tools/convert/#highlights","title":"Highlights","text":"<ul> <li>Two-file output: pure content + separate TOC with line numbers</li> <li>Parallel batch processing with glob patterns</li> <li>Diff-stable image naming using content hashes</li> <li>Format-specific features (PDF bookmarks, speaker notes, formulas)</li> </ul>"},{"location":"reference/tools/convert/#functions","title":"Functions","text":"Function Description <code>convert.pdf(pattern, output_dir)</code> Convert PDF documents to Markdown <code>convert.word(pattern, output_dir)</code> Convert Word documents (.docx) to Markdown <code>convert.powerpoint(pattern, output_dir, include_notes)</code> Convert PowerPoint presentations (.pptx) to Markdown <code>convert.excel(pattern, output_dir, include_formulas)</code> Convert Excel spreadsheets (.xlsx) to Markdown <code>convert.auto(pattern, output_dir)</code> Auto-detect format and convert"},{"location":"reference/tools/convert/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>pattern</code> str Glob pattern for input files (e.g., <code>docs/*.pdf</code>, <code>**/*.docx</code>) <code>output_dir</code> str Directory for output Markdown files and images <code>include_notes</code> bool Include speaker notes in PowerPoint conversion <code>include_formulas</code> bool Include cell formulas in Excel conversion"},{"location":"reference/tools/convert/#output-format","title":"Output Format","text":"<p>Each conversion produces two files:</p>"},{"location":"reference/tools/convert/#main-content-file-namemd","title":"Main Content File (<code>{name}.md</code>)","text":"<p>Pure content starting at line 1 - no frontmatter or TOC. This ensures line numbers in the TOC are exact.</p>"},{"location":"reference/tools/convert/#toc-file-nametocmd","title":"TOC File (<code>{name}.toc.md</code>)","text":"<p>A separate file with frontmatter and table of contents:</p> <pre><code>---\nsource: path/to/document.pdf\nconverted: 2026-01-20T10:30:00Z\npages: 15\nchecksum: sha256:abc123...\n---\n\n# Table of Contents\n\n**Document:** [document.md](document.md)\n\n## How to Use This TOC\n\nEach entry shows `(lines &lt;start&gt;-&lt;end&gt;)` for the main document.\nTo read a section efficiently:\n\n1. Find the section you need below\n2. Use the line range to read only that portion of [document.md](document.md)\n3. Line numbers are exact - no offset needed\n\n---\n\n## Contents\n\n- [Introduction](document.md#introduction) (lines 1-50)\n  - [Background](document.md#background) (lines 15-30)\n- [Results](document.md#results) (lines 51-100)\n</code></pre>"},{"location":"reference/tools/convert/#diff-stable-images","title":"Diff-Stable Images","text":"<p>Images are named using content hashes (<code>img_abc123.png</code>) for stable diffs across regenerations.</p>"},{"location":"reference/tools/convert/#examples","title":"Examples","text":""},{"location":"reference/tools/convert/#converting-pdfs","title":"Converting PDFs","text":"<pre><code># Single file\nconvert.pdf(pattern=\"report.pdf\", output_dir=\"output\")\n\n# Batch conversion with glob\nconvert.pdf(pattern=\"docs/**/*.pdf\", output_dir=\"converted\")\n</code></pre>"},{"location":"reference/tools/convert/#converting-word-documents","title":"Converting Word Documents","text":"<pre><code># Single document\nconvert.word(pattern=\"spec.docx\", output_dir=\"output\")\n\n# All Word docs in folder\nconvert.word(pattern=\"documents/*.docx\", output_dir=\"md\")\n</code></pre>"},{"location":"reference/tools/convert/#converting-powerpoint","title":"Converting PowerPoint","text":"<pre><code># Basic conversion\nconvert.powerpoint(pattern=\"deck.pptx\", output_dir=\"output\")\n\n# Include speaker notes\nconvert.powerpoint(\n    pattern=\"presentations/*.pptx\",\n    output_dir=\"output\",\n    include_notes=True\n)\n</code></pre>"},{"location":"reference/tools/convert/#converting-excel","title":"Converting Excel","text":"<pre><code># Basic conversion (values only)\nconvert.excel(pattern=\"data.xlsx\", output_dir=\"output\")\n\n# Include formulas\nconvert.excel(\n    pattern=\"spreadsheets/*.xlsx\",\n    output_dir=\"output\",\n    include_formulas=True\n)\n</code></pre>"},{"location":"reference/tools/convert/#auto-detection","title":"Auto-Detection","text":"<pre><code># Convert all supported formats\nconvert.auto(pattern=\"documents/*\", output_dir=\"converted\")\n\n# Recursive with mixed formats\nconvert.auto(pattern=\"input/**/*\", output_dir=\"output\")\n</code></pre>"},{"location":"reference/tools/convert/#supported-formats","title":"Supported Formats","text":"Format Extension Converter PDF <code>.pdf</code> PyMuPDF (fitz) Word <code>.docx</code> python-docx PowerPoint <code>.pptx</code> python-pptx Excel <code>.xlsx</code> openpyxl"},{"location":"reference/tools/convert/#features-by-format","title":"Features by Format","text":""},{"location":"reference/tools/convert/#pdf","title":"PDF","text":"<ul> <li>Lazy page loading for memory efficiency</li> <li>Outline-based heading extraction (uses PDF bookmarks)</li> <li>Falls back to \"Page N\" headers if no outline</li> <li>Image extraction with soft-mask transparency support</li> </ul>"},{"location":"reference/tools/convert/#word","title":"Word","text":"<ul> <li>Heading style detection (Heading 1-6)</li> <li>Table conversion to Markdown</li> <li>Inline image extraction</li> <li>Bold, italic, underline formatting</li> </ul>"},{"location":"reference/tools/convert/#powerpoint","title":"PowerPoint","text":"<ul> <li>Slide titles as H2 headers</li> <li>Bullet point detection</li> <li>Table conversion</li> <li>Image extraction</li> <li>Optional speaker notes</li> </ul>"},{"location":"reference/tools/convert/#excel","title":"Excel","text":"<ul> <li>Sheet-based sections</li> <li>Streaming for large files</li> <li>Markdown table formatting</li> <li>Optional formula extraction</li> </ul>"},{"location":"reference/tools/convert/#batch-processing","title":"Batch Processing","text":"<p>All converters support glob patterns and process multiple files in parallel:</p> <pre><code># Process all PDFs in parallel\nconvert.pdf(pattern=\"archive/**/*.pdf\", output_dir=\"output\")\n# Converted 25 files, 0 failed\n# Outputs:\n#   output/report1.md + output/report1.toc.md\n#   output/report2.md + output/report2.toc.md\n#   ...\n</code></pre>"},{"location":"reference/tools/convert/#source","title":"Source","text":"<p>PyMuPDF | python-docx | python-pptx | openpyxl</p>"},{"location":"reference/tools/database/","title":"Database","text":"<p>Any SQL database. Three functions. LLM-friendly output.</p> <p>Database introspection and query execution via SQLAlchemy. Supports any SQLAlchemy-compatible database (PostgreSQL, MySQL, SQLite, Oracle, MS SQL Server, etc.).</p>"},{"location":"reference/tools/database/#highlights","title":"Highlights","text":"<ul> <li>Connection pooling with automatic health checks</li> <li>Vertical result formatting optimized for LLM consumption</li> <li>Parameterized queries for safe SQL execution</li> <li>Large results truncated at 4000 characters</li> <li>Per-URL connection pools with 1-hour recycling</li> </ul>"},{"location":"reference/tools/database/#functions","title":"Functions","text":"Function Description <code>db.tables(db_url, ...)</code> List table names in the database <code>db.schema(table_names, db_url)</code> Get schema definitions for tables <code>db.query(sql, db_url, ...)</code> Execute SQL and return formatted results"},{"location":"reference/tools/database/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>db_url</code> str SQLAlchemy connection string (required) <code>filter</code> str Substring to filter table names (tables only) <code>table_names</code> list[str] Tables to inspect (schema only) <code>params</code> dict Query parameters for safe substitution (query only)"},{"location":"reference/tools/database/#examples","title":"Examples","text":"<pre><code># Get database URL from project config\ndb_url = proj.attr(\"myproject\", \"db_url\")\n\n# List all tables\ndb.tables(db_url=db_url)\n\n# Filter tables\ndb.tables(db_url=db_url, filter=\"user\")\n\n# Get schema for tables\ndb.schema([\"users\", \"orders\"], db_url=db_url)\n\n# Execute queries (parameterized for safety)\ndb.query(\"SELECT * FROM users LIMIT 5\", db_url=db_url)\ndb.query(\n    \"SELECT * FROM users WHERE status = :status\",\n    db_url=db_url,\n    params={\"status\": \"active\"}\n)\n</code></pre>"},{"location":"reference/tools/database/#source","title":"Source","text":"<p>SQLAlchemy Documentation</p>"},{"location":"reference/tools/database/#based-on","title":"Based on","text":"<p>mcp-alchemy by Rui Machado (MPL-2.0)</p>"},{"location":"reference/tools/diagram/","title":"Diagram","text":"<p>Professional diagrams from text descriptions. No ASCII art.</p> <p>Generates and renders diagrams using Kroki as the unified backend, supporting Mermaid, PlantUML, D2, and 25+ other diagram types.</p>"},{"location":"reference/tools/diagram/#highlights","title":"Highlights","text":"<ul> <li>Two-stage pipeline (generate source, then render)</li> <li>Config-driven instructions and templates</li> <li>Policy rules for LLM guidance</li> <li>Batch operations for self-hosted backends</li> <li>Playground URL generation for debugging</li> </ul>"},{"location":"reference/tools/diagram/#two-stage-pipeline","title":"Two-Stage Pipeline","text":"Function Description <code>diagram.generate_source(source, provider, name)</code> Save source for review <code>diagram.render_diagram(source, provider, name)</code> Render via Kroki <code>diagram.get_render_status(task_id)</code> Check async render progress"},{"location":"reference/tools/diagram/#batch-operations-self-hosted-only","title":"Batch Operations (Self-Hosted Only)","text":"Function Description <code>diagram.batch_render(sources)</code> Render multiple diagrams concurrently <code>diagram.render_directory(directory)</code> Render all source files in a directory"},{"location":"reference/tools/diagram/#configuration-tools","title":"Configuration Tools","text":"Function Description <code>diagram.get_diagram_policy()</code> Get policy rules for diagram generation <code>diagram.get_diagram_instructions(provider)</code> Get provider-specific guidance <code>diagram.get_output_config()</code> Get output settings <code>diagram.get_template(name)</code> Load a named template <code>diagram.list_providers(focus_only)</code> List available providers"},{"location":"reference/tools/diagram/#utility-tools","title":"Utility Tools","text":"Function Description <code>diagram.get_playground_url(source, provider)</code> Get interactive editor URL"},{"location":"reference/tools/diagram/#focus-providers","title":"Focus Providers","text":"<ul> <li>Mermaid: Flowcharts, sequences, state diagrams, Gantt, mindmaps</li> <li>PlantUML: UML diagrams, C4 architecture (via stdlib)</li> <li>D2: Modern architecture diagrams with auto-layout</li> </ul> <p>All 28+ Kroki providers are available for advanced use.</p>"},{"location":"reference/tools/diagram/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>source</code> str Diagram source code <code>provider</code> str mermaid, plantuml, d2, graphviz, etc. <code>output_format</code> str svg (default), png, pdf <code>output_dir</code> str Override default output directory <code>async_mode</code> bool Return task ID for status polling"},{"location":"reference/tools/diagram/#examples","title":"Examples","text":"<pre><code># Generate source for review\ndiagram.generate_source(\n    source=\"graph TD\\n  A --&gt; B\",\n    provider=\"mermaid\",\n    name=\"flow\"\n)\n\n# Render diagram\ndiagram.render_diagram(\n    source=\"graph TD\\n  A --&gt; B\",\n    provider=\"mermaid\",\n    name=\"flow\"\n)\n\n# Get playground URL for debugging\ndiagram.get_playground_url(source=\"graph TD\\n  A --&gt; B\", provider=\"mermaid\")\n\n# List available providers\ndiagram.list_providers(focus_only=True)\n</code></pre>"},{"location":"reference/tools/diagram/#configuration","title":"Configuration","text":"<p>Add to <code>ot-serve.yaml</code>:</p> <pre><code>tools:\n  diagram:\n    backend:\n      prefer: remote  # remote | self_hosted | auto\n    output:\n      dir: ../diagrams  # Relative to config dir\n      default_format: svg\n</code></pre> <p>Or use <code>include:</code> to load from a shared config file:</p> <pre><code>include:\n  - diagram.yaml  # Falls back to global or bundled defaults\n</code></pre>"},{"location":"reference/tools/diagram/#self-hosted-setup","title":"Self-Hosted Setup","text":"<p>For batch operations or high-volume rendering, use the Kroki docker-compose from kroki.io:</p> <pre><code># Download Kroki docker-compose\ncurl -LO https://raw.githubusercontent.com/yuzutech/kroki/main/docker-compose.yml\n\n# Start Kroki\ndocker compose up -d\n</code></pre> <p>Then configure <code>ot-serve.yaml</code>:</p> <pre><code>tools:\n  diagram:\n    backend:\n      prefer: self_hosted\n      self_hosted_url: http://localhost:8000\n</code></pre>"},{"location":"reference/tools/diagram/#source","title":"Source","text":"<p>Kroki | Mermaid | PlantUML | D2</p>"},{"location":"reference/tools/excel/","title":"Excel","text":"<p>25 functions. Tables, formulas, structure. Full spreadsheet control.</p> <p>Excel file manipulation using openpyxl. Create, read, write workbooks, apply formulas, manage tables, and inspect spreadsheet structure.</p>"},{"location":"reference/tools/excel/#highlights","title":"Highlights","text":"<ul> <li>25 functions covering all spreadsheet operations</li> <li>Table operations with dictionary-based data access</li> <li>Pure cell range functions (no file I/O required)</li> <li>JSON-formatted output for LLM consumption</li> <li>Auto-creates parent directories on workbook creation</li> <li>Auto-prepends <code>=</code> to formulas if missing</li> </ul>"},{"location":"reference/tools/excel/#core-operations","title":"Core Operations","text":"Function Description <code>excel.create(filepath, sheet_name)</code> Create new Excel workbook <code>excel.add_sheet(filepath, sheet_name)</code> Add worksheet to existing workbook <code>excel.read(filepath, sheet_name, start_cell, end_cell)</code> Read data from worksheet <code>excel.write(filepath, data, sheet_name, start_cell)</code> Write data to worksheet <code>excel.info(filepath, include_ranges)</code> Get workbook metadata <code>excel.formula(filepath, cell, formula, sheet_name)</code> Apply Excel formula to cell"},{"location":"reference/tools/excel/#range-manipulation-pure-functions","title":"Range Manipulation (Pure Functions)","text":"Function Description <code>excel.cell_range(cell, right, down, left, up)</code> Expand a cell into a range <code>excel.cell_shift(cell, rows, cols)</code> Shift a cell reference by offset"},{"location":"reference/tools/excel/#search","title":"Search","text":"Function Description <code>excel.search(filepath, pattern, sheet_name, regex, first_only)</code> Search for values matching pattern"},{"location":"reference/tools/excel/#table-operations","title":"Table Operations","text":"Function Description <code>excel.tables(filepath, sheet_name)</code> List all defined tables <code>excel.table_info(filepath, table_name, sheet_name)</code> Get detailed table information <code>excel.table_data(filepath, table_name, row_index, sheet_name)</code> Get table data as dicts <code>excel.create_table(filepath, data_range, table_name, sheet_name)</code> Create native Excel table"},{"location":"reference/tools/excel/#structure-manipulation","title":"Structure Manipulation","text":"Function Description <code>excel.insert_rows(filepath, row, count, sheet_name)</code> Insert rows at position <code>excel.delete_rows(filepath, row, count, sheet_name)</code> Delete rows at position <code>excel.insert_cols(filepath, col, count, sheet_name)</code> Insert columns at position <code>excel.delete_cols(filepath, col, count, sheet_name)</code> Delete columns at position <code>excel.copy_range(filepath, source, target, sheet_name, target_sheet)</code> Copy range to location"},{"location":"reference/tools/excel/#extended-inspection","title":"Extended Inspection","text":"Function Description <code>excel.sheets(filepath)</code> List all sheets with visibility <code>excel.used_range(filepath, sheet_name)</code> Get used range of worksheet <code>excel.formulas(filepath, sheet_name)</code> List all formula cells <code>excel.hyperlinks(filepath, sheet_name)</code> List all hyperlinks <code>excel.merged_cells(filepath, sheet_name)</code> List merged cell ranges <code>excel.named_ranges(filepath)</code> List all named ranges"},{"location":"reference/tools/excel/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>filepath</code> str Path to Excel file (required) <code>sheet_name</code> str Target sheet (default: active sheet) <code>data</code> list[list] Rows for writing (list of lists) <code>start_cell</code> str Starting cell reference (default: \"A1\") <code>pattern</code> str Search pattern (wildcards or regex) <code>table_name</code> str Name for table operations"},{"location":"reference/tools/excel/#examples","title":"Examples","text":""},{"location":"reference/tools/excel/#basic-operations","title":"Basic Operations","text":"<pre><code># Create workbook with custom sheet\nexcel.create(filepath=\"output/report.xlsx\", sheet_name=\"Sales\")\n\n# Write data\nexcel.write(\n    filepath=\"output/report.xlsx\",\n    data=[[\"Product\", \"Revenue\"], [\"Widget\", 1000], [\"Gadget\", 2500]],\n    sheet_name=\"Sales\"\n)\n\n# Read data back\nexcel.read(filepath=\"output/report.xlsx\", sheet_name=\"Sales\")\n\n# Apply formula\nexcel.formula(filepath=\"output/report.xlsx\", cell=\"B4\", formula=\"=SUM(B2:B3)\")\n</code></pre>"},{"location":"reference/tools/excel/#range-manipulation","title":"Range Manipulation","text":"<pre><code># Expand A1 into a 6x11 range (no file needed)\nexcel.cell_range(cell=\"A1\", right=5, down=10)  # -&gt; \"A1:F11\"\n\n# Shift B3 down 5 rows and right 3 columns\nexcel.cell_shift(cell=\"B3\", rows=5, cols=3)  # -&gt; \"E8\"\n</code></pre>"},{"location":"reference/tools/excel/#tables","title":"Tables","text":"<pre><code># Create a table from data range\nexcel.create_table(filepath=\"data.xlsx\", data_range=\"A1:D10\", table_name=\"SalesData\")\n\n# Get table info\nexcel.table_info(filepath=\"data.xlsx\", table_name=\"SalesData\")\n\n# Read table data as dictionaries\nexcel.table_data(filepath=\"data.xlsx\", table_name=\"SalesData\")\n\n# Get single row by index\nexcel.table_data(filepath=\"data.xlsx\", table_name=\"SalesData\", row_index=0)\n</code></pre>"},{"location":"reference/tools/excel/#search_1","title":"Search","text":"<pre><code># Wildcard search\nexcel.search(filepath=\"data.xlsx\", pattern=\"Widget*\")\n\n# Regex search\nexcel.search(filepath=\"data.xlsx\", pattern=\"^ID-\\\\d+$\", regex=True)\n\n# First match only\nexcel.search(filepath=\"data.xlsx\", pattern=\"Error*\", first_only=True)\n</code></pre>"},{"location":"reference/tools/excel/#structure-manipulation_1","title":"Structure Manipulation","text":"<pre><code># Insert 3 rows at row 5\nexcel.insert_rows(filepath=\"data.xlsx\", row=5, count=3)\n\n# Delete column B and C\nexcel.delete_cols(filepath=\"data.xlsx\", col=\"B\", count=2)\n\n# Copy range to another location\nexcel.copy_range(filepath=\"data.xlsx\", source=\"A1:C10\", target=\"E1\")\n\n# Copy to different sheet\nexcel.copy_range(filepath=\"data.xlsx\", source=\"A1:C10\", target=\"A1\", target_sheet=\"Backup\")\n</code></pre>"},{"location":"reference/tools/excel/#inspection","title":"Inspection","text":"<pre><code># List all sheets\nexcel.sheets(filepath=\"report.xlsx\")\n\n# Get used range\nexcel.used_range(filepath=\"report.xlsx\", sheet_name=\"Data\")\n\n# Find all formulas\nexcel.formulas(filepath=\"calc.xlsx\")\n\n# List merged cells\nexcel.merged_cells(filepath=\"report.xlsx\")\n</code></pre>"},{"location":"reference/tools/excel/#demo-data","title":"Demo Data","text":"<p>A sample spreadsheet is available at <code>demo/data/sample_sales.xlsx</code> with: - Sales sheet: Product data with formulas and a table - Inventory sheet: Stock levels with conditional formulas - Summary sheet: Cross-sheet formulas and merged cells</p>"},{"location":"reference/tools/excel/#source","title":"Source","text":"<p>openpyxl Documentation</p>"},{"location":"reference/tools/excel/#based-on","title":"Based on","text":"<p>excel-mcp-server by Haris Musa (MIT)</p>"},{"location":"reference/tools/file/","title":"File","text":"<p>Read. Write. Edit. Move. All with security boundaries.</p> <p>Secure file operations with configurable security boundaries. Read, write, edit, and manage files with path validation against allowed directories.</p>"},{"location":"reference/tools/file/#highlights","title":"Highlights","text":"<ul> <li>Configurable security boundaries with allowed directories</li> <li>Automatic backup creation before writes</li> <li>Recursive directory operations with pattern filtering</li> <li>Line-numbered file reading with pagination</li> <li>Text replacement with occurrence control</li> </ul>"},{"location":"reference/tools/file/#read-operations","title":"Read Operations","text":"Function Description <code>file.read(path, offset, limit, encoding)</code> Read file content with line numbers <code>file.info(path)</code> Get file or directory metadata"},{"location":"reference/tools/file/#list-operations","title":"List Operations","text":"Function Description <code>file.list(path, pattern, recursive, include_hidden, sort_by, reverse)</code> List directory contents <code>file.tree(path, max_depth, include_hidden)</code> Display directory tree structure <code>file.search(path, pattern, file_pattern, case_sensitive, max_results)</code> Search for files by name pattern"},{"location":"reference/tools/file/#write-operations","title":"Write Operations","text":"Function Description <code>file.write(path, content, append, create_dirs)</code> Write content to file <code>file.edit(path, old_text, new_text, occurrence)</code> Edit file by replacing text"},{"location":"reference/tools/file/#file-management","title":"File Management","text":"Function Description <code>file.copy(source, dest)</code> Copy file or directory <code>file.move(source, dest)</code> Move or rename file or directory <code>file.delete(path, backup)</code> Delete file or empty directory"},{"location":"reference/tools/file/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>path</code> str File or directory path (relative to cwd or absolute) <code>pattern</code> str Glob pattern for filtering (e.g., <code>*.py</code>, <code>**/*.md</code>) <code>offset</code> int Line number to start from (0-indexed) <code>limit</code> int Maximum lines to return <code>occurrence</code> int Which match to replace (1=first, 0=all)"},{"location":"reference/tools/file/#configuration","title":"Configuration","text":"<p>Configure via <code>ot-serve.yaml</code>:</p> <pre><code>tools:\n  file:\n    allowed_dirs: [\".\"]          # Allowed directories (empty = cwd only)\n    exclude_patterns: [\".git\"]   # Patterns to exclude\n    max_file_size: 10000000      # Max file size (10MB)\n    max_list_entries: 1000       # Max entries in list/tree\n    backup_on_write: true        # Create .bak before writes\n    use_trash: false             # Use send2trash if available\n</code></pre>"},{"location":"reference/tools/file/#examples","title":"Examples","text":""},{"location":"reference/tools/file/#reading-files","title":"Reading Files","text":"<pre><code># Read entire file with line numbers\nfile.read(path=\"src/main.py\")\n\n# Read with pagination (lines 100-150)\nfile.read(path=\"large_file.log\", offset=100, limit=50)\n\n# Get file metadata\nfile.info(path=\"config.yaml\")\n</code></pre>"},{"location":"reference/tools/file/#listing-directories","title":"Listing Directories","text":"<pre><code># List current directory\nfile.list()\n\n# List with pattern filter\nfile.list(path=\"src\", pattern=\"*.py\")\n\n# Recursive listing sorted by size\nfile.list(path=\".\", recursive=True, sort_by=\"size\", reverse=True)\n\n# Display tree structure\nfile.tree(path=\"src\", max_depth=2)\n\n# Search for files\nfile.search(pattern=\"*test*\", file_pattern=\"*.py\")\n</code></pre>"},{"location":"reference/tools/file/#writing-files","title":"Writing Files","text":"<pre><code># Write new file\nfile.write(path=\"output.txt\", content=\"Hello, World!\")\n\n# Append to file\nfile.write(path=\"log.txt\", content=\"New entry\\n\", append=True)\n\n# Create with parent directories\nfile.write(path=\"new/dir/file.txt\", content=\"data\", create_dirs=True)\n</code></pre>"},{"location":"reference/tools/file/#editing-files","title":"Editing Files","text":"<pre><code># Replace text (errors if multiple occurrences)\nfile.edit(path=\"config.py\", old_text=\"DEBUG = False\", new_text=\"DEBUG = True\")\n\n# Replace all occurrences\nfile.edit(path=\"main.py\", old_text=\"TODO\", new_text=\"DONE\", occurrence=0)\n\n# Replace specific occurrence (2nd match)\nfile.edit(path=\"data.txt\", old_text=\"foo\", new_text=\"bar\", occurrence=2)\n</code></pre>"},{"location":"reference/tools/file/#file-management_1","title":"File Management","text":"<pre><code># Copy file\nfile.copy(source=\"config.yaml\", dest=\"config.backup.yaml\")\n\n# Copy directory\nfile.copy(source=\"src/\", dest=\"src_backup/\")\n\n# Move/rename file\nfile.move(source=\"old_name.py\", dest=\"new_name.py\")\n\n# Delete file (creates backup by default)\nfile.delete(path=\"temp.txt\")\n\n# Delete without backup\nfile.delete(path=\"temp.txt\", backup=False)\n</code></pre>"},{"location":"reference/tools/file/#security","title":"Security","text":"<p>All paths are validated against: - Allowed directories: Paths must be under configured <code>allowed_dirs</code> - Exclude patterns: Paths matching patterns like <code>.git</code> are blocked - File size limits: Large files are rejected to prevent memory issues</p>"},{"location":"reference/tools/file/#source","title":"Source","text":"<p>Python pathlib | shutil</p>"},{"location":"reference/tools/file/#inspired-by","title":"Inspired by","text":"<p>fast-filesystem-mcp by efforthye (Apache 2.0)</p>"},{"location":"reference/tools/grounding-search/","title":"Grounding Search","text":"<p>Google-backed answers. Real-time data. Source citations.</p> <p>Web search with Google's grounding capabilities via Gemini API. Provides current information with source citations.</p>"},{"location":"reference/tools/grounding-search/#highlights","title":"Highlights","text":"<ul> <li>Real-time web search with Google grounding</li> <li>Automatic source citations with numbered references</li> <li>Specialized searches for dev resources, docs, and Reddit</li> <li>URL deduplication in results</li> </ul>"},{"location":"reference/tools/grounding-search/#functions","title":"Functions","text":"Function Description <code>ground.search(query, ...)</code> General grounded web search <code>ground.dev(query, ...)</code> Developer resources (GitHub, Stack Overflow, docs) <code>ground.docs(query, ...)</code> Official documentation lookup <code>ground.reddit(query, ...)</code> Reddit discussions and community insights"},{"location":"reference/tools/grounding-search/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>query</code> str Search query <code>context</code> str Additional context to refine search (search only) <code>focus</code> str \"general\", \"code\", \"documentation\", \"troubleshooting\" (search only) <code>language</code> str Filter for dev search <code>framework</code> str Filter for dev search <code>technology</code> str Filter for docs search <code>subreddit</code> str Filter for reddit search"},{"location":"reference/tools/grounding-search/#requires","title":"Requires","text":"<ul> <li><code>OT_GEMINI_API_KEY</code> environment variable</li> </ul>"},{"location":"reference/tools/grounding-search/#examples","title":"Examples","text":"<pre><code># General search with context\nground.search(query=\"kubernetes pod restart policy\", focus=\"code\")\n\n# Developer resources search\nground.dev(query=\"async/await best practices\", language=\"python\")\n\n# Documentation lookup\nground.docs(query=\"connection pooling\", technology=\"postgresql\")\n\n# Reddit discussions\nground.reddit(query=\"best IDE for Python\", subreddit=\"learnpython\")\n</code></pre>"},{"location":"reference/tools/grounding-search/#source","title":"Source","text":"<p>Gemini API Grounding with Google Search</p>"},{"location":"reference/tools/ot/","title":"ot.* Internal Tools","text":"<p>Introspect. Configure. Manage. OneTool from the inside.</p> <p>Internal tools for OneTool introspection and management.</p>"},{"location":"reference/tools/ot/#highlights","title":"Highlights","text":"<ul> <li>List and filter available tools with signatures</li> <li>Check system health and API connectivity</li> <li>Access configuration, aliases, and snippets</li> <li>Publish messages to configured topics</li> </ul>"},{"location":"reference/tools/ot/#functions","title":"Functions","text":"Function Description <code>ot.tools(pattern, pack, compact)</code> List all available tools and their signatures <code>ot.push(topic, message)</code> Publish message to configured topic <code>ot.config()</code> Show aliases, snippets, and server names <code>ot.health()</code> Check tool dependencies and API connectivity <code>ot.help(tool)</code> Get detailed help for a specific tool <code>ot.instructions(pack)</code> Get usage instructions for a pack <code>ot.alias(name)</code> Show alias definition (use <code>*</code> to list all) <code>ot.snippet(name)</code> Show snippet definition (use <code>*</code> to list all)"},{"location":"reference/tools/ot/#ottools","title":"ot.tools()","text":"<p>List all available tools with signatures.</p> <pre><code># List all tools\not.tools()\n\n# Filter by name pattern\not.tools(pattern=\"search\")\n\n# Filter by pack\not.tools(pack=\"brave\")\n\n# Compact output (name and description only)\not.tools(compact=True)\n</code></pre> <p>Returns JSON-formatted list of all registered tools.</p>"},{"location":"reference/tools/ot/#otpush","title":"ot.push()","text":"<p>Publish a message to a configured topic.</p> <pre><code>ot.push(topic=\"notes\", message=\"Remember to review PR #123\")\n</code></pre> <p>Configure topics in <code>ot-serve.yaml</code>:</p> <pre><code>tools:\n  msg:\n    topics:\n      - pattern: \"notes\"\n        file: .notes/inbox.md\n      - pattern: \"ideas\"\n        file: .notes/ideas.md\n</code></pre>"},{"location":"reference/tools/ot/#otconfig","title":"ot.config()","text":"<p>Show key configuration values including aliases, snippets, and servers.</p> <pre><code>ot.config()\n</code></pre> <p>Returns JSON with: - <code>aliases</code> - configured command aliases - <code>snippets</code> - available snippet templates - <code>servers</code> - configured MCP server names</p>"},{"location":"reference/tools/ot/#othealth","title":"ot.health()","text":"<p>Check system health and API connectivity.</p> <pre><code>ot.health()\n</code></pre> <p>Returns status of: - OneTool version and Python version - Registry status and tool count - Proxy status and server connections</p>"},{"location":"reference/tools/ot/#othelp","title":"ot.help()","text":"<p>Get detailed documentation for a tool.</p> <pre><code>ot.help(tool=\"brave.search\")\not.help(tool=\"ot.tools\")\n</code></pre> <p>Returns formatted help with signature, args, returns, and examples.</p>"},{"location":"reference/tools/ot/#otinstructions","title":"ot.instructions()","text":"<p>Get usage instructions for a pack.</p> <pre><code>ot.instructions(pack=\"brave\")\not.instructions(pack=\"github\")\n</code></pre> <p>Returns instructions from <code>prompts.yaml</code> if configured, otherwise generates from tool docstrings.</p>"},{"location":"reference/tools/ot/#otalias","title":"ot.alias()","text":"<p>Show alias definition or list all aliases.</p> <pre><code># Show specific alias\not.alias(name=\"ws\")\n\n# List all aliases\not.alias(name=\"*\")\n</code></pre> <p>Aliases are defined in config:</p> <pre><code>alias:\n  ws: brave.search\n  ns: brave.news\n  wf: web.fetch\n</code></pre>"},{"location":"reference/tools/ot/#otsnippet","title":"ot.snippet()","text":"<p>Show snippet definition or list all snippets.</p> <pre><code># Show specific snippet\not.snippet(name=\"multi_search\")\n\n# List all snippets\not.snippet(name=\"*\")\n</code></pre> <p>Snippets are defined in config:</p> <pre><code>snippets:\n  multi_search:\n    description: Search multiple queries\n    params:\n      queries: { required: true }\n    body: |\n      results = []\n      for q in {{ queries }}:\n          results.append(brave.search(query=q))\n      \"\\n---\\n\".join(results)\n</code></pre>"},{"location":"reference/tools/ot/#source","title":"Source","text":"<p>OneTool internal implementation</p>"},{"location":"reference/tools/package/","title":"Package","text":"<p>Latest versions. npm, PyPI, OpenRouter. No API key needed.</p> <p>Check latest versions for npm, PyPI packages and search OpenRouter AI models.</p>"},{"location":"reference/tools/package/#highlights","title":"Highlights","text":"<ul> <li>Unified version checking across npm and PyPI</li> <li>Parallel fetching via ThreadPoolExecutor</li> <li>Version comparison support (pass dict with current versions)</li> <li>OpenRouter model search with glob patterns</li> </ul>"},{"location":"reference/tools/package/#functions","title":"Functions","text":"Function Description <code>package.npm(packages)</code> Check latest npm package versions <code>package.pypi(packages)</code> Check latest PyPI package versions <code>package.models(query, provider, limit)</code> Search OpenRouter AI models <code>package.version(registry, packages)</code> Unified version check with parallel fetching"},{"location":"reference/tools/package/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>packages</code> list or dict Package names, or dict mapping names to current versions <code>registry</code> str \"npm\", \"pypi\", or \"openrouter\" <code>query</code> str Search query for model name/id (case-insensitive) <code>provider</code> str Filter models by provider (e.g., \"anthropic\", \"openai\")"},{"location":"reference/tools/package/#requires","title":"Requires","text":"<p>No API key required.</p>"},{"location":"reference/tools/package/#examples","title":"Examples","text":"<pre><code># Check npm package versions\npackage.npm(packages=[\"react\", \"typescript\"])\n\n# Check PyPI package versions\npackage.pypi(packages=[\"requests\", \"httpx\"])\n\n# Compare against current versions\npackage.npm(packages={\"react\": \"18.2.0\", \"typescript\": \"5.0.0\"})\n\n# Search OpenRouter models\npackage.models(query=\"claude-sonnet-4.*\", provider=\"anthropic\")\n\n# Unified version check\npackage.version(registry=\"npm\", packages=[\"express\", \"fastify\"])\n</code></pre>"},{"location":"reference/tools/package/#source","title":"Source","text":"<p>npm Registry API | PyPI JSON API | OpenRouter API</p>"},{"location":"reference/tools/package/#based-on","title":"Based on","text":"<p>mcp-package-version by Sam McLeod (MIT)</p>"},{"location":"reference/tools/page/","title":"page.* Browser Capture Analysis","text":"<p>Analyze browse session captures from <code>ot-browse</code>.</p> <p>Tools for inspecting, searching, and comparing browser captures.</p>"},{"location":"reference/tools/page/#functions","title":"Functions","text":"Function Description <code>page.list()</code> List available sessions <code>page.captures(session_id)</code> List captures in a session <code>page.annotations(session_id, capture_id)</code> Get annotations with selectors and HTML <code>page.context(session_id, capture_id, annotation_id)</code> Get HTML/accessibility context for annotation <code>page.search(session_id, capture_id, pattern)</code> Search HTML and accessibility tree <code>page.accessibility(session_id, capture_id, filter_type)</code> Filter large accessibility tree <code>page.diff(session_id, capture_id_1, capture_id_2)</code> Compare two captures <code>page.summary(session_id, capture_id)</code> Quick overview of a capture"},{"location":"reference/tools/page/#parameters","title":"Parameters","text":"Parameter Description <code>session_id</code> Session directory name (e.g., \"2025-12-31_22-46_session_001\") <code>capture_id</code> Capture directory name (e.g., \"capture_001\") <code>sessions_dir</code> Path to sessions directory (default: <code>.browse/</code>) <code>filter_type</code> Accessibility filter: \"interactive\", \"headings\", \"forms\", \"links\", \"landmarks\""},{"location":"reference/tools/page/#pagelist","title":"page.list()","text":"<p>List all available browse sessions.</p> <pre><code>page.list()\npage.list(sessions_dir=\"./my-sessions/\")\n</code></pre>"},{"location":"reference/tools/page/#pagecaptures","title":"page.captures()","text":"<p>List captures in a session.</p> <pre><code>page.captures(session_id=\"2025-12-31_22-46_session_001\")\n</code></pre>"},{"location":"reference/tools/page/#pagesummary","title":"page.summary()","text":"<p>Get a quick overview of a capture.</p> <pre><code>page.summary(session_id=\"session_001\", capture_id=\"capture_001\")\n</code></pre>"},{"location":"reference/tools/page/#pagesearch","title":"page.search()","text":"<p>Search HTML and accessibility tree for patterns.</p> <pre><code>page.search(session_id=\"session_001\", capture_id=\"capture_001\", pattern=\"login\")\n</code></pre>"},{"location":"reference/tools/page/#pageaccessibility","title":"page.accessibility()","text":"<p>Filter large accessibility trees by element type.</p> <pre><code>page.accessibility(session_id=\"session_001\", capture_id=\"capture_001\", filter_type=\"interactive\")\npage.accessibility(session_id=\"session_001\", capture_id=\"capture_001\", filter_type=\"headings\")\n</code></pre> <p>Filter types: <code>interactive</code>, <code>headings</code>, <code>forms</code>, <code>links</code>, <code>landmarks</code></p>"},{"location":"reference/tools/page/#pagediff","title":"page.diff()","text":"<p>Compare two captures side by side.</p> <pre><code>page.diff(session_id=\"session_001\", capture_id_1=\"capture_001\", capture_id_2=\"capture_002\")\n</code></pre>"},{"location":"reference/tools/page/#data-location","title":"Data Location","text":"<p>Captures are stored in <code>.browse/{session}/{capture}/</code> with:</p> <ul> <li><code>screenshot.png</code> - Visual capture</li> <li><code>page.html</code> - Full HTML content</li> <li><code>accessibility.json</code> - Accessibility tree</li> <li><code>annotations.json</code> - User-added annotations</li> </ul>"},{"location":"reference/tools/page/#performance","title":"Performance","text":"<ul> <li>Streams large files instead of loading into memory</li> <li>Batch line number lookups for 8K+ line HTML files</li> <li>Filters 258KB accessibility trees down to &lt;10KB</li> </ul>"},{"location":"reference/tools/page/#source","title":"Source","text":"<p>Original implementation for <code>ot-browse</code> captures.</p>"},{"location":"reference/tools/ripgrep/","title":"Ripgrep","text":"<p>Blazing fast file search. Regex or literal. Any codebase.</p> <p>Fast text and regex search in files using ripgrep.</p>"},{"location":"reference/tools/ripgrep/#highlights","title":"Highlights","text":"<ul> <li>Search, count, and list files with regex or literal patterns</li> <li>Filter by file type or glob pattern</li> <li>Context lines around matches</li> <li>Path resolution relative to effective cwd</li> </ul>"},{"location":"reference/tools/ripgrep/#functions","title":"Functions","text":"Function Description <code>ripgrep.search(pattern, path, ...)</code> Search files for patterns <code>ripgrep.count(pattern, path, ...)</code> Count pattern occurrences <code>ripgrep.files(path, ...)</code> List files that would be searched <code>ripgrep.types()</code> List supported file types"},{"location":"reference/tools/ripgrep/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>pattern</code> str Regex or literal pattern to search for <code>path</code> str Directory or file to search (default: current directory) <code>case_sensitive</code> bool Match case-sensitively (default: True) <code>fixed_strings</code> bool Treat pattern as literal, not regex <code>file_type</code> str Filter by type (e.g., \"py\", \"js\", \"ts\") <code>glob</code> str Filter by glob pattern (e.g., \"*.md\") <code>context</code> int Lines of context around matches <code>max_results</code> int Limit number of matching lines"},{"location":"reference/tools/ripgrep/#requires","title":"Requires","text":"<ul> <li><code>rg</code> binary (install with: <code>brew install ripgrep</code>)</li> </ul>"},{"location":"reference/tools/ripgrep/#examples","title":"Examples","text":"<pre><code># Basic search\nripgrep.search(pattern=\"TODO\", path=\"src/\")\n\n# Case insensitive in Python files\nripgrep.search(pattern=\"error\", case_sensitive=False, file_type=\"py\")\n\n# Count occurrences\nripgrep.count(pattern=\"import\", path=\".\", file_type=\"py\")\n\n# List files\nripgrep.files(path=\"src/\", file_type=\"py\")\n\n# List supported file types\nripgrep.types()\n</code></pre>"},{"location":"reference/tools/ripgrep/#source","title":"Source","text":"<p>ripgrep</p>"},{"location":"reference/tools/ripgrep/#inspired-by","title":"Inspired by","text":"<p>mcp-ripgrep by Matteo Collina (MIT)</p>"},{"location":"reference/tools/transform/","title":"Transform","text":"<p>Data in. Structured output. One function.</p> <p>LLM-powered data transformation. Takes input data and a prompt, uses an LLM to process/transform it.</p>"},{"location":"reference/tools/transform/#highlights","title":"Highlights","text":"<ul> <li>Single function for any data transformation</li> <li>Configurable model via OpenRouter or OpenAI-compatible API</li> <li>Chain with other tools for structured output extraction</li> </ul>"},{"location":"reference/tools/transform/#functions","title":"Functions","text":"Function Description <code>llm.transform(input, prompt, ...)</code> Transform data using LLM instructions"},{"location":"reference/tools/transform/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>input</code> any Data to transform (converted to string) <code>prompt</code> str Instructions for transformation <code>model</code> str AI model to use (uses <code>transform.model</code> from config)"},{"location":"reference/tools/transform/#requires","title":"Requires","text":"<p>Configuration (tool not available until all are set): - <code>OPENAI_API_KEY</code> in secrets.yaml - <code>transform.base_url</code> in ot-serve.yaml (e.g., <code>https://openrouter.ai/api/v1</code>) - <code>transform.model</code> in ot-serve.yaml (e.g., <code>openai/gpt-5-mini</code>)</p>"},{"location":"reference/tools/transform/#examples","title":"Examples","text":"<pre><code># Extract structured data from search results\nllm.transform(\n    input=brave.search(query=\"gold price today\"),\n    prompt=\"Extract the current gold price in USD/oz as a single number\"\n)\n\n# Convert to YAML format\nllm.transform(\n    input=some_data,\n    prompt=\"Return ONLY valid YAML with fields: name, price, url\"\n)\n\n# Summarize content\nllm.transform(\n    input=web.fetch(url=\"https://example.com/article\"),\n    prompt=\"Summarize the main points in 3 bullet points\"\n)\n</code></pre>"},{"location":"reference/tools/transform/#configuration","title":"Configuration","text":"<p>Add to <code>ot-serve.yaml</code>:</p> <pre><code>tools:\n  transform:\n    base_url: https://openrouter.ai/api/v1\n    model: openai/gpt-5-mini\n</code></pre>"},{"location":"reference/tools/transform/#source","title":"Source","text":"<p>OpenRouter API | OpenAI API</p>"},{"location":"reference/tools/web-fetch/","title":"Web Fetch","text":"<p>Clean content from any URL. No noise.</p> <p>Extracts main content from web pages, filtering navigation, ads, and boilerplate.</p>"},{"location":"reference/tools/web-fetch/#highlights","title":"Highlights","text":"<ul> <li>Clean content extraction filtering navigation and ads</li> <li>Multiple output formats (markdown, text, json)</li> <li>Batch processing with concurrent execution</li> <li>Output truncation with max_length parameter</li> </ul>"},{"location":"reference/tools/web-fetch/#functions","title":"Functions","text":"Function Description <code>web.fetch(url, ...)</code> Fetch and extract content from a URL <code>web.fetch_batch(urls, ...)</code> Fetch multiple URLs concurrently"},{"location":"reference/tools/web-fetch/#key-parameters","title":"Key Parameters","text":"Parameter Type Description <code>url</code> str URL to fetch content from <code>output_format</code> str \"markdown\" (default), \"text\", \"json\" <code>include_links</code> bool Include links in output <code>include_images</code> bool Include image references <code>include_tables</code> bool Include tables in output <code>include_formatting</code> bool Preserve headers/lists (default: True) <code>fast</code> bool Skip fallback extraction for speed <code>max_length</code> int Truncate output to this length"},{"location":"reference/tools/web-fetch/#examples","title":"Examples","text":"<pre><code># Fetch single URL\nweb.fetch(url=\"https://example.com/article\")\n\n# Fetch with markdown output\nweb.fetch(url=\"https://docs.python.org/3/tutorial/\", output_format=\"markdown\")\n\n# Fast mode without fallback\nweb.fetch(url=\"https://example.com/page\", fast=True)\n\n# Batch fetch multiple URLs\nweb.fetch_batch(urls=[\n    \"https://example.com/page1\",\n    \"https://example.com/page2\"\n])\n</code></pre>"},{"location":"reference/tools/web-fetch/#source","title":"Source","text":"<p>trafilatura</p>"}]}