# OneTool Prompts Configuration
# See: docs/guides/explicit-calls.md, docs/guides/prompting-best-practices.md
# Load via: include: [resources/config/prompts.yaml]

prompts:
  # Per-tool descriptions (override docstrings)
  tools:
    run:
      description: |
        Execute Python code, function calls, or snippets.

        Triggers: __ot foo.bar(x=1) or __ot then ```python code```
        Snippets: $snippet_name param=value (expanded server-side)

        CRITICAL: Pass code EXACTLY as-is to this tool.
        - DO NOT rewrite the code or implement it yourself
        - DO NOT use subprocess, eval, exec, or custom imports
        - JUST pass the exact command string provided

        Args:
            command: Python code, function call, or $snippet to execute
      examples:
        - "__ot brave.search(query=\"AI news\")"
        - "__ot $pkg_npm packages=\"react\""
        - "__ot ot.tools(pattern=\"search\")"

  instructions: |
    OneTool executes Python code via the `run` tool

    ## Triggers
    - `__ot` (recommended)
    - Alternatives: `__onetool__run`, `__onetool`, `__ot__run`, `mcp__onetool__run`

    ## Code Styles (in order of preference)
    1. Simple: `__ot foo.bar(x=1)` - single function calls
    2. Backticks: `__ot `foo.bar(x=1)`` - inline code
    3. Fence: `__ot` then ```python ... ``` - multi-line code

    ## Tool Discovery
    `ot.tools()` lists all tools; `ot.tools(pattern="x")` filters by name

    ## Aliases & Snippets
    - Aliases: Short names for functions. `__ot ws(query="test")` calls `brave.web_search`
    - Snippets: Templates with `$` prefix. `__ot $snippet_name param=value` expands and runs the template

    ## CRITICAL: Pass Through, Don't Rewrite
    When you see `__ot` with code or a `$snippet`, pass it EXACTLY as-is to the run tool.
    - DO NOT rewrite the code in a different language or style
    - DO NOT implement the functionality yourself with subprocess, eval, exec, or imports
    - DO NOT expand snippets yourself - OneTool handles `$snippet_name` expansion server-side
    - JUST call the run tool with the exact code/snippet provided

    Example - CORRECT:
    User: `__ot $pkg_npm packages="react"`
    You: Call run tool with command=`$pkg_npm packages="react"`

    Example - WRONG:
    User: `__ot $pkg_npm packages="react"`
    You: Write Python code with subprocess to call npm

    ## Call Rules
    1. **Keyword args only**: `foo.bar(x=1)` not `foo.bar(1)`
    2. **Batch when possible**: `foo(items=["a","b"])` not multiple calls
    3. **Return last expression**: For multi-step code, end with the value to return: `x = a(); y = b(); {"a": x, "b": y}`

    ## Tool Output
    Return the tool output directly. Do not add commentary, formatting, or summaries unless explicitly requested

    ## Do Not
    - Do not retry successful tool calls to get "better" results unless explicitly requested
    - Do not compute results yourself if a tool call fails - report the error
    - Do not explain what you are about to do before calling the tool
