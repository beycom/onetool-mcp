# Everything Claude Code benchmark
# Reference: https://github.com/affaan-m/everything-claude-code
#
# Tests context rot with many MCP servers enabled.

defaults:
  timeout: 60
  model: google/gemini-3-flash-preview

scenarios:
  - name: "ecc:context-rot"
    description: Test LLM response with many MCP servers loaded
    tasks:
      - name: "ecc:mcp-rot"
        server: [github, brave-search, context7, memory, sequential-thinking, fetch, magic, filesystem, gemini-grounding, firecrawl, supabase, railway]
        tags: [ecc, context-rot]
        prompt: 
          Say "1`"
          ---PROMPT---
          Say "2"
          ---PROMPT---
          Say "3"
          ---PROMPT---
          Say "4"
          ---PROMPT---
          Say "5"
          ---PROMPT---
          Say "6"
          ---PROMPT---
          Say "7"
          ---PROMPT---
          Say "8"
          ---PROMPT---
          Say "9"
          ---PROMPT---
          Say "10"

      - name: "ecc:no-mcp"
        server: []
        tags: [ecc, context-rot]
        prompt: 
          Say "1`"
          ---PROMPT---
          Say "2"
          ---PROMPT---
          Say "3"
          ---PROMPT---
          Say "4"
          ---PROMPT---
          Say "5"
          ---PROMPT---
          Say "6"
          ---PROMPT---
          Say "7"
          ---PROMPT---
          Say "8"
          ---PROMPT---
          Say "9"
          ---PROMPT---
          Say "10"
servers:
  github:
    type: http
    url: https://api.githubcopilot.com/mcp/
    headers:
      Authorization: Bearer ${B_GITHUB_TOKEN}
      Accept: application/json, text/event-stream
      "MCP-Protocol-Version": "2025-06-18"
    timeout: 60

  brave-search:
    type: stdio
    command: npx
    args: ["-y", "@brave/brave-search-mcp-server", "--brave-api-key", "${B_BRAVE_API_KEY}"]

  context7:
    type: http
    url: https://mcp.context7.com/mcp
    headers:
      CONTEXT7_API_KEY: ${B_CONTEXT7_API_KEY}

  memory:
    type: stdio
    command: npx
    args: ["-y", "@modelcontextprotocol/server-memory"]

  sequential-thinking:
    type: stdio
    command: npx
    args: ["-y", "@modelcontextprotocol/server-sequential-thinking"]

  fetch:
    type: http
    url: https://remote.mcpservers.org/fetch/mcp

  magic:
    type: stdio
    command: npx
    args: ["-y", "@magicuidesign/mcp@latest"]

  filesystem:
    type: stdio
    command: npx
    args: ["-y", "@modelcontextprotocol/server-filesystem", "."]

  gemini-grounding:
    type: stdio
    command: npx
    args: ["-y", "gemini-grounding"]
    env:
      GEMINI_API_KEY: ${B_GEMINI_API_KEY}

  firecrawl:
    type: stdio
    command: npx
    args: ["-y", "firecrawl-mcp"]
    env:
      FIRECRAWL_API_KEY: ${B_FIRECRAWL_API_KEY}

  supabase:
    type: stdio
    command: npx
    args: ["-y", "@supabase/mcp-server-supabase@latest", "--project-ref=${B_SUPABASE_PROJECT_REF}", "--access-token=${B_SUPABASE_ACCESS_TOKEN}"]

  railway:
    type: stdio
    command: npx
    args: ["-y", "@railway/mcp-server"]
